<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 2: Visual Perception &amp; Design Principles</title>

<script src="site_libs/header-attrs-2.30/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Visual Analytics & Data Storytelling with R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="syllabus.html">Syllabus</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Weeks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week01.html">Week 1: Introduction to Data Viz &amp; R</a>
    </li>
    <li>
      <a href="week02.html">Week 2: Visual Perception &amp; Design</a>
    </li>
    <li>
      <a href="week03.html">Week 3: Grammar of Graphics &amp; ggplot2</a>
    </li>
    <li>
      <a href="week04.html">Week 4: Chart Types &amp; Variations</a>
    </li>
    <li>
      <a href="week05.html">Week 5: Data Wrangling Essentials</a>
    </li>
    <li>
      <a href="week06.html">Week 6: Interactive Visualizations</a>
    </li>
    <li>
      <a href="week07.html">Week 7: Geographic Visualization</a>
    </li>
    <li>
      <a href="week08.html">Week 8: Capstone ‚Äî Viz in Practice</a>
    </li>
  </ul>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/patilv/VizAnalytics4Biz">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Week 2: Visual Perception &amp; Design
Principles</h1>

</div>


<div class="hero-banner">
<div class="week-badge">
2
</div>
<h1>
Visual Perception &amp; Design Principles
</h1>
<p>
How the brain processes visual information and how great designers have
turned that knowledge into lasting principles
</p>
</div>
<div id="learning-objectives" class="section level2 objectives">
<h2>Learning Objectives</h2>
<p>By the end of this week, you will be able to:</p>
<ul>
<li>Explain the two stages of visual processing (preattentive and
attentive) and their design implications</li>
<li>Identify and leverage preattentive attributes in visualization
design</li>
<li>Apply Gestalt principles of perception to organize visual
elements</li>
<li>Use Cleveland &amp; McGill‚Äôs perceptual hierarchy to choose
appropriate chart types</li>
<li>Select effective color palettes for sequential, diverging, and
qualitative data</li>
<li>Design visualizations that account for colorblindness and working
memory limits</li>
<li>Explain and apply Tufte‚Äôs data-ink ratio and lie factor
concepts</li>
<li>Identify common deceptive practices in data visualization and
explain why they mislead</li>
<li>Redesign a cluttered chart to maximize the data-ink ratio using
ggplot2</li>
</ul>
</div>
<div id="common-errors-you-may-encounter"
class="section level2 callout-error">
<h2>Common Errors You May Encounter</h2>
<p><strong>‚ÄúError: could not find function
‚Äòdisplay.brewer.pal‚Äô‚Äù</strong> This means the RColorBrewer package is
not loaded. Add <code>library(RColorBrewer)</code> at the top of your
script or chunk.</p>
<p><strong>‚ÄúError in library(patchwork) : there is no package called
‚Äòpatchwork‚Äô‚Äù</strong> You need to install the package first. Run
<code>install.packages("patchwork")</code> in the console (not inside a
code chunk), then try <code>library(patchwork)</code> again.</p>
<p><strong>Plots look squished or overlapping</strong> Try adjusting
<code>fig.width</code> and <code>fig.height</code> in your chunk
options. For side-by-side plots using patchwork,
<code>fig.width=10, fig.height=5</code> is a good starting point.
Example: <code>```{r my-plot, fig.width=10, fig.height=5}</code></p>
<p><strong>Colors look wrong or produce an error</strong> Make sure you
are using quotes around hex color codes: <code>"#002967"</code> not
<code>#002967</code>. Without quotes, R interprets the <code>#</code> as
a comment and ignores the rest.</p>
</div>
<hr />
<div id="part-1-how-the-brain-sees-data" class="section level2">
<h2>Part 1: How the Brain Sees Data</h2>
<p>Of all our senses, <strong>vision has by far the highest
bandwidth</strong>. We take in more information through our eyes than
through hearing, touch, taste, and smell combined. This is why
visualization is such a powerful tool for understanding data ‚Äì it
leverages the sense we are best equipped to use.</p>
<div class="figure">
<img src="images/02/sensory_bandwidths.jpg" alt="Vision dominates our sensory bandwidth, making it the most effective channel for communicating complex data." width="70%" />
<p class="caption">
Vision dominates our sensory bandwidth, making it the most effective
channel for communicating complex data.
</p>
</div>
<p>But vision is not a simple camera. The brain processes visual
information in <strong>two distinct stages</strong>:</p>
<ol style="list-style-type: decimal">
<li><strong>Preattentive processing</strong> ‚Äì fast, parallel, and
automatic. This happens in under 250 milliseconds, before you are
consciously aware of it. Your visual system detects certain features
(color, size, orientation, motion) across the entire visual field
simultaneously.</li>
<li><strong>Attentive processing</strong> ‚Äì slow, serial, and effortful.
This is the deliberate, conscious examination of individual elements one
at a time. It requires focused attention and cognitive effort.</li>
</ol>
<p>The distinction matters enormously for visualization design. If you
encode important information using preattentive attributes, your viewer
will grasp it instantly. If you require attentive processing for the key
message, your viewer must work hard ‚Äì and may miss it entirely.</p>
<div class="figure">
<img src="images/02/preattentive.png" alt="Preattentive processing allows us to detect certain visual features instantly, without conscious effort." width="70%" />
<p class="caption">
Preattentive processing allows us to detect certain visual features
instantly, without conscious effort.
</p>
</div>
<p>Here is a classic demonstration. In the first image below, the number
5 is hidden among other digits in uniform grey. In the second, the 5s
are highlighted in a contrasting color. Notice how effortlessly you
detect them once color provides a preattentive cue.</p>
<div class="figure">
<img src="images/02/num5grey.jpg" alt="Without a preattentive cue, finding the 5s requires slow, serial search." width="45%" />
<p class="caption">
Without a preattentive cue, finding the 5s requires slow, serial search.
</p>
</div>
<div class="figure">
<img src="images/02/num5greyblack.jpg" alt="With color as a preattentive cue, the 5s pop out immediately." width="45%" />
<p class="caption">
With color as a preattentive cue, the 5s pop out immediately.
</p>
</div>
</div>
<div id="preattentive-attributes" class="section level2">
<h2>Preattentive Attributes</h2>
<p>Researchers have identified a set of visual properties that our
brains process preattentively. These include:</p>
<ul>
<li><strong>Position</strong> ‚Äì where something is located in space</li>
<li><strong>Length</strong> ‚Äì the extent of a line or bar</li>
<li><strong>Size</strong> ‚Äì the area of a mark</li>
<li><strong>Shape</strong> ‚Äì circles vs.¬†squares vs.¬†triangles,
etc.</li>
<li><strong>Color (hue)</strong> ‚Äì red vs.¬†blue vs.¬†green</li>
<li><strong>Color (intensity/saturation)</strong> ‚Äì light vs.¬†dark</li>
<li><strong>Orientation</strong> ‚Äì the angle or tilt of a mark</li>
<li><strong>Enclosure</strong> ‚Äì bounded regions</li>
</ul>
<div class="figure">
<img src="images/02/Preattentive_3.JPG" alt="A visual catalog of preattentive attributes. Each of these features is detected automatically by the visual system." width="80%" />
<p class="caption">
A visual catalog of preattentive attributes. Each of these features is
detected automatically by the visual system.
</p>
</div>
<p>All of these are processed in <strong>under 250 milliseconds</strong>
‚Äì before conscious attention kicks in. This is why a single red dot
among grey dots ‚Äúpops out‚Äù instantly, but finding a specific letter in a
block of text requires careful scanning.</p>
<div class="callout-tip">
<p><strong>Design implication:</strong> When you want to draw attention
to a specific data point or category, encode it with a preattentive
attribute ‚Äì a distinct color, a larger size, or a different shape. Do
not rely on labels or legends alone for the most important
comparisons.</p>
</div>
</div>
<div id="try-it-preattentive-processing-explorer"
class="section level2">
<h2>Try It: Preattentive Processing Explorer</h2>
<p>You have just read about preattentive attributes in theory. Now
experience them firsthand. The sandbox below lets you switch between
color, size, and shape cues, adjust the number of distractor points, and
see how well each attribute ‚Äúpops out‚Äù under different conditions.</p>
<div class="sandbox-section">
<div class="sandbox-header">
<p><span class="sandbox-icon">üß™</span> Preattentive Processing Explorer
‚Äî Which Attribute Pops Out?</p>
</div>
<iframe class="sandbox-frame" src="https://analytics.gonzaga.edu/week02-preattentive/" height="580" loading="lazy" allowfullscreen>
</iframe>
<div class="sandbox-cold-start">
<p>If the app takes a few seconds to load on first visit, that is normal
‚Äî the server is waking up.</p>
</div>
</div>
<div class="try-it-box">
<p><strong>Exploration Tasks:</strong></p>
<ol style="list-style-type: decimal">
<li>Set the attribute to <strong>Color</strong> and increase the number
of background points to 100. How quickly can you spot the target?</li>
<li>Switch to <strong>Shape</strong> with the same number of points. Is
the target harder or easier to find compared to color?</li>
<li>Try <strong>Size</strong> ‚Äî does a larger target pop out as
effectively as a differently colored one?</li>
<li>Enable <strong>Redundant coding</strong> (color + size together).
Does the combination make the target even more noticeable? Why might
this matter for accessibility?</li>
</ol>
</div>
<div class="callout-info">
<p><strong>What You Should Have Noticed:</strong> Color is typically the
strongest preattentive cue ‚Äî the target pops out almost instantly
regardless of how many distractors surround it. Shape is weaker,
especially with many points. Size is moderate. Redundant coding
(combining two channels) is the most robust, which is why it is
recommended for colorblind-accessible designs.</p>
</div>
<div class="callout-ai">
<p><strong>AI &amp; This Concept</strong> When prompting AI to build a
chart, don‚Äôt let it choose the encoding by default. Specify
<em>which</em> preattentive attribute you want to use and <em>why</em>.
AI tools tend to over-rely on color ‚Äî use this sandbox to decide for
yourself which attribute works best for your data.</p>
</div>
<div id="preattentive-processing-in-r-color-cue" class="section level3">
<h3>Preattentive Processing in R: Color Cue</h3>
<p>Let us demonstrate this principle step by step. First, we create a
scatter plot where all points look the same:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>df_points <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">50</span>),</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">50</span>),</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;background&quot;</span>, <span class="dv">49</span>), <span class="st">&quot;target&quot;</span>)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>)</span></code></pre></div>
<p>Now we plot two versions ‚Äì one with no cue, one with color:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>p_no_cue <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_points, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">&quot;#94a3b8&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;No preattentive cue&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Find the different point&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>p_color_cue <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_points, <span class="fu">aes</span>(x, y, <span class="at">color =</span> group)) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;background&quot;</span> <span class="ot">=</span> <span class="st">&quot;#94a3b8&quot;</span>, <span class="st">&quot;target&quot;</span> <span class="ot">=</span> <span class="st">&quot;#C41E3A&quot;</span>)) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Color as preattentive cue&quot;</span>,</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;The target pops out instantly&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>p_no_cue <span class="sc">+</span> p_color_cue</span></code></pre></div>
<p><img src="week02_files/figure-html/preattentive-color-demo-1.png" alt="" width="768" /></p>
<p>In the left panel, every point is identical ‚Äì finding the ‚Äútarget‚Äù is
impossible without additional information. In the right panel, the
single red point (Gonzaga red, <code>#C41E3A</code>) is detected
immediately. This is preattentive processing at work.</p>
</div>
<div id="preattentive-processing-in-r-size-and-redundant-coding"
class="section level3">
<h3>Preattentive Processing in R: Size and Redundant Coding</h3>
<p>We can extend this demonstration to show how <strong>size</strong>
also serves as a preattentive cue, and how combining cues (redundant
coding) is even more effective:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>p_size_cue <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_points, <span class="fu">aes</span>(x, y, <span class="at">size =</span> group)) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>) <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;background&quot;</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">&quot;target&quot;</span> <span class="ot">=</span> <span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Size as preattentive cue&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Larger size draws immediate attention&quot;</span>) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>p_redundant <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_points, <span class="fu">aes</span>(x, y, <span class="at">color =</span> group, <span class="at">size =</span> group)) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;background&quot;</span> <span class="ot">=</span> <span class="st">&quot;#94a3b8&quot;</span>, <span class="st">&quot;target&quot;</span> <span class="ot">=</span> <span class="st">&quot;#C41E3A&quot;</span>)) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>  <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;background&quot;</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">&quot;target&quot;</span> <span class="ot">=</span> <span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Color + size (redundant coding)&quot;</span>,</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Multiple cues reinforce each other&quot;</span>) <span class="sc">+</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>p_size_cue <span class="sc">+</span> p_redundant</span></code></pre></div>
<p><img src="week02_files/figure-html/preattentive-size-demo-1.png" alt="" width="768" /></p>
<p>Notice how combining color and size ‚Äì <strong>redundant
coding</strong> ‚Äì makes the target even more salient. This is a valuable
technique when you need to ensure a data point is noticed.</p>
</div>
</div>
<div id="gestalt-principles-of-perception" class="section level2">
<h2>Gestalt Principles of Perception</h2>
<p>In the early 20th century, German psychologists developed the
<strong>Gestalt principles</strong> ‚Äì a set of rules describing how the
brain organizes visual elements into coherent groups. These principles
operate automatically and have direct implications for chart design.</p>
<div class="figure">
<img src="images/02/gestaltcomplete6.png" alt="The Gestalt principles describe how we perceive groups, patterns, and wholes from individual visual elements." width="80%" />
<p class="caption">
The Gestalt principles describe how we perceive groups, patterns, and
wholes from individual visual elements.
</p>
</div>
<p>The key Gestalt principles for visualization are:</p>
<ul>
<li><strong>Proximity</strong> ‚Äì Elements that are close together are
perceived as belonging to the same group. In a grouped bar chart, the
bars within each cluster are read as related because they are near one
another.</li>
<li><strong>Similarity</strong> ‚Äì Elements that look alike (same color,
shape, or size) are perceived as related. This is why we use consistent
colors for the same category across multiple panels.</li>
<li><strong>Enclosure</strong> ‚Äì A boundary or shaded region around
elements groups them together, even if they are otherwise dissimilar.
This is the principle behind panel borders in faceted plots.</li>
<li><strong>Closure</strong> ‚Äì The brain completes incomplete shapes. We
perceive a circle even when part of its outline is missing. Grid lines
do not need to be continuous ‚Äì subtle tick marks are often
sufficient.</li>
<li><strong>Continuity</strong> ‚Äì Elements arranged along a smooth line
or curve are perceived as more related. This is why connected line
charts are so effective for showing trends over time.</li>
<li><strong>Connection</strong> ‚Äì Elements that are physically connected
(by a line, for example) are perceived as related. This principle is
stronger than color similarity.</li>
</ul>
<div class="callout-tip">
<p><strong>Putting Gestalt to work:</strong> When designing a
visualization, ask yourself: ‚ÄúWhat groupings do I want the viewer to
perceive?‚Äù Then use proximity, similarity, enclosure, or connection to
create those groupings. If the viewer is seeing groups you did not
intend, one of these principles is likely working against you.</p>
</div>
<div id="gestalt-in-practice-with-ggplot2" class="section level3">
<h3>Gestalt in Practice with ggplot2</h3>
<p>Let us see how proximity and similarity work in a real chart. We will
use the <code>mpg</code> dataset to create a grouped bar chart where
Gestalt principles organize the visual information:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>mpg_summary <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;compact&quot;</span>, <span class="st">&quot;midsize&quot;</span>, <span class="st">&quot;suv&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">group_by</span>(class, drv) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="fu">ggplot</span>(mpg_summary, <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> mean_hwy, <span class="at">fill =</span> drv)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;#002967&quot;</span>, <span class="st">&quot;f&quot;</span> <span class="ot">=</span> <span class="st">&quot;#C41E3A&quot;</span>, <span class="st">&quot;r&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B4975A&quot;</span>),</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;4-Wheel&quot;</span>, <span class="st">&quot;f&quot;</span> <span class="ot">=</span> <span class="st">&quot;Front&quot;</span>, <span class="st">&quot;r&quot;</span> <span class="ot">=</span> <span class="st">&quot;Rear&quot;</span>)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Gestalt Principles at Work&quot;</span>,</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Proximity groups bars by class; similarity (color) groups by drive type&quot;</span>,</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Vehicle Class&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Mean Highway MPG&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Drive Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code></pre></div>
<p><img src="week02_files/figure-html/gestalt-demo-1.png" alt="" width="864" /></p>
<p>In this chart, <strong>proximity</strong> groups the bars within each
vehicle class (compact, midsize, SUV), while <strong>similarity</strong>
(color) lets you compare drive types across classes. The Gonzaga colors
‚Äì navy (<code>#002967</code>), red (<code>#C41E3A</code>), and gold
(<code>#B4975A</code>) ‚Äì provide distinct, memorable hues.</p>
</div>
</div>
<div id="cleveland-mcgills-perceptual-hierarchy" class="section level2">
<h2>Cleveland &amp; McGill‚Äôs Perceptual Hierarchy</h2>
<p>Not all visual encodings are created equal. In a landmark 1984 paper,
William Cleveland and Robert McGill conducted experiments to determine
which visual properties people judge most accurately. Their findings
established a <strong>perceptual hierarchy</strong> that remains
foundational to visualization design.</p>
<div class="figure">
<img src="images/02/cleveland_mcgill_cairo.jpg" alt="Cleveland and McGill's hierarchy of perceptual accuracy, as adapted by Alberto Cairo. Encodings at the top are judged most accurately." width="70%" />
<p class="caption">
Cleveland and McGill‚Äôs hierarchy of perceptual accuracy, as adapted by
Alberto Cairo. Encodings at the top are judged most accurately.
</p>
</div>
<p>From <strong>most accurate</strong> to <strong>least
accurate</strong>:</p>
<ol style="list-style-type: decimal">
<li><strong>Position on a common scale</strong> ‚Äì comparing points along
a shared axis (e.g., dot plot, scatter plot)</li>
<li><strong>Position on unaligned scales</strong> ‚Äì comparing across
separate but similar axes (e.g., small multiples)</li>
<li><strong>Length</strong> ‚Äì comparing the extent of bars or lines
(e.g., bar chart)</li>
<li><strong>Angle / Slope</strong> ‚Äì judging tilt or wedge size (e.g.,
pie chart, slope graph)</li>
<li><strong>Area</strong> ‚Äì comparing the size of regions (e.g., bubble
chart, treemap)</li>
<li><strong>Volume</strong> ‚Äì comparing 3D objects (generally poor;
avoid 3D charts)</li>
<li><strong>Color saturation / Density</strong> ‚Äì comparing shading
intensity (e.g., heatmap, choropleth)</li>
</ol>
<p>This hierarchy explains many best practices:</p>
<ul>
<li><strong>Bar charts beat pie charts</strong> because length (rank 3)
is judged far more accurately than angle (rank 4).</li>
<li><strong>Scatter plots are excellent</strong> because they encode
data as position on common scales (rank 1).</li>
<li><strong>3D charts are almost never appropriate</strong> because
volume (rank 6) is the second-least accurate encoding.</li>
</ul>
<div class="figure">
<img src="images/02/barbubbleheatmap.jpg" alt="The same data shown as a bar chart, bubble chart, and heatmap. Notice how precision decreases from left to right." width="80%" />
<p class="caption">
The same data shown as a bar chart, bubble chart, and heatmap. Notice
how precision decreases from left to right.
</p>
</div>
<div id="demonstrating-the-hierarchy-in-r" class="section level3">
<h3>Demonstrating the Hierarchy in R</h3>
<p>Let us compare a bar chart and a pie chart showing the same data ‚Äì
vehicle class distribution in the <code>mpg</code> dataset:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>class_counts <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">count</span>(class) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">fct_reorder</span>(class, n))</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>p_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(class_counts, <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;#002967&quot;</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">&quot;#333333&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bar Chart (length encoding)&quot;</span>,</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Easy to compare precise values&quot;</span>,</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">y =</span> <span class="fu">max</span>(class_counts<span class="sc">$</span>n) <span class="sc">*</span> <span class="fl">1.1</span>)</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>p_pie <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(class_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> n, <span class="at">fill =</span> class)) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set2&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pie Chart (angle encoding)&quot;</span>,</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Hard to compare similar slices&quot;</span>,</span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;Class&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>p_bar <span class="sc">+</span> p_pie</span></code></pre></div>
<p><img src="week02_files/figure-html/hierarchy-demo-1.png" alt="" width="960" /></p>
<p>Which chart makes it easier to compare the number of compact
vs.¬†midsize vehicles? The bar chart wins decisively because
<strong>length</strong> (rank 3) is far more accurately perceived than
<strong>angle</strong> (rank 4).</p>
</div>
</div>
<div id="color-theory-for-visualization" class="section level2">
<h2>Color Theory for Visualization</h2>
<p>Color is one of the most powerful and most misused tools in data
visualization. To use it effectively, we need to understand its three
components.</p>
<div class="figure">
<img src="images/02/munsellhsl.gif" alt="Color can be described by three properties: hue, saturation, and lightness." width="60%" />
<p class="caption">
Color can be described by three properties: hue, saturation, and
lightness.
</p>
</div>
<ul>
<li><strong>Hue</strong> ‚Äì what we colloquially call ‚Äúcolor‚Äù: red, blue,
green, orange, etc.</li>
<li><strong>Saturation</strong> (chroma) ‚Äì the intensity or purity of
the color, from vivid to muted grey</li>
<li><strong>Lightness</strong> (value) ‚Äì how light or dark the color is,
from white to black</li>
</ul>
<p>Different types of data call for different types of color
palettes:</p>
<p><strong>Sequential palettes:</strong> A single hue that varies in
lightness. Use for ordered, continuous data (e.g., temperature,
population density). Light = low values; dark = high values.</p>
<p><strong>Diverging palettes:</strong> Two contrasting hues with a
neutral midpoint. Use for data with a meaningful center (e.g.,
deviations from average, profit/loss).</p>
<p><strong>Qualitative palettes:</strong> Distinct hues at similar
saturation and lightness. Use for categorical data with no natural
ordering (e.g., country, department).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>))</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">display.brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;Blues&quot;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Sequential: Blues&quot;</span>, <span class="at">line =</span> <span class="dv">1</span>)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">display.brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;RdYlBu&quot;</span>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Diverging: RdYlBu&quot;</span>, <span class="at">line =</span> <span class="dv">1</span>)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">display.brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;Set2&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Qualitative: Set2&quot;</span>, <span class="at">line =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="week02_files/figure-html/color-palettes-1.png" alt="" width="960" /></p>
<div id="colorblindness-and-the-viridis-palette" class="section level3">
<h3>Colorblindness and the Viridis Palette</h3>
<p>Approximately <strong>8% of men and 0.5% of women</strong> have some
form of color vision deficiency, most commonly red-green colorblindness.
Any visualization that relies solely on the difference between red and
green will be unreadable for roughly 1 in 12 male viewers.</p>
<p>Practical recommendations:</p>
<ul>
<li>Use <strong>colorblind-friendly palettes</strong> such as viridis,
which varies in both hue and lightness</li>
<li><strong>Avoid red-green contrasts</strong> as the sole
distinguishing feature</li>
<li>Use <strong>redundant coding</strong> ‚Äì combine color with shape,
pattern, or direct labels</li>
<li>Test your plots with a colorblind simulator</li>
</ul>
<p>The <code>viridis</code> palettes are specifically designed to be
<strong>perceptually uniform</strong>,
<strong>colorblind-friendly</strong>, and <strong>readable in
greyscale</strong>. They are an excellent default choice.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">ggplot</span>(faithfuld, <span class="fu">aes</span>(waiting, eruptions, <span class="at">fill =</span> density)) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;magma&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Viridis &#39;magma&#39; palette&quot;</span>,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Perceptually uniform and colorblind-friendly&quot;</span>,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Waiting Time (min)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Eruption Duration (min)&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code></pre></div>
<p><img src="week02_files/figure-html/viridis-demo-1.png" alt="" width="768" /></p>
<div class="figure">
<img src="images/02/context.png" alt="Context effects: identical colors appear different depending on their surroundings. This is why consistent backgrounds matter in visualization." width="60%" />
<p class="caption">
Context effects: identical colors appear different depending on their
surroundings. This is why consistent backgrounds matter in
visualization.
</p>
</div>
<div class="callout-tip">
<p><strong>Rule of thumb for color:</strong> Use color purposefully. If
a color does not encode data or serve a grouping function, consider
whether it is adding unnecessary visual noise. Default to a muted
palette and reserve vivid colors for the elements you want to
emphasize.</p>
</div>
</div>
</div>
<div id="working-memory-and-direct-labeling" class="section level2">
<h2>Working Memory and Direct Labeling</h2>
<p>Our visual working memory is remarkably limited. Research shows we
can hold approximately <strong>3 to 4 items</strong> in visual working
memory at any given time. This has profound consequences for chart
design.</p>
<div class="figure">
<img src="images/02/memory.gif" alt="Visual working memory is limited to about 3-4 items. Exceeding this limit forces viewers to look back and forth between the legend and the chart." width="70%" />
<p class="caption">
Visual working memory is limited to about 3-4 items. Exceeding this
limit forces viewers to look back and forth between the legend and the
chart.
</p>
</div>
<p>If your chart has a legend with 8 categories mapped to 8 colors, the
viewer must constantly shuttle between the legend and the data. This is
slow, error-prone, and exhausting. Better approaches include:</p>
<ul>
<li><strong>Direct labeling</strong> ‚Äì place category labels directly
next to or on the data elements</li>
<li><strong>Limit categories</strong> ‚Äì show only the 3-4 most important
groups; collapse the rest into ‚ÄúOther‚Äù</li>
<li><strong>Use facets</strong> ‚Äì create small multiples so color does
not carry the full burden</li>
<li><strong>Highlight and grey out</strong> ‚Äì show all data in muted
grey and highlight only 1-2 categories of interest</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>econ_data <span class="ot">&lt;-</span> economics_long <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="fu">filter</span>(variable <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;pop&quot;</span>, <span class="st">&quot;unemploy&quot;</span>, <span class="st">&quot;uempmed&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="fu">group_by</span>(variable) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value_scaled =</span> (value <span class="sc">-</span> <span class="fu">min</span>(value)) <span class="sc">/</span> (<span class="fu">max</span>(value) <span class="sc">-</span> <span class="fu">min</span>(value))) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>label_data <span class="ot">&lt;-</span> econ_data <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>  <span class="fu">group_by</span>(variable) <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">==</span> <span class="fu">max</span>(date))</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="fu">ggplot</span>(econ_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value_scaled, <span class="at">color =</span> variable)) <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>    <span class="at">data =</span> label_data,</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> variable),</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="dv">300</span>, <span class="at">direction =</span> <span class="st">&quot;y&quot;</span>, <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>    <span class="at">segment.color =</span> <span class="st">&quot;grey70&quot;</span>, <span class="at">size =</span> <span class="dv">4</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;pop&quot;</span> <span class="ot">=</span> <span class="st">&quot;#002967&quot;</span>, <span class="st">&quot;unemploy&quot;</span> <span class="ot">=</span> <span class="st">&quot;#C41E3A&quot;</span>, <span class="st">&quot;uempmed&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B4975A&quot;</span>)) <span class="sc">+</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Direct Labeling Reduces Cognitive Load&quot;</span>,</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Labels on the lines eliminate the need to look up a legend&quot;</span>,</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Scaled Value (0-1)&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">&quot;off&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">5</span>, <span class="dv">40</span>, <span class="dv">5</span>, <span class="dv">5</span>))</span></code></pre></div>
<p><img src="week02_files/figure-html/direct-label-demo-1.png" alt="" width="864" /></p>
<p>By placing labels directly on the lines, the viewer never needs to
consult a legend. This is faster, less effortful, and reduces the
demands on visual working memory.</p>
<hr />
</div>
<div id="part-2-design-principles-and-the-history-of-great-charts"
class="section level2">
<h2>Part 2: Design Principles and the History of Great Charts</h2>
<p>Now that we understand how the brain processes visual information,
let us turn to the design principles that great visualization
practitioners have developed over the past two centuries. These
principles translate perceptual science into practical guidelines.</p>
</div>
<div id="landmarks-in-visualization-history" class="section level2">
<h2>Landmarks in Visualization History</h2>
<p>The craft of data visualization has deep roots. Three landmark
examples illustrate why design principles matter ‚Äì and why some of the
best advice is over two centuries old.</p>
<p><strong>William Playfair (1786)</strong> invented the bar chart, line
chart, and pie chart in his book <em>The Commercial and Political
Atlas</em>. At a time when tables of numbers were the norm, Playfair‚Äôs
insight was radical: a well-drawn picture could convey trends and
comparisons far more quickly than rows of figures. Even by modern
standards, his charts are readable and elegant.</p>
<div class="figure">
<img src="images/03/playfairbartimeseries.png" alt="William Playfair's time series and bar chart from The Commercial and Political Atlas (1786) -- the earliest known examples of these chart forms." width="80%" />
<p class="caption">
William Playfair‚Äôs time series and bar chart from The Commercial and
Political Atlas (1786) ‚Äì the earliest known examples of these chart
forms.
</p>
</div>
<p><strong>John Snow (1854)</strong> challenged the prevailing ‚Äúbad air‚Äù
theory of cholera by plotting deaths on a map of London‚Äôs Soho district.
The resulting visualization ‚Äì one of the most famous in the history of
science ‚Äì revealed a striking cluster of deaths around the Broad Street
water pump, pointing to contaminated water as the source. The pump
handle was removed, and the outbreak subsided. This is visualization as
a tool for saving lives.</p>
<div class="figure">
<img src="images/03/snow-cholera.gif" alt="John Snow's cholera map of the Soho district, London (1854). Each small bar represents a death. The cluster around the Broad Street pump is unmistakable." width="70%" />
<p class="caption">
John Snow‚Äôs cholera map of the Soho district, London (1854). Each small
bar represents a death. The cluster around the Broad Street pump is
unmistakable.
</p>
</div>
<p><strong>Charles Joseph Minard (1869)</strong> created what Edward
Tufte called ‚Äúthe best statistical graphic ever drawn.‚Äù His depiction of
Napoleon‚Äôs 1812 Russian campaign encodes six variables in a single
image: the size of the army, its location (latitude and longitude),
direction of movement, temperature during the retreat, and dates of key
events. The shrinking band tells the story of catastrophic loss more
powerfully than any table of casualty figures could.</p>
<div class="figure">
<img src="images/03/Minardfrench.png" alt="Minard's map of Napoleon's march to and from Moscow (1869). The width of the band represents army size -- from 422,000 soldiers at the start to a mere 10,000 returning." width="100%" />
<p class="caption">
Minard‚Äôs map of Napoleon‚Äôs march to and from Moscow (1869). The width of
the band represents army size ‚Äì from 422,000 soldiers at the start to a
mere 10,000 returning.
</p>
</div>
<p>The thread connecting Playfair, Snow, and Minard to modern
practitioners is a commitment to <strong>honesty, clarity, and
efficiency</strong> in visual communication. These are the design
principles we now turn to.</p>
</div>
<div id="tuftes-data-ink-ratio" class="section level2">
<h2>Tufte‚Äôs Data-Ink Ratio</h2>
<p>Edward Tufte is arguably the most influential thinker in data
visualization design. His core concept is the <strong>data-ink
ratio</strong>:</p>
<p><span class="math display">\[\text{Data-ink ratio} =
\frac{\text{Data-ink}}{\text{Total ink used in the
graphic}}\]</span></p>
<p>The principle is simple: <strong>maximize the share of ink (or
pixels) devoted to displaying actual data</strong>. Everything else ‚Äì
unnecessary gridlines, heavy borders, decorative shading, redundant
labels, 3D effects ‚Äì is ‚Äúnon-data-ink‚Äù that should be eliminated or
minimized. Tufte calls excessive non-data-ink
<strong>chartjunk</strong>.</p>
<p>This does not mean charts should be ugly or austere. It means every
visual element should earn its place by communicating something useful.
If an element can be removed without losing information, it probably
should be.</p>
<div id="data-ink-demo-setting-up-the-data" class="section level3">
<h3>Data-Ink Demo: Setting Up the Data</h3>
<p>Let us see this in practice step by step. First we create a simple
dataset:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>df_budget <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">c</span>(<span class="st">&quot;Product A&quot;</span>, <span class="st">&quot;Product B&quot;</span>, <span class="st">&quot;Product C&quot;</span>, <span class="st">&quot;Product D&quot;</span>, <span class="st">&quot;Product E&quot;</span>),</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">72</span>, <span class="dv">38</span>, <span class="dv">61</span>, <span class="dv">53</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="data-ink-demo-the-cluttered-version" class="section level3">
<h3>Data-Ink Demo: The Cluttered Version</h3>
<p>Now we create a bar chart heavy with chartjunk ‚Äì unnecessary
gridlines, a filled background, and no direct labels:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>p_cluttered <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_budget, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#002967&quot;</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">theme_gray</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(),</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>()) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Before: Low data-ink ratio&quot;</span>,</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Category&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Value&quot;</span>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>p_cluttered</span></code></pre></div>
<p><img src="week02_files/figure-html/data-ink-before-1.png" alt="" width="480" /></p>
</div>
<div id="data-ink-demo-the-clean-version" class="section level3">
<h3>Data-Ink Demo: The Clean Version</h3>
<p>Now we strip away the chartjunk and add direct labels. Compare the
two:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>p_clean <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_budget, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#002967&quot;</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> value), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;After: High data-ink ratio&quot;</span>)</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>p_cluttered <span class="sc">+</span> p_clean</span></code></pre></div>
<p><img src="week02_files/figure-html/data-ink-after-1.png" alt="" width="960" /></p>
<p>The ‚Äúafter‚Äù version communicates the same data more effectively. The
gridlines are gone because the direct labels make them unnecessary. The
axis title is removed because the category labels are self-explanatory.
Every remaining element serves a purpose.</p>
<div class="callout-tip">
<p><strong>Practical rule of thumb:</strong> After creating a chart, ask
yourself: ‚ÄúCan I remove this element without losing information?‚Äù If the
answer is yes, remove it. Repeat until the answer is no for every
remaining element.</p>
</div>
</div>
</div>
<div id="the-lie-factor" class="section level2">
<h2>The Lie Factor</h2>
<p>The <strong>lie factor</strong> measures the degree to which a
graphic distorts the underlying data:</p>
<p><span class="math display">\[\text{Lie factor} = \frac{\text{Size of
effect shown in the graphic}}{\text{Size of effect in the
data}}\]</span></p>
<p>A lie factor of 1.0 means the graphic faithfully represents the data.
Tufte argues that lie factors above 1.05 or below 0.95 represent
significant distortions.</p>
<div id="distorted-proportions" class="section level3">
<h3>Distorted Proportions</h3>
<p>When graphical representations of quantities use area or volume
rather than length, distortion often follows:</p>
<div class="figure">
<img src="images/03/lieshrinkingdoctor.png" alt="The 'shrinking doctor' -- the figure shrinks faster than the underlying data warrants, dramatically exaggerating the decline." width="60%" />
<p class="caption">
The ‚Äòshrinking doctor‚Äô ‚Äì the figure shrinks faster than the underlying
data warrants, dramatically exaggerating the decline.
</p>
</div>
<div class="figure">
<img src="images/03/lieshrinkingdollar.png" alt="The 'shrinking dollar' -- the visual shrinkage far exceeds the actual decline in purchasing power, producing a lie factor well above 1." width="60%" />
<p class="caption">
The ‚Äòshrinking dollar‚Äô ‚Äì the visual shrinkage far exceeds the actual
decline in purchasing power, producing a lie factor well above 1.
</p>
</div>
</div>
<div id="truncated-axes" class="section level3">
<h3>Truncated Axes</h3>
<p>One of the most common forms of deception is truncating the y-axis of
a bar chart. Because bars encode quantity through their
<strong>length</strong> (from zero to the data value), starting the axis
at a non-zero value can make small differences appear enormous.</p>
<p>Let us see this with R code. First, the data:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>df_sales <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="at">quarter =</span> <span class="fu">c</span>(<span class="st">&quot;Q1&quot;</span>, <span class="st">&quot;Q2&quot;</span>, <span class="st">&quot;Q3&quot;</span>, <span class="st">&quot;Q4&quot;</span>),</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">revenue =</span> <span class="fu">c</span>(<span class="dv">98</span>, <span class="dv">101</span>, <span class="dv">103</span>, <span class="dv">105</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>)</span></code></pre></div>
<p>Now the side-by-side comparison:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>p_misleading <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_sales, <span class="fu">aes</span>(<span class="at">x =</span> quarter, <span class="at">y =</span> revenue)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;#C41E3A&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">96</span>, <span class="dv">106</span>)) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Misleading: Truncated axis&quot;</span>,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Looks like revenue tripled!&quot;</span>,</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Revenue ($M)&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>p_honest <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_sales, <span class="fu">aes</span>(<span class="at">x =</span> quarter, <span class="at">y =</span> revenue)) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;#002967&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">110</span>)) <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Honest: Full axis&quot;</span>,</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Revenue grew modestly (~7%)&quot;</span>,</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Revenue ($M)&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>p_misleading <span class="sc">+</span> p_honest</span></code></pre></div>
<p><img src="week02_files/figure-html/truncated-axis-demo-1.png" alt="" width="960" /></p>
<p>The left panel makes it look like revenue tripled from Q1 to Q4. The
right panel reveals the truth: revenue grew by about 7%. Same data,
radically different impressions.</p>
<div class="callout-warning">
<p><strong>Important nuance:</strong> Truncated axes are not
<em>always</em> deceptive. For line charts showing change over time, a
non-zero baseline can be appropriate because the visual encoding is
position/slope, not length. The rule is: <strong>bar charts must start
at zero; line charts can sometimes justify a non-zero baseline</strong>
‚Äì but always label your axes clearly.</p>
</div>
<div class="figure">
<img src="images/03/liefactorhighway.png" alt="Lie factor in a highway fuel standards graphic. The visual impression exaggerates the actual data change." width="60%" />
<p class="caption">
Lie factor in a highway fuel standards graphic. The visual impression
exaggerates the actual data change.
</p>
</div>
</div>
</div>
<div id="slopegraphs" class="section level2">
<h2>Slopegraphs</h2>
<p>A <strong>slopegraph</strong> is a chart designed to show change
between two (or occasionally more) time points for multiple categories.
It consists of two vertical axes connected by lines, where the slope and
direction of each line immediately convey whether a category increased,
decreased, or remained stable.</p>
<div class="figure">
<img src="images/03/slopegraph.png" alt="A slopegraph showing change across two time periods. The slope of each line immediately communicates the direction and magnitude of change." width="60%" />
<p class="caption">
A slopegraph showing change across two time periods. The slope of each
line immediately communicates the direction and magnitude of change.
</p>
</div>
<p>Slopegraphs are a beautifully minimalist design. They use direct
labeling (no legend needed), and the visual encoding ‚Äì slope ‚Äì is one of
the most intuitive for the human eye. They are especially effective
for:</p>
<ul>
<li>Comparing rankings across two time points</li>
<li>Showing which categories improved and which declined</li>
<li>Highlighting the magnitude of change through the steepness of the
line</li>
</ul>
</div>
<div id="designing-for-clarity" class="section level2">
<h2>Designing for Clarity</h2>
<p>Beyond Tufte‚Äôs specific principles, several broader guidelines help
produce clear, effective visualizations:</p>
<p><strong>Label directly.</strong> Whenever possible, label data
elements directly on the chart rather than relying on a separate legend.
Legends force the viewer to look back and forth between the plot and the
key, increasing cognitive load.</p>
<p><strong>Use color purposefully.</strong> Color should encode meaning,
not serve as decoration. Reserve color for distinguishing groups,
highlighting a key finding, or encoding a variable. Avoid ‚Äúrainbow‚Äù
color schemes that have no natural ordering.</p>
<p><strong>Order data meaningfully.</strong> Default alphabetical
ordering is rarely the best choice. Order bars by value. Order time
series chronologically. <strong>The order of data in a chart is a design
decision</strong>, and it should serve the viewer‚Äôs understanding.</p>
<p><strong>Reduce cognitive load.</strong> Every unnecessary element
adds to the viewer‚Äôs cognitive burden. Gridlines, borders, background
shading, tick marks, redundant axis labels ‚Äì each demands a small amount
of attention. Individually they are trivial, but collectively they can
obscure the data.</p>
<div class="figure">
<img src="images/03/gelmanvouchermap.png" alt="Andrew Gelman's redesigned voucher map -- a clear example of thoughtful design choices serving the data." width="70%" />
<p class="caption">
Andrew Gelman‚Äôs redesigned voucher map ‚Äì a clear example of thoughtful
design choices serving the data.
</p>
</div>
<hr />
<div class="callout-ignatian">
<p><strong>Ignatian Reflection: Seeing Clearly and Designing
Honestly</strong></p>
<p>The Ignatian tradition places great emphasis on
<strong>discernment</strong> ‚Äì the practice of perceiving reality as it
truly is, free from distortion and self-deception. This week‚Äôs material
reveals how easily our perception can be manipulated. A 3D pie chart
exploits our poor ability to judge volume. A rainbow color scale
obscures the true magnitude of differences. A truncated axis exaggerates
a modest change into a dramatic one.</p>
<p>At Gonzaga, we are guided by the Ignatian principle of <em>magis</em>
‚Äì the relentless pursuit of the greater good, of doing things not just
adequately but with excellence and integrity. In data visualization,
magis means stripping away the unnecessary so that truth can emerge
clearly. It means choosing honest scales, faithful representations, and
designs that serve the viewer rather than the designer‚Äôs agenda.</p>
<p>The principle of <strong>Cura Personalis</strong> (care for the whole
person) calls us to consider our audience‚Äôs needs: Can a colorblind
viewer read this chart? Does this encoding accurately represent the
underlying data? Am I making the truth easier to see, or harder?</p>
<p>A lie factor greater than 1 is, in a very real sense, a lie told with
data. As you develop your visualization skills, commit to a simple
standard: <strong>let the data speak truthfully, and design your charts
to amplify that truth, not distort it.</strong></p>
</div>
<hr />
</div>
<div id="summary-a-perception-and-design-checklist"
class="section level2">
<h2>Summary: A Perception and Design Checklist</h2>
<p>When designing or evaluating a visualization, run through this
checklist:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Principle</th>
<th>Question to Ask</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Preattentive attributes</strong></td>
<td>Does the most important information pop out immediately?</td>
</tr>
<tr class="even">
<td><strong>Gestalt grouping</strong></td>
<td>Are visual groups aligned with data groups?</td>
</tr>
<tr class="odd">
<td><strong>Cleveland &amp; McGill</strong></td>
<td>Am I using the most accurate encoding for the key comparison?</td>
</tr>
<tr class="even">
<td><strong>Color palette</strong></td>
<td>Is my palette appropriate for the data type (sequential, diverging,
qualitative)?</td>
</tr>
<tr class="odd">
<td><strong>Colorblindness</strong></td>
<td>Would a colorblind viewer get the same message?</td>
</tr>
<tr class="even">
<td><strong>Working memory</strong></td>
<td>Can the viewer understand the chart without constantly consulting a
legend?</td>
</tr>
<tr class="odd">
<td><strong>Data-ink ratio</strong></td>
<td>Can I remove any element without losing information?</td>
</tr>
<tr class="even">
<td><strong>Lie factor</strong></td>
<td>Does the visual impression match the magnitude of the data?</td>
</tr>
<tr class="odd">
<td><strong>Axis integrity</strong></td>
<td>Do bar charts start at zero? Are scales labeled clearly?</td>
</tr>
</tbody>
</table>
<hr />
</div>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<div class="exercise-block">
<div class="exercise-header">
<p>Week 2 Exercises</p>
</div>
<div class="exercise-body">
<p><strong>Exercise 1: Preattentive Attributes and the Perceptual
Hierarchy</strong></p>
<p>Using the <code>diamonds</code> dataset, create two charts of the
distribution of diamond <code>cut</code> quality ‚Äì a bar chart and a pie
chart. Fill in the blanks in the code below, then write 2-3 sentences
comparing which chart makes it easier to compare categories and why,
referencing Cleveland &amp; McGill‚Äôs hierarchy.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>cut_counts <span class="ot">&lt;-</span> diamonds <span class="sc">%&gt;%</span> <span class="fu">count</span>(cut)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co"># Bar chart -- fill in the missing aesthetic and geom</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>p_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cut_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(cut, n), <span class="at">y =</span> ___)) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;#002967&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bar Chart: Diamond Cut Quality&quot;</span>,</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co"># Pie chart -- fill in the missing coord function</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>p_pie <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cut_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> n, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>  <span class="fu">___</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set2&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Pie Chart: Diamond Cut Quality&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Cut&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>p_bar <span class="sc">+</span> p_pie</span></code></pre></div>
<p><strong>Exercise 2: Colorblind-Friendly Redesign</strong></p>
<p>The plot below uses a red-green color scheme that is not accessible
to colorblind viewers. Fill in the blanks to redesign it using the
viridis palette and redundant shape coding.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="co"># Original: NOT colorblind-friendly</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;4&quot;</span> <span class="ot">=</span> <span class="st">&quot;red&quot;</span>, <span class="st">&quot;f&quot;</span> <span class="ot">=</span> <span class="st">&quot;green&quot;</span>, <span class="st">&quot;r&quot;</span> <span class="ot">=</span> <span class="st">&quot;blue&quot;</span>)) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Original: Poor color choice&quot;</span>,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Engine Displacement (L)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Highway MPG&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Drive&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co"># Redesign: fill in the blanks for colorblind-friendly version</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> drv, <span class="at">shape =</span> ___)) <span class="sc">+</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;___&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Redesign: Colorblind-Friendly with Redundant Coding&quot;</span>,</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Engine Displacement (L)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Highway MPG&quot;</span>,</span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Drive&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;Drive&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p>After creating your redesign, test it using the <a
href="https://www.color-blindness.com/coblis-color-blindness-simulator/">Coblis
colorblind simulator</a> by uploading a screenshot of your plot. Write
1-2 sentences about what you observe.</p>
<p><strong>Exercise 3: Data-Ink Ratio Makeover</strong></p>
<p>The following code produces a chart overloaded with chartjunk. Fill
in the blanks in the redesigned version to maximize the data-ink ratio
while keeping the chart readable.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>df_dept <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  <span class="at">department =</span> <span class="fu">c</span>(<span class="st">&quot;Marketing&quot;</span>, <span class="st">&quot;Engineering&quot;</span>, <span class="st">&quot;Sales&quot;</span>, <span class="st">&quot;HR&quot;</span>, <span class="st">&quot;Finance&quot;</span>),</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  <span class="at">budget =</span> <span class="fu">c</span>(<span class="dv">320</span>, <span class="dv">580</span>, <span class="dv">410</span>, <span class="dv">190</span>, <span class="dv">275</span>)</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>)</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co"># Original: full of chartjunk</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>p_junk <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_dept, <span class="fu">aes</span>(<span class="at">x =</span> department, <span class="at">y =</span> budget, <span class="at">fill =</span> department)) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>  <span class="fu">theme_dark</span>() <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>),</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;right&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Before: Department Budgets&quot;</span>,</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Department&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Budget (thousands $)&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Department&quot;</span>)</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="co"># Redesign: fill in the blanks to clean it up</span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>p_tufte <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_dept, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(department, budget), <span class="at">y =</span> budget)) <span class="sc">+</span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;___&quot;</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> budget), <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.___ =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">___</span>()) <span class="sc">+</span></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;After: Department Budgets&quot;</span>)</span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a>p_junk <span class="sc">+</span> p_tufte</span></code></pre></div>
<p>Write a brief paragraph explaining what you changed and why each
change improves the data-ink ratio.</p>
<p><strong>Exercise 4: Deceptive Graph Analysis</strong></p>
<p>Find a deceptive or misleading graph published in a real-world source
(news article, social media, corporate report, or political campaign
material). Include the image or a link in your R Markdown document. Then
answer the following:</p>
<ul>
<li>What is the chart trying to communicate?</li>
<li>What deceptive technique(s) does it use? (truncated axis, area
distortion, cherry-picked timeframe, etc.)</li>
<li>Estimate the lie factor if applicable. Show your calculation.</li>
<li>Sketch or code in R how you would redesign the chart to be
honest.</li>
</ul>
<p>A good place to find examples is the <a href="https://viz.wtf/">WTF
Visualizations</a> archive.</p>
<p><strong>Exercise 5: Reading Assignment</strong></p>
<p>Read the following and write three key takeaways from each in your R
Markdown document:</p>
<ul>
<li>Wilke, C.O. ‚Äì <em>Fundamentals of Data Visualization</em>, Chapters
1-2</li>
<li>Healy, K. ‚Äì <em>Data Visualization: A Practical Introduction</em>,
Chapter 1</li>
</ul>
<p>Focus on: What principles from this week do the authors emphasize?
Where do they offer different perspectives? How do Tufte‚Äôs ideas about
data-ink relate to what Wilke and Healy recommend?</p>
</div>
</div>
<hr />
</div>
<div id="attributions" class="section level2">
<h2>Attributions</h2>
<div class="callout-info">
<p>This course material draws on and is inspired by the work of many
scholars and practitioners:</p>
<ul>
<li><strong>Vivek H. Patil</strong> ‚Äì foundational course design and
materials for data visualization at Gonzaga University</li>
<li><strong>Cleveland, W.S. &amp; McGill, R.</strong> (1984). ‚ÄúGraphical
Perception: Theory, Experimentation, and Application to the Development
of Graphical Methods.‚Äù <em>Journal of the American Statistical
Association</em>, 79(387), 531‚Äì554.</li>
<li><strong>Tufte, E.R.</strong> ‚Äì <em>The Visual Display of
Quantitative Information</em> (Graphics Press, 1983, 2001)</li>
<li><strong>Playfair, W.</strong> ‚Äì <em>The Commercial and Political
Atlas</em> (1786)</li>
<li><strong>Snow, J.</strong> ‚Äì <em>On the Mode of Communication of
Cholera</em> (1855)</li>
<li><strong>Minard, C.J.</strong> ‚Äì <em>Carte figurative des pertes
successives en hommes de l‚ÄôArmee Francaise dans la campagne de Russie
1812-1813</em> (1869)</li>
<li><strong>Ware, C.</strong> ‚Äì <em>Information Visualization:
Perception for Design</em> (Morgan Kaufmann)</li>
<li><strong>Few, S.</strong> ‚Äì Perceptual Edge research and publications
on dashboard and visualization design</li>
<li><strong>Cairo, A.</strong> ‚Äì <em>The Truthful Art</em> and <em>The
Functional Art</em></li>
<li><strong>Wilke, C.O.</strong> ‚Äì <em>Fundamentals of Data
Visualization</em> (O‚ÄôReilly, 2019)</li>
<li><strong>Healy, K.</strong> ‚Äì <em>Data Visualization: A Practical
Introduction</em> (Princeton University Press, 2018)</li>
</ul>
</div>
<div class="page-nav">
<p><a href="week01.html">‚Üê Week 1: Introduction</a>
<a href="week03.html">Week 3 ‚Üí</a></p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIldlZWsgMjogVmlzdWFsIFBlcmNlcHRpb24gJiBEZXNpZ24gUHJpbmNpcGxlcyINCm91dHB1dDoNCiAgaHRtbF9kb2N1bWVudDoNCiAgICB0b2M6IHRydWUNCiAgICB0b2NfZmxvYXQ6IHRydWUNCi0tLQ0KDQo8ZGl2IGNsYXNzPSJoZXJvLWJhbm5lciI+DQo8ZGl2IGNsYXNzPSJ3ZWVrLWJhZGdlIj4yPC9kaXY+DQo8aDE+VmlzdWFsIFBlcmNlcHRpb24gJiBEZXNpZ24gUHJpbmNpcGxlczwvaDE+DQo8cD5Ib3cgdGhlIGJyYWluIHByb2Nlc3NlcyB2aXN1YWwgaW5mb3JtYXRpb24gYW5kIGhvdyBncmVhdCBkZXNpZ25lcnMgaGF2ZSB0dXJuZWQgdGhhdCBrbm93bGVkZ2UgaW50byBsYXN0aW5nIHByaW5jaXBsZXM8L3A+DQo8L2Rpdj4NCg0KOjo6IHsub2JqZWN0aXZlc30NCiMjIExlYXJuaW5nIE9iamVjdGl2ZXMNCg0KQnkgdGhlIGVuZCBvZiB0aGlzIHdlZWssIHlvdSB3aWxsIGJlIGFibGUgdG86DQoNCi0gRXhwbGFpbiB0aGUgdHdvIHN0YWdlcyBvZiB2aXN1YWwgcHJvY2Vzc2luZyAocHJlYXR0ZW50aXZlIGFuZCBhdHRlbnRpdmUpIGFuZCB0aGVpciBkZXNpZ24gaW1wbGljYXRpb25zDQotIElkZW50aWZ5IGFuZCBsZXZlcmFnZSBwcmVhdHRlbnRpdmUgYXR0cmlidXRlcyBpbiB2aXN1YWxpemF0aW9uIGRlc2lnbg0KLSBBcHBseSBHZXN0YWx0IHByaW5jaXBsZXMgb2YgcGVyY2VwdGlvbiB0byBvcmdhbml6ZSB2aXN1YWwgZWxlbWVudHMNCi0gVXNlIENsZXZlbGFuZCAmIE1jR2lsbCdzIHBlcmNlcHR1YWwgaGllcmFyY2h5IHRvIGNob29zZSBhcHByb3ByaWF0ZSBjaGFydCB0eXBlcw0KLSBTZWxlY3QgZWZmZWN0aXZlIGNvbG9yIHBhbGV0dGVzIGZvciBzZXF1ZW50aWFsLCBkaXZlcmdpbmcsIGFuZCBxdWFsaXRhdGl2ZSBkYXRhDQotIERlc2lnbiB2aXN1YWxpemF0aW9ucyB0aGF0IGFjY291bnQgZm9yIGNvbG9yYmxpbmRuZXNzIGFuZCB3b3JraW5nIG1lbW9yeSBsaW1pdHMNCi0gRXhwbGFpbiBhbmQgYXBwbHkgVHVmdGUncyBkYXRhLWluayByYXRpbyBhbmQgbGllIGZhY3RvciBjb25jZXB0cw0KLSBJZGVudGlmeSBjb21tb24gZGVjZXB0aXZlIHByYWN0aWNlcyBpbiBkYXRhIHZpc3VhbGl6YXRpb24gYW5kIGV4cGxhaW4gd2h5IHRoZXkgbWlzbGVhZA0KLSBSZWRlc2lnbiBhIGNsdXR0ZXJlZCBjaGFydCB0byBtYXhpbWl6ZSB0aGUgZGF0YS1pbmsgcmF0aW8gdXNpbmcgZ2dwbG90Mg0KOjo6DQoNCjo6OiB7LmNhbGxvdXQtZXJyb3J9DQojIyBDb21tb24gRXJyb3JzIFlvdSBNYXkgRW5jb3VudGVyDQoNCioqIkVycm9yOiBjb3VsZCBub3QgZmluZCBmdW5jdGlvbiAnZGlzcGxheS5icmV3ZXIucGFsJyIqKg0KVGhpcyBtZWFucyB0aGUgUkNvbG9yQnJld2VyIHBhY2thZ2UgaXMgbm90IGxvYWRlZC4gQWRkIGBsaWJyYXJ5KFJDb2xvckJyZXdlcilgIGF0IHRoZSB0b3Agb2YgeW91ciBzY3JpcHQgb3IgY2h1bmsuDQoNCioqIkVycm9yIGluIGxpYnJhcnkocGF0Y2h3b3JrKSA6IHRoZXJlIGlzIG5vIHBhY2thZ2UgY2FsbGVkICdwYXRjaHdvcmsnIioqDQpZb3UgbmVlZCB0byBpbnN0YWxsIHRoZSBwYWNrYWdlIGZpcnN0LiBSdW4gYGluc3RhbGwucGFja2FnZXMoInBhdGNod29yayIpYCBpbiB0aGUgY29uc29sZSAobm90IGluc2lkZSBhIGNvZGUgY2h1bmspLCB0aGVuIHRyeSBgbGlicmFyeShwYXRjaHdvcmspYCBhZ2Fpbi4NCg0KKipQbG90cyBsb29rIHNxdWlzaGVkIG9yIG92ZXJsYXBwaW5nKioNClRyeSBhZGp1c3RpbmcgYGZpZy53aWR0aGAgYW5kIGBmaWcuaGVpZ2h0YCBpbiB5b3VyIGNodW5rIG9wdGlvbnMuIEZvciBzaWRlLWJ5LXNpZGUgcGxvdHMgdXNpbmcgcGF0Y2h3b3JrLCBgZmlnLndpZHRoPTEwLCBmaWcuaGVpZ2h0PTVgIGlzIGEgZ29vZCBzdGFydGluZyBwb2ludC4gRXhhbXBsZTogYGBgYCBgYGB7ciBteS1wbG90LCBmaWcud2lkdGg9MTAsIGZpZy5oZWlnaHQ9NX0gYGBgYA0KDQoqKkNvbG9ycyBsb29rIHdyb25nIG9yIHByb2R1Y2UgYW4gZXJyb3IqKg0KTWFrZSBzdXJlIHlvdSBhcmUgdXNpbmcgcXVvdGVzIGFyb3VuZCBoZXggY29sb3IgY29kZXM6IGAiIzAwMjk2NyJgIG5vdCBgIzAwMjk2N2AuIFdpdGhvdXQgcXVvdGVzLCBSIGludGVycHJldHMgdGhlIGAjYCBhcyBhIGNvbW1lbnQgYW5kIGlnbm9yZXMgdGhlIHJlc3QuDQo6OjoNCg0KLS0tDQoNCiMjIFBhcnQgMTogSG93IHRoZSBCcmFpbiBTZWVzIERhdGENCg0KT2YgYWxsIG91ciBzZW5zZXMsICoqdmlzaW9uIGhhcyBieSBmYXIgdGhlIGhpZ2hlc3QgYmFuZHdpZHRoKiouIFdlIHRha2UgaW4gbW9yZSBpbmZvcm1hdGlvbiB0aHJvdWdoIG91ciBleWVzIHRoYW4gdGhyb3VnaCBoZWFyaW5nLCB0b3VjaCwgdGFzdGUsIGFuZCBzbWVsbCBjb21iaW5lZC4gVGhpcyBpcyB3aHkgdmlzdWFsaXphdGlvbiBpcyBzdWNoIGEgcG93ZXJmdWwgdG9vbCBmb3IgdW5kZXJzdGFuZGluZyBkYXRhIC0tIGl0IGxldmVyYWdlcyB0aGUgc2Vuc2Ugd2UgYXJlIGJlc3QgZXF1aXBwZWQgdG8gdXNlLg0KDQpgYGB7ciBzZW5zb3J5LWJhbmR3aWR0aCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iVmlzaW9uIGRvbWluYXRlcyBvdXIgc2Vuc29yeSBiYW5kd2lkdGgsIG1ha2luZyBpdCB0aGUgbW9zdCBlZmZlY3RpdmUgY2hhbm5lbCBmb3IgY29tbXVuaWNhdGluZyBjb21wbGV4IGRhdGEuIiwgb3V0LndpZHRoPSI3MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMi9zZW5zb3J5X2JhbmR3aWR0aHMuanBnIikNCmBgYA0KDQpCdXQgdmlzaW9uIGlzIG5vdCBhIHNpbXBsZSBjYW1lcmEuIFRoZSBicmFpbiBwcm9jZXNzZXMgdmlzdWFsIGluZm9ybWF0aW9uIGluICoqdHdvIGRpc3RpbmN0IHN0YWdlcyoqOg0KDQoxLiAqKlByZWF0dGVudGl2ZSBwcm9jZXNzaW5nKiogLS0gZmFzdCwgcGFyYWxsZWwsIGFuZCBhdXRvbWF0aWMuIFRoaXMgaGFwcGVucyBpbiB1bmRlciAyNTAgbWlsbGlzZWNvbmRzLCBiZWZvcmUgeW91IGFyZSBjb25zY2lvdXNseSBhd2FyZSBvZiBpdC4gWW91ciB2aXN1YWwgc3lzdGVtIGRldGVjdHMgY2VydGFpbiBmZWF0dXJlcyAoY29sb3IsIHNpemUsIG9yaWVudGF0aW9uLCBtb3Rpb24pIGFjcm9zcyB0aGUgZW50aXJlIHZpc3VhbCBmaWVsZCBzaW11bHRhbmVvdXNseS4NCjIuICoqQXR0ZW50aXZlIHByb2Nlc3NpbmcqKiAtLSBzbG93LCBzZXJpYWwsIGFuZCBlZmZvcnRmdWwuIFRoaXMgaXMgdGhlIGRlbGliZXJhdGUsIGNvbnNjaW91cyBleGFtaW5hdGlvbiBvZiBpbmRpdmlkdWFsIGVsZW1lbnRzIG9uZSBhdCBhIHRpbWUuIEl0IHJlcXVpcmVzIGZvY3VzZWQgYXR0ZW50aW9uIGFuZCBjb2duaXRpdmUgZWZmb3J0Lg0KDQpUaGUgZGlzdGluY3Rpb24gbWF0dGVycyBlbm9ybW91c2x5IGZvciB2aXN1YWxpemF0aW9uIGRlc2lnbi4gSWYgeW91IGVuY29kZSBpbXBvcnRhbnQgaW5mb3JtYXRpb24gdXNpbmcgcHJlYXR0ZW50aXZlIGF0dHJpYnV0ZXMsIHlvdXIgdmlld2VyIHdpbGwgZ3Jhc3AgaXQgaW5zdGFudGx5LiBJZiB5b3UgcmVxdWlyZSBhdHRlbnRpdmUgcHJvY2Vzc2luZyBmb3IgdGhlIGtleSBtZXNzYWdlLCB5b3VyIHZpZXdlciBtdXN0IHdvcmsgaGFyZCAtLSBhbmQgbWF5IG1pc3MgaXQgZW50aXJlbHkuDQoNCmBgYHtyIHByZWF0dGVudGl2ZS1leGFtcGxlLCBlY2hvPUZBTFNFLCBmaWcuY2FwPSJQcmVhdHRlbnRpdmUgcHJvY2Vzc2luZyBhbGxvd3MgdXMgdG8gZGV0ZWN0IGNlcnRhaW4gdmlzdWFsIGZlYXR1cmVzIGluc3RhbnRseSwgd2l0aG91dCBjb25zY2lvdXMgZWZmb3J0LiIsIG91dC53aWR0aD0iNzAlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDIvcHJlYXR0ZW50aXZlLnBuZyIpDQpgYGANCg0KSGVyZSBpcyBhIGNsYXNzaWMgZGVtb25zdHJhdGlvbi4gSW4gdGhlIGZpcnN0IGltYWdlIGJlbG93LCB0aGUgbnVtYmVyIDUgaXMgaGlkZGVuIGFtb25nIG90aGVyIGRpZ2l0cyBpbiB1bmlmb3JtIGdyZXkuIEluIHRoZSBzZWNvbmQsIHRoZSA1cyBhcmUgaGlnaGxpZ2h0ZWQgaW4gYSBjb250cmFzdGluZyBjb2xvci4gTm90aWNlIGhvdyBlZmZvcnRsZXNzbHkgeW91IGRldGVjdCB0aGVtIG9uY2UgY29sb3IgcHJvdmlkZXMgYSBwcmVhdHRlbnRpdmUgY3VlLg0KDQpgYGB7ciBudW01LWdyZXksIGVjaG89RkFMU0UsIGZpZy5jYXA9IldpdGhvdXQgYSBwcmVhdHRlbnRpdmUgY3VlLCBmaW5kaW5nIHRoZSA1cyByZXF1aXJlcyBzbG93LCBzZXJpYWwgc2VhcmNoLiIsIG91dC53aWR0aD0iNDUlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDIvbnVtNWdyZXkuanBnIikNCmBgYA0KDQpgYGB7ciBudW01LWhpZ2hsaWdodCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iV2l0aCBjb2xvciBhcyBhIHByZWF0dGVudGl2ZSBjdWUsIHRoZSA1cyBwb3Agb3V0IGltbWVkaWF0ZWx5LiIsIG91dC53aWR0aD0iNDUlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDIvbnVtNWdyZXlibGFjay5qcGciKQ0KYGBgDQoNCiMjIFByZWF0dGVudGl2ZSBBdHRyaWJ1dGVzDQoNClJlc2VhcmNoZXJzIGhhdmUgaWRlbnRpZmllZCBhIHNldCBvZiB2aXN1YWwgcHJvcGVydGllcyB0aGF0IG91ciBicmFpbnMgcHJvY2VzcyBwcmVhdHRlbnRpdmVseS4gVGhlc2UgaW5jbHVkZToNCg0KLSAqKlBvc2l0aW9uKiogLS0gd2hlcmUgc29tZXRoaW5nIGlzIGxvY2F0ZWQgaW4gc3BhY2UNCi0gKipMZW5ndGgqKiAtLSB0aGUgZXh0ZW50IG9mIGEgbGluZSBvciBiYXINCi0gKipTaXplKiogLS0gdGhlIGFyZWEgb2YgYSBtYXJrDQotICoqU2hhcGUqKiAtLSBjaXJjbGVzIHZzLiBzcXVhcmVzIHZzLiB0cmlhbmdsZXMsIGV0Yy4NCi0gKipDb2xvciAoaHVlKSoqIC0tIHJlZCB2cy4gYmx1ZSB2cy4gZ3JlZW4NCi0gKipDb2xvciAoaW50ZW5zaXR5L3NhdHVyYXRpb24pKiogLS0gbGlnaHQgdnMuIGRhcmsNCi0gKipPcmllbnRhdGlvbioqIC0tIHRoZSBhbmdsZSBvciB0aWx0IG9mIGEgbWFyaw0KLSAqKkVuY2xvc3VyZSoqIC0tIGJvdW5kZWQgcmVnaW9ucw0KDQpgYGB7ciBwcmVhdHRlbnRpdmUtYXR0cmlidXRlcywgZWNobz1GQUxTRSwgZmlnLmNhcD0iQSB2aXN1YWwgY2F0YWxvZyBvZiBwcmVhdHRlbnRpdmUgYXR0cmlidXRlcy4gRWFjaCBvZiB0aGVzZSBmZWF0dXJlcyBpcyBkZXRlY3RlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSB2aXN1YWwgc3lzdGVtLiIsIG91dC53aWR0aD0iODAlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDIvUHJlYXR0ZW50aXZlXzMuSlBHIikNCmBgYA0KDQpBbGwgb2YgdGhlc2UgYXJlIHByb2Nlc3NlZCBpbiAqKnVuZGVyIDI1MCBtaWxsaXNlY29uZHMqKiAtLSBiZWZvcmUgY29uc2Npb3VzIGF0dGVudGlvbiBraWNrcyBpbi4gVGhpcyBpcyB3aHkgYSBzaW5nbGUgcmVkIGRvdCBhbW9uZyBncmV5IGRvdHMgInBvcHMgb3V0IiBpbnN0YW50bHksIGJ1dCBmaW5kaW5nIGEgc3BlY2lmaWMgbGV0dGVyIGluIGEgYmxvY2sgb2YgdGV4dCByZXF1aXJlcyBjYXJlZnVsIHNjYW5uaW5nLg0KDQo6Ojogey5jYWxsb3V0LXRpcH0NCioqRGVzaWduIGltcGxpY2F0aW9uOioqIFdoZW4geW91IHdhbnQgdG8gZHJhdyBhdHRlbnRpb24gdG8gYSBzcGVjaWZpYyBkYXRhIHBvaW50IG9yIGNhdGVnb3J5LCBlbmNvZGUgaXQgd2l0aCBhIHByZWF0dGVudGl2ZSBhdHRyaWJ1dGUgLS0gYSBkaXN0aW5jdCBjb2xvciwgYSBsYXJnZXIgc2l6ZSwgb3IgYSBkaWZmZXJlbnQgc2hhcGUuIERvIG5vdCByZWx5IG9uIGxhYmVscyBvciBsZWdlbmRzIGFsb25lIGZvciB0aGUgbW9zdCBpbXBvcnRhbnQgY29tcGFyaXNvbnMuDQo6OjoNCg0KIyMgVHJ5IEl0OiBQcmVhdHRlbnRpdmUgUHJvY2Vzc2luZyBFeHBsb3Jlcg0KDQpZb3UgaGF2ZSBqdXN0IHJlYWQgYWJvdXQgcHJlYXR0ZW50aXZlIGF0dHJpYnV0ZXMgaW4gdGhlb3J5LiBOb3cgZXhwZXJpZW5jZSB0aGVtIGZpcnN0aGFuZC4gVGhlIHNhbmRib3ggYmVsb3cgbGV0cyB5b3Ugc3dpdGNoIGJldHdlZW4gY29sb3IsIHNpemUsIGFuZCBzaGFwZSBjdWVzLCBhZGp1c3QgdGhlIG51bWJlciBvZiBkaXN0cmFjdG9yIHBvaW50cywgYW5kIHNlZSBob3cgd2VsbCBlYWNoIGF0dHJpYnV0ZSAicG9wcyBvdXQiIHVuZGVyIGRpZmZlcmVudCBjb25kaXRpb25zLg0KDQo8ZGl2IGNsYXNzPSJzYW5kYm94LXNlY3Rpb24iPg0KPGRpdiBjbGFzcz0ic2FuZGJveC1oZWFkZXIiPg0KPHNwYW4gY2xhc3M9InNhbmRib3gtaWNvbiI+8J+nqjwvc3Bhbj4gUHJlYXR0ZW50aXZlIFByb2Nlc3NpbmcgRXhwbG9yZXIg4oCUIFdoaWNoIEF0dHJpYnV0ZSBQb3BzIE91dD8NCjwvZGl2Pg0KPGlmcmFtZSBjbGFzcz0ic2FuZGJveC1mcmFtZSIgc3JjPSJodHRwczovL2FuYWx5dGljcy5nb256YWdhLmVkdS93ZWVrMDItcHJlYXR0ZW50aXZlLyINCiAgICAgICAgaGVpZ2h0PSI1ODAiIGxvYWRpbmc9ImxhenkiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4NCjxkaXYgY2xhc3M9InNhbmRib3gtY29sZC1zdGFydCI+DQpJZiB0aGUgYXBwIHRha2VzIGEgZmV3IHNlY29uZHMgdG8gbG9hZCBvbiBmaXJzdCB2aXNpdCwgdGhhdCBpcyBub3JtYWwg4oCUIHRoZSBzZXJ2ZXIgaXMgd2FraW5nIHVwLg0KPC9kaXY+DQo8L2Rpdj4NCg0KOjo6IHsudHJ5LWl0LWJveH0NCioqRXhwbG9yYXRpb24gVGFza3M6KioNCg0KMS4gU2V0IHRoZSBhdHRyaWJ1dGUgdG8gKipDb2xvcioqIGFuZCBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIGJhY2tncm91bmQgcG9pbnRzIHRvIDEwMC4gSG93IHF1aWNrbHkgY2FuIHlvdSBzcG90IHRoZSB0YXJnZXQ/DQoyLiBTd2l0Y2ggdG8gKipTaGFwZSoqIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIHBvaW50cy4gSXMgdGhlIHRhcmdldCBoYXJkZXIgb3IgZWFzaWVyIHRvIGZpbmQgY29tcGFyZWQgdG8gY29sb3I/DQozLiBUcnkgKipTaXplKiog4oCUIGRvZXMgYSBsYXJnZXIgdGFyZ2V0IHBvcCBvdXQgYXMgZWZmZWN0aXZlbHkgYXMgYSBkaWZmZXJlbnRseSBjb2xvcmVkIG9uZT8NCjQuIEVuYWJsZSAqKlJlZHVuZGFudCBjb2RpbmcqKiAoY29sb3IgKyBzaXplIHRvZ2V0aGVyKS4gRG9lcyB0aGUgY29tYmluYXRpb24gbWFrZSB0aGUgdGFyZ2V0IGV2ZW4gbW9yZSBub3RpY2VhYmxlPyBXaHkgbWlnaHQgdGhpcyBtYXR0ZXIgZm9yIGFjY2Vzc2liaWxpdHk/DQo6OjoNCg0KOjo6IHsuY2FsbG91dC1pbmZvfQ0KKipXaGF0IFlvdSBTaG91bGQgSGF2ZSBOb3RpY2VkOioqIENvbG9yIGlzIHR5cGljYWxseSB0aGUgc3Ryb25nZXN0IHByZWF0dGVudGl2ZSBjdWUg4oCUIHRoZSB0YXJnZXQgcG9wcyBvdXQgYWxtb3N0IGluc3RhbnRseSByZWdhcmRsZXNzIG9mIGhvdyBtYW55IGRpc3RyYWN0b3JzIHN1cnJvdW5kIGl0LiBTaGFwZSBpcyB3ZWFrZXIsIGVzcGVjaWFsbHkgd2l0aCBtYW55IHBvaW50cy4gU2l6ZSBpcyBtb2RlcmF0ZS4gUmVkdW5kYW50IGNvZGluZyAoY29tYmluaW5nIHR3byBjaGFubmVscykgaXMgdGhlIG1vc3Qgcm9idXN0LCB3aGljaCBpcyB3aHkgaXQgaXMgcmVjb21tZW5kZWQgZm9yIGNvbG9yYmxpbmQtYWNjZXNzaWJsZSBkZXNpZ25zLg0KOjo6DQoNCjo6OiB7LmNhbGxvdXQtYWl9DQoqKkFJICYgVGhpcyBDb25jZXB0KioNCldoZW4gcHJvbXB0aW5nIEFJIHRvIGJ1aWxkIGEgY2hhcnQsIGRvbid0IGxldCBpdCBjaG9vc2UgdGhlIGVuY29kaW5nIGJ5IGRlZmF1bHQuIFNwZWNpZnkgKndoaWNoKiBwcmVhdHRlbnRpdmUgYXR0cmlidXRlIHlvdSB3YW50IHRvIHVzZSBhbmQgKndoeSouIEFJIHRvb2xzIHRlbmQgdG8gb3Zlci1yZWx5IG9uIGNvbG9yIOKAlCB1c2UgdGhpcyBzYW5kYm94IHRvIGRlY2lkZSBmb3IgeW91cnNlbGYgd2hpY2ggYXR0cmlidXRlIHdvcmtzIGJlc3QgZm9yIHlvdXIgZGF0YS4NCjo6Og0KDQojIyMgUHJlYXR0ZW50aXZlIFByb2Nlc3NpbmcgaW4gUjogQ29sb3IgQ3VlDQoNCkxldCB1cyBkZW1vbnN0cmF0ZSB0aGlzIHByaW5jaXBsZSBzdGVwIGJ5IHN0ZXAuIEZpcnN0LCB3ZSBjcmVhdGUgYSBzY2F0dGVyIHBsb3Qgd2hlcmUgYWxsIHBvaW50cyBsb29rIHRoZSBzYW1lOg0KDQpgYGB7ciBwcmVhdHRlbnRpdmUtc2V0dXAsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9DQpsaWJyYXJ5KHRpZHl2ZXJzZSkNCmxpYnJhcnkocGF0Y2h3b3JrKQ0KDQpzZXQuc2VlZCg0MikNCmRmX3BvaW50cyA8LSB0aWJibGUoDQogIHggPSBydW5pZig1MCksDQogIHkgPSBydW5pZig1MCksDQogIGdyb3VwID0gYyhyZXAoImJhY2tncm91bmQiLCA0OSksICJ0YXJnZXQiKQ0KKQ0KYGBgDQoNCk5vdyB3ZSBwbG90IHR3byB2ZXJzaW9ucyAtLSBvbmUgd2l0aCBubyBjdWUsIG9uZSB3aXRoIGNvbG9yOg0KDQpgYGB7ciBwcmVhdHRlbnRpdmUtY29sb3ItZGVtbywgZmlnLndpZHRoPTgsIGZpZy5oZWlnaHQ9NH0NCnBfbm9fY3VlIDwtIGdncGxvdChkZl9wb2ludHMsIGFlcyh4LCB5KSkgKw0KICBnZW9tX3BvaW50KHNpemUgPSA0LCBjb2xvciA9ICIjOTRhM2I4IikgKw0KICBsYWJzKHRpdGxlID0gIk5vIHByZWF0dGVudGl2ZSBjdWUiLA0KICAgICAgIHN1YnRpdGxlID0gIkZpbmQgdGhlIGRpZmZlcmVudCBwb2ludCIpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykNCg0KcF9jb2xvcl9jdWUgPC0gZ2dwbG90KGRmX3BvaW50cywgYWVzKHgsIHksIGNvbG9yID0gZ3JvdXApKSArDQogIGdlb21fcG9pbnQoc2l6ZSA9IDQpICsNCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGMoImJhY2tncm91bmQiID0gIiM5NGEzYjgiLCAidGFyZ2V0IiA9ICIjQzQxRTNBIikpICsNCiAgbGFicyh0aXRsZSA9ICJDb2xvciBhcyBwcmVhdHRlbnRpdmUgY3VlIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJUaGUgdGFyZ2V0IHBvcHMgb3V0IGluc3RhbnRseSIpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykgKw0KICB0aGVtZShsZWdlbmQucG9zaXRpb24gPSAibm9uZSIpDQoNCnBfbm9fY3VlICsgcF9jb2xvcl9jdWUNCmBgYA0KDQpJbiB0aGUgbGVmdCBwYW5lbCwgZXZlcnkgcG9pbnQgaXMgaWRlbnRpY2FsIC0tIGZpbmRpbmcgdGhlICJ0YXJnZXQiIGlzIGltcG9zc2libGUgd2l0aG91dCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLiBJbiB0aGUgcmlnaHQgcGFuZWwsIHRoZSBzaW5nbGUgcmVkIHBvaW50IChHb256YWdhIHJlZCwgYCNDNDFFM0FgKSBpcyBkZXRlY3RlZCBpbW1lZGlhdGVseS4gVGhpcyBpcyBwcmVhdHRlbnRpdmUgcHJvY2Vzc2luZyBhdCB3b3JrLg0KDQojIyMgUHJlYXR0ZW50aXZlIFByb2Nlc3NpbmcgaW4gUjogU2l6ZSBhbmQgUmVkdW5kYW50IENvZGluZw0KDQpXZSBjYW4gZXh0ZW5kIHRoaXMgZGVtb25zdHJhdGlvbiB0byBzaG93IGhvdyAqKnNpemUqKiBhbHNvIHNlcnZlcyBhcyBhIHByZWF0dGVudGl2ZSBjdWUsIGFuZCBob3cgY29tYmluaW5nIGN1ZXMgKHJlZHVuZGFudCBjb2RpbmcpIGlzIGV2ZW4gbW9yZSBlZmZlY3RpdmU6DQoNCmBgYHtyIHByZWF0dGVudGl2ZS1zaXplLWRlbW8sIGZpZy53aWR0aD04LCBmaWcuaGVpZ2h0PTR9DQpwX3NpemVfY3VlIDwtIGdncGxvdChkZl9wb2ludHMsIGFlcyh4LCB5LCBzaXplID0gZ3JvdXApKSArDQogIGdlb21fcG9pbnQoY29sb3IgPSAiIzAwMjk2NyIpICsNCiAgc2NhbGVfc2l6ZV9tYW51YWwodmFsdWVzID0gYygiYmFja2dyb3VuZCIgPSAzLCAidGFyZ2V0IiA9IDgpKSArDQogIGxhYnModGl0bGUgPSAiU2l6ZSBhcyBwcmVhdHRlbnRpdmUgY3VlIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJMYXJnZXIgc2l6ZSBkcmF3cyBpbW1lZGlhdGUgYXR0ZW50aW9uIikgKw0KICB0aGVtZV9taW5pbWFsKGJhc2Vfc2l6ZSA9IDEzKSArDQogIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbiA9ICJub25lIikNCg0KcF9yZWR1bmRhbnQgPC0gZ2dwbG90KGRmX3BvaW50cywgYWVzKHgsIHksIGNvbG9yID0gZ3JvdXAsIHNpemUgPSBncm91cCkpICsNCiAgZ2VvbV9wb2ludCgpICsNCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGMoImJhY2tncm91bmQiID0gIiM5NGEzYjgiLCAidGFyZ2V0IiA9ICIjQzQxRTNBIikpICsNCiAgc2NhbGVfc2l6ZV9tYW51YWwodmFsdWVzID0gYygiYmFja2dyb3VuZCIgPSAzLCAidGFyZ2V0IiA9IDgpKSArDQogIGxhYnModGl0bGUgPSAiQ29sb3IgKyBzaXplIChyZWR1bmRhbnQgY29kaW5nKSIsDQogICAgICAgc3VidGl0bGUgPSAiTXVsdGlwbGUgY3VlcyByZWluZm9yY2UgZWFjaCBvdGhlciIpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykgKw0KICB0aGVtZShsZWdlbmQucG9zaXRpb24gPSAibm9uZSIpDQoNCnBfc2l6ZV9jdWUgKyBwX3JlZHVuZGFudA0KYGBgDQoNCk5vdGljZSBob3cgY29tYmluaW5nIGNvbG9yIGFuZCBzaXplIC0tICoqcmVkdW5kYW50IGNvZGluZyoqIC0tIG1ha2VzIHRoZSB0YXJnZXQgZXZlbiBtb3JlIHNhbGllbnQuIFRoaXMgaXMgYSB2YWx1YWJsZSB0ZWNobmlxdWUgd2hlbiB5b3UgbmVlZCB0byBlbnN1cmUgYSBkYXRhIHBvaW50IGlzIG5vdGljZWQuDQoNCiMjIEdlc3RhbHQgUHJpbmNpcGxlcyBvZiBQZXJjZXB0aW9uDQoNCkluIHRoZSBlYXJseSAyMHRoIGNlbnR1cnksIEdlcm1hbiBwc3ljaG9sb2dpc3RzIGRldmVsb3BlZCB0aGUgKipHZXN0YWx0IHByaW5jaXBsZXMqKiAtLSBhIHNldCBvZiBydWxlcyBkZXNjcmliaW5nIGhvdyB0aGUgYnJhaW4gb3JnYW5pemVzIHZpc3VhbCBlbGVtZW50cyBpbnRvIGNvaGVyZW50IGdyb3Vwcy4gVGhlc2UgcHJpbmNpcGxlcyBvcGVyYXRlIGF1dG9tYXRpY2FsbHkgYW5kIGhhdmUgZGlyZWN0IGltcGxpY2F0aW9ucyBmb3IgY2hhcnQgZGVzaWduLg0KDQpgYGB7ciBnZXN0YWx0LWltYWdlLCBlY2hvPUZBTFNFLCBmaWcuY2FwPSJUaGUgR2VzdGFsdCBwcmluY2lwbGVzIGRlc2NyaWJlIGhvdyB3ZSBwZXJjZWl2ZSBncm91cHMsIHBhdHRlcm5zLCBhbmQgd2hvbGVzIGZyb20gaW5kaXZpZHVhbCB2aXN1YWwgZWxlbWVudHMuIiwgb3V0LndpZHRoPSI4MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMi9nZXN0YWx0Y29tcGxldGU2LnBuZyIpDQpgYGANCg0KVGhlIGtleSBHZXN0YWx0IHByaW5jaXBsZXMgZm9yIHZpc3VhbGl6YXRpb24gYXJlOg0KDQotICoqUHJveGltaXR5KiogLS0gRWxlbWVudHMgdGhhdCBhcmUgY2xvc2UgdG9nZXRoZXIgYXJlIHBlcmNlaXZlZCBhcyBiZWxvbmdpbmcgdG8gdGhlIHNhbWUgZ3JvdXAuIEluIGEgZ3JvdXBlZCBiYXIgY2hhcnQsIHRoZSBiYXJzIHdpdGhpbiBlYWNoIGNsdXN0ZXIgYXJlIHJlYWQgYXMgcmVsYXRlZCBiZWNhdXNlIHRoZXkgYXJlIG5lYXIgb25lIGFub3RoZXIuDQotICoqU2ltaWxhcml0eSoqIC0tIEVsZW1lbnRzIHRoYXQgbG9vayBhbGlrZSAoc2FtZSBjb2xvciwgc2hhcGUsIG9yIHNpemUpIGFyZSBwZXJjZWl2ZWQgYXMgcmVsYXRlZC4gVGhpcyBpcyB3aHkgd2UgdXNlIGNvbnNpc3RlbnQgY29sb3JzIGZvciB0aGUgc2FtZSBjYXRlZ29yeSBhY3Jvc3MgbXVsdGlwbGUgcGFuZWxzLg0KLSAqKkVuY2xvc3VyZSoqIC0tIEEgYm91bmRhcnkgb3Igc2hhZGVkIHJlZ2lvbiBhcm91bmQgZWxlbWVudHMgZ3JvdXBzIHRoZW0gdG9nZXRoZXIsIGV2ZW4gaWYgdGhleSBhcmUgb3RoZXJ3aXNlIGRpc3NpbWlsYXIuIFRoaXMgaXMgdGhlIHByaW5jaXBsZSBiZWhpbmQgcGFuZWwgYm9yZGVycyBpbiBmYWNldGVkIHBsb3RzLg0KLSAqKkNsb3N1cmUqKiAtLSBUaGUgYnJhaW4gY29tcGxldGVzIGluY29tcGxldGUgc2hhcGVzLiBXZSBwZXJjZWl2ZSBhIGNpcmNsZSBldmVuIHdoZW4gcGFydCBvZiBpdHMgb3V0bGluZSBpcyBtaXNzaW5nLiBHcmlkIGxpbmVzIGRvIG5vdCBuZWVkIHRvIGJlIGNvbnRpbnVvdXMgLS0gc3VidGxlIHRpY2sgbWFya3MgYXJlIG9mdGVuIHN1ZmZpY2llbnQuDQotICoqQ29udGludWl0eSoqIC0tIEVsZW1lbnRzIGFycmFuZ2VkIGFsb25nIGEgc21vb3RoIGxpbmUgb3IgY3VydmUgYXJlIHBlcmNlaXZlZCBhcyBtb3JlIHJlbGF0ZWQuIFRoaXMgaXMgd2h5IGNvbm5lY3RlZCBsaW5lIGNoYXJ0cyBhcmUgc28gZWZmZWN0aXZlIGZvciBzaG93aW5nIHRyZW5kcyBvdmVyIHRpbWUuDQotICoqQ29ubmVjdGlvbioqIC0tIEVsZW1lbnRzIHRoYXQgYXJlIHBoeXNpY2FsbHkgY29ubmVjdGVkIChieSBhIGxpbmUsIGZvciBleGFtcGxlKSBhcmUgcGVyY2VpdmVkIGFzIHJlbGF0ZWQuIFRoaXMgcHJpbmNpcGxlIGlzIHN0cm9uZ2VyIHRoYW4gY29sb3Igc2ltaWxhcml0eS4NCg0KOjo6IHsuY2FsbG91dC10aXB9DQoqKlB1dHRpbmcgR2VzdGFsdCB0byB3b3JrOioqIFdoZW4gZGVzaWduaW5nIGEgdmlzdWFsaXphdGlvbiwgYXNrIHlvdXJzZWxmOiAiV2hhdCBncm91cGluZ3MgZG8gSSB3YW50IHRoZSB2aWV3ZXIgdG8gcGVyY2VpdmU/IiBUaGVuIHVzZSBwcm94aW1pdHksIHNpbWlsYXJpdHksIGVuY2xvc3VyZSwgb3IgY29ubmVjdGlvbiB0byBjcmVhdGUgdGhvc2UgZ3JvdXBpbmdzLiBJZiB0aGUgdmlld2VyIGlzIHNlZWluZyBncm91cHMgeW91IGRpZCBub3QgaW50ZW5kLCBvbmUgb2YgdGhlc2UgcHJpbmNpcGxlcyBpcyBsaWtlbHkgd29ya2luZyBhZ2FpbnN0IHlvdS4NCjo6Og0KDQojIyMgR2VzdGFsdCBpbiBQcmFjdGljZSB3aXRoIGdncGxvdDINCg0KTGV0IHVzIHNlZSBob3cgcHJveGltaXR5IGFuZCBzaW1pbGFyaXR5IHdvcmsgaW4gYSByZWFsIGNoYXJ0LiBXZSB3aWxsIHVzZSB0aGUgYG1wZ2AgZGF0YXNldCB0byBjcmVhdGUgYSBncm91cGVkIGJhciBjaGFydCB3aGVyZSBHZXN0YWx0IHByaW5jaXBsZXMgb3JnYW5pemUgdGhlIHZpc3VhbCBpbmZvcm1hdGlvbjoNCg0KYGBge3IgZ2VzdGFsdC1kZW1vLCBmaWcud2lkdGg9OSwgZmlnLmhlaWdodD01LCBtZXNzYWdlPUZBTFNFfQ0KbXBnX3N1bW1hcnkgPC0gbXBnICU+JQ0KICBmaWx0ZXIoY2xhc3MgJWluJSBjKCJjb21wYWN0IiwgIm1pZHNpemUiLCAic3V2IikpICU+JQ0KICBncm91cF9ieShjbGFzcywgZHJ2KSAlPiUNCiAgc3VtbWFyaXNlKG1lYW5faHd5ID0gbWVhbihod3kpLCAuZ3JvdXBzID0gImRyb3AiKQ0KDQpnZ3Bsb3QobXBnX3N1bW1hcnksIGFlcyh4ID0gY2xhc3MsIHkgPSBtZWFuX2h3eSwgZmlsbCA9IGRydikpICsNCiAgZ2VvbV9jb2wocG9zaXRpb24gPSBwb3NpdGlvbl9kb2RnZSh3aWR0aCA9IDAuOCksIHdpZHRoID0gMC43KSArDQogIHNjYWxlX2ZpbGxfbWFudWFsKA0KICAgIHZhbHVlcyA9IGMoIjQiID0gIiMwMDI5NjciLCAiZiIgPSAiI0M0MUUzQSIsICJyIiA9ICIjQjQ5NzVBIiksDQogICAgbGFiZWxzID0gYygiNCIgPSAiNC1XaGVlbCIsICJmIiA9ICJGcm9udCIsICJyIiA9ICJSZWFyIikNCiAgKSArDQogIGxhYnModGl0bGUgPSAiR2VzdGFsdCBQcmluY2lwbGVzIGF0IFdvcmsiLA0KICAgICAgIHN1YnRpdGxlID0gIlByb3hpbWl0eSBncm91cHMgYmFycyBieSBjbGFzczsgc2ltaWxhcml0eSAoY29sb3IpIGdyb3VwcyBieSBkcml2ZSB0eXBlIiwNCiAgICAgICB4ID0gIlZlaGljbGUgQ2xhc3MiLCB5ID0gIk1lYW4gSGlnaHdheSBNUEciLCBmaWxsID0gIkRyaXZlIFR5cGUiKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpDQpgYGANCg0KSW4gdGhpcyBjaGFydCwgKipwcm94aW1pdHkqKiBncm91cHMgdGhlIGJhcnMgd2l0aGluIGVhY2ggdmVoaWNsZSBjbGFzcyAoY29tcGFjdCwgbWlkc2l6ZSwgU1VWKSwgd2hpbGUgKipzaW1pbGFyaXR5KiogKGNvbG9yKSBsZXRzIHlvdSBjb21wYXJlIGRyaXZlIHR5cGVzIGFjcm9zcyBjbGFzc2VzLiBUaGUgR29uemFnYSBjb2xvcnMgLS0gbmF2eSAoYCMwMDI5NjdgKSwgcmVkIChgI0M0MUUzQWApLCBhbmQgZ29sZCAoYCNCNDk3NUFgKSAtLSBwcm92aWRlIGRpc3RpbmN0LCBtZW1vcmFibGUgaHVlcy4NCg0KIyMgQ2xldmVsYW5kICYgTWNHaWxsJ3MgUGVyY2VwdHVhbCBIaWVyYXJjaHkNCg0KTm90IGFsbCB2aXN1YWwgZW5jb2RpbmdzIGFyZSBjcmVhdGVkIGVxdWFsLiBJbiBhIGxhbmRtYXJrIDE5ODQgcGFwZXIsIFdpbGxpYW0gQ2xldmVsYW5kIGFuZCBSb2JlcnQgTWNHaWxsIGNvbmR1Y3RlZCBleHBlcmltZW50cyB0byBkZXRlcm1pbmUgd2hpY2ggdmlzdWFsIHByb3BlcnRpZXMgcGVvcGxlIGp1ZGdlIG1vc3QgYWNjdXJhdGVseS4gVGhlaXIgZmluZGluZ3MgZXN0YWJsaXNoZWQgYSAqKnBlcmNlcHR1YWwgaGllcmFyY2h5KiogdGhhdCByZW1haW5zIGZvdW5kYXRpb25hbCB0byB2aXN1YWxpemF0aW9uIGRlc2lnbi4NCg0KYGBge3IgY2xldmVsYW5kLW1jZ2lsbCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iQ2xldmVsYW5kIGFuZCBNY0dpbGwncyBoaWVyYXJjaHkgb2YgcGVyY2VwdHVhbCBhY2N1cmFjeSwgYXMgYWRhcHRlZCBieSBBbGJlcnRvIENhaXJvLiBFbmNvZGluZ3MgYXQgdGhlIHRvcCBhcmUganVkZ2VkIG1vc3QgYWNjdXJhdGVseS4iLCBvdXQud2lkdGg9IjcwJSJ9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzLzAyL2NsZXZlbGFuZF9tY2dpbGxfY2Fpcm8uanBnIikNCmBgYA0KDQpGcm9tICoqbW9zdCBhY2N1cmF0ZSoqIHRvICoqbGVhc3QgYWNjdXJhdGUqKjoNCg0KMS4gKipQb3NpdGlvbiBvbiBhIGNvbW1vbiBzY2FsZSoqIC0tIGNvbXBhcmluZyBwb2ludHMgYWxvbmcgYSBzaGFyZWQgYXhpcyAoZS5nLiwgZG90IHBsb3QsIHNjYXR0ZXIgcGxvdCkNCjIuICoqUG9zaXRpb24gb24gdW5hbGlnbmVkIHNjYWxlcyoqIC0tIGNvbXBhcmluZyBhY3Jvc3Mgc2VwYXJhdGUgYnV0IHNpbWlsYXIgYXhlcyAoZS5nLiwgc21hbGwgbXVsdGlwbGVzKQ0KMy4gKipMZW5ndGgqKiAtLSBjb21wYXJpbmcgdGhlIGV4dGVudCBvZiBiYXJzIG9yIGxpbmVzIChlLmcuLCBiYXIgY2hhcnQpDQo0LiAqKkFuZ2xlIC8gU2xvcGUqKiAtLSBqdWRnaW5nIHRpbHQgb3Igd2VkZ2Ugc2l6ZSAoZS5nLiwgcGllIGNoYXJ0LCBzbG9wZSBncmFwaCkNCjUuICoqQXJlYSoqIC0tIGNvbXBhcmluZyB0aGUgc2l6ZSBvZiByZWdpb25zIChlLmcuLCBidWJibGUgY2hhcnQsIHRyZWVtYXApDQo2LiAqKlZvbHVtZSoqIC0tIGNvbXBhcmluZyAzRCBvYmplY3RzIChnZW5lcmFsbHkgcG9vcjsgYXZvaWQgM0QgY2hhcnRzKQ0KNy4gKipDb2xvciBzYXR1cmF0aW9uIC8gRGVuc2l0eSoqIC0tIGNvbXBhcmluZyBzaGFkaW5nIGludGVuc2l0eSAoZS5nLiwgaGVhdG1hcCwgY2hvcm9wbGV0aCkNCg0KVGhpcyBoaWVyYXJjaHkgZXhwbGFpbnMgbWFueSBiZXN0IHByYWN0aWNlczoNCg0KLSAqKkJhciBjaGFydHMgYmVhdCBwaWUgY2hhcnRzKiogYmVjYXVzZSBsZW5ndGggKHJhbmsgMykgaXMganVkZ2VkIGZhciBtb3JlIGFjY3VyYXRlbHkgdGhhbiBhbmdsZSAocmFuayA0KS4NCi0gKipTY2F0dGVyIHBsb3RzIGFyZSBleGNlbGxlbnQqKiBiZWNhdXNlIHRoZXkgZW5jb2RlIGRhdGEgYXMgcG9zaXRpb24gb24gY29tbW9uIHNjYWxlcyAocmFuayAxKS4NCi0gKiozRCBjaGFydHMgYXJlIGFsbW9zdCBuZXZlciBhcHByb3ByaWF0ZSoqIGJlY2F1c2Ugdm9sdW1lIChyYW5rIDYpIGlzIHRoZSBzZWNvbmQtbGVhc3QgYWNjdXJhdGUgZW5jb2RpbmcuDQoNCmBgYHtyIGJhci1idWJibGUtaGVhdG1hcCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iVGhlIHNhbWUgZGF0YSBzaG93biBhcyBhIGJhciBjaGFydCwgYnViYmxlIGNoYXJ0LCBhbmQgaGVhdG1hcC4gTm90aWNlIGhvdyBwcmVjaXNpb24gZGVjcmVhc2VzIGZyb20gbGVmdCB0byByaWdodC4iLCBvdXQud2lkdGg9IjgwJSJ9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzLzAyL2JhcmJ1YmJsZWhlYXRtYXAuanBnIikNCmBgYA0KDQojIyMgRGVtb25zdHJhdGluZyB0aGUgSGllcmFyY2h5IGluIFINCg0KTGV0IHVzIGNvbXBhcmUgYSBiYXIgY2hhcnQgYW5kIGEgcGllIGNoYXJ0IHNob3dpbmcgdGhlIHNhbWUgZGF0YSAtLSB2ZWhpY2xlIGNsYXNzIGRpc3RyaWJ1dGlvbiBpbiB0aGUgYG1wZ2AgZGF0YXNldDoNCg0KYGBge3IgaGllcmFyY2h5LWRlbW8sIGZpZy53aWR0aD0xMCwgZmlnLmhlaWdodD01LCBtZXNzYWdlPUZBTFNFfQ0KY2xhc3NfY291bnRzIDwtIG1wZyAlPiUNCiAgY291bnQoY2xhc3MpICU+JQ0KICBtdXRhdGUoY2xhc3MgPSBmY3RfcmVvcmRlcihjbGFzcywgbikpDQoNCnBfYmFyIDwtIGdncGxvdChjbGFzc19jb3VudHMsIGFlcyh4ID0gY2xhc3MsIHkgPSBuKSkgKw0KICBnZW9tX2NvbChmaWxsID0gIiMwMDI5NjciLCB3aWR0aCA9IDAuNykgKw0KICBnZW9tX3RleHQoYWVzKGxhYmVsID0gbiksIGhqdXN0ID0gLTAuMiwgc2l6ZSA9IDMuNSwgY29sb3IgPSAiIzMzMzMzMyIpICsNCiAgY29vcmRfZmxpcCgpICsNCiAgbGFicyh0aXRsZSA9ICJCYXIgQ2hhcnQgKGxlbmd0aCBlbmNvZGluZykiLA0KICAgICAgIHN1YnRpdGxlID0gIkVhc3kgdG8gY29tcGFyZSBwcmVjaXNlIHZhbHVlcyIsDQogICAgICAgeCA9IE5VTEwsIHkgPSAiQ291bnQiKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpICsNCiAgZXhwYW5kX2xpbWl0cyh5ID0gbWF4KGNsYXNzX2NvdW50cyRuKSAqIDEuMSkNCg0KcF9waWUgPC0gZ2dwbG90KGNsYXNzX2NvdW50cywgYWVzKHggPSAiIiwgeSA9IG4sIGZpbGwgPSBjbGFzcykpICsNCiAgZ2VvbV9jb2wod2lkdGggPSAxKSArDQogIGNvb3JkX3BvbGFyKHRoZXRhID0gInkiKSArDQogIHNjYWxlX2ZpbGxfYnJld2VyKHBhbGV0dGUgPSAiU2V0MiIpICsNCiAgbGFicyh0aXRsZSA9ICJQaWUgQ2hhcnQgKGFuZ2xlIGVuY29kaW5nKSIsDQogICAgICAgc3VidGl0bGUgPSAiSGFyZCB0byBjb21wYXJlIHNpbWlsYXIgc2xpY2VzIiwNCiAgICAgICBmaWxsID0gIkNsYXNzIikgKw0KICB0aGVtZV92b2lkKGJhc2Vfc2l6ZSA9IDEzKQ0KDQpwX2JhciArIHBfcGllDQpgYGANCg0KV2hpY2ggY2hhcnQgbWFrZXMgaXQgZWFzaWVyIHRvIGNvbXBhcmUgdGhlIG51bWJlciBvZiBjb21wYWN0IHZzLiBtaWRzaXplIHZlaGljbGVzPyBUaGUgYmFyIGNoYXJ0IHdpbnMgZGVjaXNpdmVseSBiZWNhdXNlICoqbGVuZ3RoKiogKHJhbmsgMykgaXMgZmFyIG1vcmUgYWNjdXJhdGVseSBwZXJjZWl2ZWQgdGhhbiAqKmFuZ2xlKiogKHJhbmsgNCkuDQoNCiMjIENvbG9yIFRoZW9yeSBmb3IgVmlzdWFsaXphdGlvbg0KDQpDb2xvciBpcyBvbmUgb2YgdGhlIG1vc3QgcG93ZXJmdWwgYW5kIG1vc3QgbWlzdXNlZCB0b29scyBpbiBkYXRhIHZpc3VhbGl6YXRpb24uIFRvIHVzZSBpdCBlZmZlY3RpdmVseSwgd2UgbmVlZCB0byB1bmRlcnN0YW5kIGl0cyB0aHJlZSBjb21wb25lbnRzLg0KDQpgYGB7ciBtdW5zZWxsLWhzbCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iQ29sb3IgY2FuIGJlIGRlc2NyaWJlZCBieSB0aHJlZSBwcm9wZXJ0aWVzOiBodWUsIHNhdHVyYXRpb24sIGFuZCBsaWdodG5lc3MuIiwgb3V0LndpZHRoPSI2MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMi9tdW5zZWxsaHNsLmdpZiIpDQpgYGANCg0KLSAqKkh1ZSoqIC0tIHdoYXQgd2UgY29sbG9xdWlhbGx5IGNhbGwgImNvbG9yIjogcmVkLCBibHVlLCBncmVlbiwgb3JhbmdlLCBldGMuDQotICoqU2F0dXJhdGlvbioqIChjaHJvbWEpIC0tIHRoZSBpbnRlbnNpdHkgb3IgcHVyaXR5IG9mIHRoZSBjb2xvciwgZnJvbSB2aXZpZCB0byBtdXRlZCBncmV5DQotICoqTGlnaHRuZXNzKiogKHZhbHVlKSAtLSBob3cgbGlnaHQgb3IgZGFyayB0aGUgY29sb3IgaXMsIGZyb20gd2hpdGUgdG8gYmxhY2sNCg0KRGlmZmVyZW50IHR5cGVzIG9mIGRhdGEgY2FsbCBmb3IgZGlmZmVyZW50IHR5cGVzIG9mIGNvbG9yIHBhbGV0dGVzOg0KDQoqKlNlcXVlbnRpYWwgcGFsZXR0ZXM6KiogQSBzaW5nbGUgaHVlIHRoYXQgdmFyaWVzIGluIGxpZ2h0bmVzcy4gVXNlIGZvciBvcmRlcmVkLCBjb250aW51b3VzIGRhdGEgKGUuZy4sIHRlbXBlcmF0dXJlLCBwb3B1bGF0aW9uIGRlbnNpdHkpLiBMaWdodCA9IGxvdyB2YWx1ZXM7IGRhcmsgPSBoaWdoIHZhbHVlcy4NCg0KKipEaXZlcmdpbmcgcGFsZXR0ZXM6KiogVHdvIGNvbnRyYXN0aW5nIGh1ZXMgd2l0aCBhIG5ldXRyYWwgbWlkcG9pbnQuIFVzZSBmb3IgZGF0YSB3aXRoIGEgbWVhbmluZ2Z1bCBjZW50ZXIgKGUuZy4sIGRldmlhdGlvbnMgZnJvbSBhdmVyYWdlLCBwcm9maXQvbG9zcykuDQoNCioqUXVhbGl0YXRpdmUgcGFsZXR0ZXM6KiogRGlzdGluY3QgaHVlcyBhdCBzaW1pbGFyIHNhdHVyYXRpb24gYW5kIGxpZ2h0bmVzcy4gVXNlIGZvciBjYXRlZ29yaWNhbCBkYXRhIHdpdGggbm8gbmF0dXJhbCBvcmRlcmluZyAoZS5nLiwgY291bnRyeSwgZGVwYXJ0bWVudCkuDQoNCmBgYHtyIGNvbG9yLXBhbGV0dGVzLCBmaWcud2lkdGg9MTAsIGZpZy5oZWlnaHQ9NCwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0NCmxpYnJhcnkoUkNvbG9yQnJld2VyKQ0KcGFyKG1mcm93ID0gYygxLCAzKSwgbWFyID0gYygxLCAxLCAzLCAxKSkNCmRpc3BsYXkuYnJld2VyLnBhbCg3LCAiQmx1ZXMiKQ0KdGl0bGUoIlNlcXVlbnRpYWw6IEJsdWVzIiwgbGluZSA9IDEpDQpkaXNwbGF5LmJyZXdlci5wYWwoNywgIlJkWWxCdSIpDQp0aXRsZSgiRGl2ZXJnaW5nOiBSZFlsQnUiLCBsaW5lID0gMSkNCmRpc3BsYXkuYnJld2VyLnBhbCg3LCAiU2V0MiIpDQp0aXRsZSgiUXVhbGl0YXRpdmU6IFNldDIiLCBsaW5lID0gMSkNCmBgYA0KDQojIyMgQ29sb3JibGluZG5lc3MgYW5kIHRoZSBWaXJpZGlzIFBhbGV0dGUNCg0KQXBwcm94aW1hdGVseSAqKjglIG9mIG1lbiBhbmQgMC41JSBvZiB3b21lbioqIGhhdmUgc29tZSBmb3JtIG9mIGNvbG9yIHZpc2lvbiBkZWZpY2llbmN5LCBtb3N0IGNvbW1vbmx5IHJlZC1ncmVlbiBjb2xvcmJsaW5kbmVzcy4gQW55IHZpc3VhbGl6YXRpb24gdGhhdCByZWxpZXMgc29sZWx5IG9uIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gcmVkIGFuZCBncmVlbiB3aWxsIGJlIHVucmVhZGFibGUgZm9yIHJvdWdobHkgMSBpbiAxMiBtYWxlIHZpZXdlcnMuDQoNClByYWN0aWNhbCByZWNvbW1lbmRhdGlvbnM6DQoNCi0gVXNlICoqY29sb3JibGluZC1mcmllbmRseSBwYWxldHRlcyoqIHN1Y2ggYXMgdmlyaWRpcywgd2hpY2ggdmFyaWVzIGluIGJvdGggaHVlIGFuZCBsaWdodG5lc3MNCi0gKipBdm9pZCByZWQtZ3JlZW4gY29udHJhc3RzKiogYXMgdGhlIHNvbGUgZGlzdGluZ3Vpc2hpbmcgZmVhdHVyZQ0KLSBVc2UgKipyZWR1bmRhbnQgY29kaW5nKiogLS0gY29tYmluZSBjb2xvciB3aXRoIHNoYXBlLCBwYXR0ZXJuLCBvciBkaXJlY3QgbGFiZWxzDQotIFRlc3QgeW91ciBwbG90cyB3aXRoIGEgY29sb3JibGluZCBzaW11bGF0b3INCg0KVGhlIGB2aXJpZGlzYCBwYWxldHRlcyBhcmUgc3BlY2lmaWNhbGx5IGRlc2lnbmVkIHRvIGJlICoqcGVyY2VwdHVhbGx5IHVuaWZvcm0qKiwgKipjb2xvcmJsaW5kLWZyaWVuZGx5KiosIGFuZCAqKnJlYWRhYmxlIGluIGdyZXlzY2FsZSoqLiBUaGV5IGFyZSBhbiBleGNlbGxlbnQgZGVmYXVsdCBjaG9pY2UuDQoNCmBgYHtyIHZpcmlkaXMtZGVtbywgZmlnLndpZHRoPTgsIGZpZy5oZWlnaHQ9NSwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0NCmxpYnJhcnkodmlyaWRpcykNCg0KZ2dwbG90KGZhaXRoZnVsZCwgYWVzKHdhaXRpbmcsIGVydXB0aW9ucywgZmlsbCA9IGRlbnNpdHkpKSArDQogIGdlb21fdGlsZSgpICsNCiAgc2NhbGVfZmlsbF92aXJpZGlzX2Mob3B0aW9uID0gIm1hZ21hIikgKw0KICBsYWJzKHRpdGxlID0gIlZpcmlkaXMgJ21hZ21hJyBwYWxldHRlIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJQZXJjZXB0dWFsbHkgdW5pZm9ybSBhbmQgY29sb3JibGluZC1mcmllbmRseSIsDQogICAgICAgeCA9ICJXYWl0aW5nIFRpbWUgKG1pbikiLCB5ID0gIkVydXB0aW9uIER1cmF0aW9uIChtaW4pIikgKw0KICB0aGVtZV9taW5pbWFsKGJhc2Vfc2l6ZSA9IDEzKQ0KYGBgDQoNCmBgYHtyIGNvbnRleHQtaW1hZ2UsIGVjaG89RkFMU0UsIGZpZy5jYXA9IkNvbnRleHQgZWZmZWN0czogaWRlbnRpY2FsIGNvbG9ycyBhcHBlYXIgZGlmZmVyZW50IGRlcGVuZGluZyBvbiB0aGVpciBzdXJyb3VuZGluZ3MuIFRoaXMgaXMgd2h5IGNvbnNpc3RlbnQgYmFja2dyb3VuZHMgbWF0dGVyIGluIHZpc3VhbGl6YXRpb24uIiwgb3V0LndpZHRoPSI2MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMi9jb250ZXh0LnBuZyIpDQpgYGANCg0KOjo6IHsuY2FsbG91dC10aXB9DQoqKlJ1bGUgb2YgdGh1bWIgZm9yIGNvbG9yOioqIFVzZSBjb2xvciBwdXJwb3NlZnVsbHkuIElmIGEgY29sb3IgZG9lcyBub3QgZW5jb2RlIGRhdGEgb3Igc2VydmUgYSBncm91cGluZyBmdW5jdGlvbiwgY29uc2lkZXIgd2hldGhlciBpdCBpcyBhZGRpbmcgdW5uZWNlc3NhcnkgdmlzdWFsIG5vaXNlLiBEZWZhdWx0IHRvIGEgbXV0ZWQgcGFsZXR0ZSBhbmQgcmVzZXJ2ZSB2aXZpZCBjb2xvcnMgZm9yIHRoZSBlbGVtZW50cyB5b3Ugd2FudCB0byBlbXBoYXNpemUuDQo6OjoNCg0KIyMgV29ya2luZyBNZW1vcnkgYW5kIERpcmVjdCBMYWJlbGluZw0KDQpPdXIgdmlzdWFsIHdvcmtpbmcgbWVtb3J5IGlzIHJlbWFya2FibHkgbGltaXRlZC4gUmVzZWFyY2ggc2hvd3Mgd2UgY2FuIGhvbGQgYXBwcm94aW1hdGVseSAqKjMgdG8gNCBpdGVtcyoqIGluIHZpc3VhbCB3b3JraW5nIG1lbW9yeSBhdCBhbnkgZ2l2ZW4gdGltZS4gVGhpcyBoYXMgcHJvZm91bmQgY29uc2VxdWVuY2VzIGZvciBjaGFydCBkZXNpZ24uDQoNCmBgYHtyIG1lbW9yeS1naWYsIGVjaG89RkFMU0UsIGZpZy5jYXA9IlZpc3VhbCB3b3JraW5nIG1lbW9yeSBpcyBsaW1pdGVkIHRvIGFib3V0IDMtNCBpdGVtcy4gRXhjZWVkaW5nIHRoaXMgbGltaXQgZm9yY2VzIHZpZXdlcnMgdG8gbG9vayBiYWNrIGFuZCBmb3J0aCBiZXR3ZWVuIHRoZSBsZWdlbmQgYW5kIHRoZSBjaGFydC4iLCBvdXQud2lkdGg9IjcwJSJ9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzLzAyL21lbW9yeS5naWYiKQ0KYGBgDQoNCklmIHlvdXIgY2hhcnQgaGFzIGEgbGVnZW5kIHdpdGggOCBjYXRlZ29yaWVzIG1hcHBlZCB0byA4IGNvbG9ycywgdGhlIHZpZXdlciBtdXN0IGNvbnN0YW50bHkgc2h1dHRsZSBiZXR3ZWVuIHRoZSBsZWdlbmQgYW5kIHRoZSBkYXRhLiBUaGlzIGlzIHNsb3csIGVycm9yLXByb25lLCBhbmQgZXhoYXVzdGluZy4gQmV0dGVyIGFwcHJvYWNoZXMgaW5jbHVkZToNCg0KLSAqKkRpcmVjdCBsYWJlbGluZyoqIC0tIHBsYWNlIGNhdGVnb3J5IGxhYmVscyBkaXJlY3RseSBuZXh0IHRvIG9yIG9uIHRoZSBkYXRhIGVsZW1lbnRzDQotICoqTGltaXQgY2F0ZWdvcmllcyoqIC0tIHNob3cgb25seSB0aGUgMy00IG1vc3QgaW1wb3J0YW50IGdyb3VwczsgY29sbGFwc2UgdGhlIHJlc3QgaW50byAiT3RoZXIiDQotICoqVXNlIGZhY2V0cyoqIC0tIGNyZWF0ZSBzbWFsbCBtdWx0aXBsZXMgc28gY29sb3IgZG9lcyBub3QgY2FycnkgdGhlIGZ1bGwgYnVyZGVuDQotICoqSGlnaGxpZ2h0IGFuZCBncmV5IG91dCoqIC0tIHNob3cgYWxsIGRhdGEgaW4gbXV0ZWQgZ3JleSBhbmQgaGlnaGxpZ2h0IG9ubHkgMS0yIGNhdGVnb3JpZXMgb2YgaW50ZXJlc3QNCg0KYGBge3IgZGlyZWN0LWxhYmVsLWRlbW8sIGZpZy53aWR0aD05LCBmaWcuaGVpZ2h0PTUsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9DQpsaWJyYXJ5KGdncmVwZWwpDQoNCmVjb25fZGF0YSA8LSBlY29ub21pY3NfbG9uZyAlPiUNCiAgZmlsdGVyKHZhcmlhYmxlICVpbiUgYygicG9wIiwgInVuZW1wbG95IiwgInVlbXBtZWQiKSkgJT4lDQogIGdyb3VwX2J5KHZhcmlhYmxlKSAlPiUNCiAgbXV0YXRlKHZhbHVlX3NjYWxlZCA9ICh2YWx1ZSAtIG1pbih2YWx1ZSkpIC8gKG1heCh2YWx1ZSkgLSBtaW4odmFsdWUpKSkgJT4lDQogIHVuZ3JvdXAoKQ0KDQpsYWJlbF9kYXRhIDwtIGVjb25fZGF0YSAlPiUNCiAgZ3JvdXBfYnkodmFyaWFibGUpICU+JQ0KICBmaWx0ZXIoZGF0ZSA9PSBtYXgoZGF0ZSkpDQoNCmdncGxvdChlY29uX2RhdGEsIGFlcyh4ID0gZGF0ZSwgeSA9IHZhbHVlX3NjYWxlZCwgY29sb3IgPSB2YXJpYWJsZSkpICsNCiAgZ2VvbV9saW5lKGxpbmV3aWR0aCA9IDEpICsNCiAgZ2VvbV90ZXh0X3JlcGVsKA0KICAgIGRhdGEgPSBsYWJlbF9kYXRhLA0KICAgIGFlcyhsYWJlbCA9IHZhcmlhYmxlKSwNCiAgICBudWRnZV94ID0gMzAwLCBkaXJlY3Rpb24gPSAieSIsIGhqdXN0ID0gMCwNCiAgICBzZWdtZW50LmNvbG9yID0gImdyZXk3MCIsIHNpemUgPSA0DQogICkgKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygicG9wIiA9ICIjMDAyOTY3IiwgInVuZW1wbG95IiA9ICIjQzQxRTNBIiwgInVlbXBtZWQiID0gIiNCNDk3NUEiKSkgKw0KICBsYWJzKHRpdGxlID0gIkRpcmVjdCBMYWJlbGluZyBSZWR1Y2VzIENvZ25pdGl2ZSBMb2FkIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJMYWJlbHMgb24gdGhlIGxpbmVzIGVsaW1pbmF0ZSB0aGUgbmVlZCB0byBsb29rIHVwIGEgbGVnZW5kIiwNCiAgICAgICB4ID0gTlVMTCwgeSA9ICJTY2FsZWQgVmFsdWUgKDAtMSkiKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpICsNCiAgdGhlbWUobGVnZW5kLnBvc2l0aW9uID0gIm5vbmUiKSArDQogIGNvb3JkX2NhcnRlc2lhbihjbGlwID0gIm9mZiIpICsNCiAgdGhlbWUocGxvdC5tYXJnaW4gPSBtYXJnaW4oNSwgNDAsIDUsIDUpKQ0KYGBgDQoNCkJ5IHBsYWNpbmcgbGFiZWxzIGRpcmVjdGx5IG9uIHRoZSBsaW5lcywgdGhlIHZpZXdlciBuZXZlciBuZWVkcyB0byBjb25zdWx0IGEgbGVnZW5kLiBUaGlzIGlzIGZhc3RlciwgbGVzcyBlZmZvcnRmdWwsIGFuZCByZWR1Y2VzIHRoZSBkZW1hbmRzIG9uIHZpc3VhbCB3b3JraW5nIG1lbW9yeS4NCg0KLS0tDQoNCiMjIFBhcnQgMjogRGVzaWduIFByaW5jaXBsZXMgYW5kIHRoZSBIaXN0b3J5IG9mIEdyZWF0IENoYXJ0cw0KDQpOb3cgdGhhdCB3ZSB1bmRlcnN0YW5kIGhvdyB0aGUgYnJhaW4gcHJvY2Vzc2VzIHZpc3VhbCBpbmZvcm1hdGlvbiwgbGV0IHVzIHR1cm4gdG8gdGhlIGRlc2lnbiBwcmluY2lwbGVzIHRoYXQgZ3JlYXQgdmlzdWFsaXphdGlvbiBwcmFjdGl0aW9uZXJzIGhhdmUgZGV2ZWxvcGVkIG92ZXIgdGhlIHBhc3QgdHdvIGNlbnR1cmllcy4gVGhlc2UgcHJpbmNpcGxlcyB0cmFuc2xhdGUgcGVyY2VwdHVhbCBzY2llbmNlIGludG8gcHJhY3RpY2FsIGd1aWRlbGluZXMuDQoNCiMjIExhbmRtYXJrcyBpbiBWaXN1YWxpemF0aW9uIEhpc3RvcnkNCg0KVGhlIGNyYWZ0IG9mIGRhdGEgdmlzdWFsaXphdGlvbiBoYXMgZGVlcCByb290cy4gVGhyZWUgbGFuZG1hcmsgZXhhbXBsZXMgaWxsdXN0cmF0ZSB3aHkgZGVzaWduIHByaW5jaXBsZXMgbWF0dGVyIC0tIGFuZCB3aHkgc29tZSBvZiB0aGUgYmVzdCBhZHZpY2UgaXMgb3ZlciB0d28gY2VudHVyaWVzIG9sZC4NCg0KKipXaWxsaWFtIFBsYXlmYWlyICgxNzg2KSoqIGludmVudGVkIHRoZSBiYXIgY2hhcnQsIGxpbmUgY2hhcnQsIGFuZCBwaWUgY2hhcnQgaW4gaGlzIGJvb2sgKlRoZSBDb21tZXJjaWFsIGFuZCBQb2xpdGljYWwgQXRsYXMqLiBBdCBhIHRpbWUgd2hlbiB0YWJsZXMgb2YgbnVtYmVycyB3ZXJlIHRoZSBub3JtLCBQbGF5ZmFpcidzIGluc2lnaHQgd2FzIHJhZGljYWw6IGEgd2VsbC1kcmF3biBwaWN0dXJlIGNvdWxkIGNvbnZleSB0cmVuZHMgYW5kIGNvbXBhcmlzb25zIGZhciBtb3JlIHF1aWNrbHkgdGhhbiByb3dzIG9mIGZpZ3VyZXMuIEV2ZW4gYnkgbW9kZXJuIHN0YW5kYXJkcywgaGlzIGNoYXJ0cyBhcmUgcmVhZGFibGUgYW5kIGVsZWdhbnQuDQoNCmBgYHtyIHBsYXlmYWlyLCBlY2hvPUZBTFNFLCBmaWcuY2FwPSJXaWxsaWFtIFBsYXlmYWlyJ3MgdGltZSBzZXJpZXMgYW5kIGJhciBjaGFydCBmcm9tIFRoZSBDb21tZXJjaWFsIGFuZCBQb2xpdGljYWwgQXRsYXMgKDE3ODYpIC0tIHRoZSBlYXJsaWVzdCBrbm93biBleGFtcGxlcyBvZiB0aGVzZSBjaGFydCBmb3Jtcy4iLCBvdXQud2lkdGg9IjgwJSJ9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzLzAzL3BsYXlmYWlyYmFydGltZXNlcmllcy5wbmciKQ0KYGBgDQoNCioqSm9obiBTbm93ICgxODU0KSoqIGNoYWxsZW5nZWQgdGhlIHByZXZhaWxpbmcgImJhZCBhaXIiIHRoZW9yeSBvZiBjaG9sZXJhIGJ5IHBsb3R0aW5nIGRlYXRocyBvbiBhIG1hcCBvZiBMb25kb24ncyBTb2hvIGRpc3RyaWN0LiBUaGUgcmVzdWx0aW5nIHZpc3VhbGl6YXRpb24gLS0gb25lIG9mIHRoZSBtb3N0IGZhbW91cyBpbiB0aGUgaGlzdG9yeSBvZiBzY2llbmNlIC0tIHJldmVhbGVkIGEgc3RyaWtpbmcgY2x1c3RlciBvZiBkZWF0aHMgYXJvdW5kIHRoZSBCcm9hZCBTdHJlZXQgd2F0ZXIgcHVtcCwgcG9pbnRpbmcgdG8gY29udGFtaW5hdGVkIHdhdGVyIGFzIHRoZSBzb3VyY2UuIFRoZSBwdW1wIGhhbmRsZSB3YXMgcmVtb3ZlZCwgYW5kIHRoZSBvdXRicmVhayBzdWJzaWRlZC4gVGhpcyBpcyB2aXN1YWxpemF0aW9uIGFzIGEgdG9vbCBmb3Igc2F2aW5nIGxpdmVzLg0KDQpgYGB7ciBzbm93LW1hcCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iSm9obiBTbm93J3MgY2hvbGVyYSBtYXAgb2YgdGhlIFNvaG8gZGlzdHJpY3QsIExvbmRvbiAoMTg1NCkuIEVhY2ggc21hbGwgYmFyIHJlcHJlc2VudHMgYSBkZWF0aC4gVGhlIGNsdXN0ZXIgYXJvdW5kIHRoZSBCcm9hZCBTdHJlZXQgcHVtcCBpcyB1bm1pc3Rha2FibGUuIiwgb3V0LndpZHRoPSI3MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMy9zbm93LWNob2xlcmEuZ2lmIikNCmBgYA0KDQoqKkNoYXJsZXMgSm9zZXBoIE1pbmFyZCAoMTg2OSkqKiBjcmVhdGVkIHdoYXQgRWR3YXJkIFR1ZnRlIGNhbGxlZCAidGhlIGJlc3Qgc3RhdGlzdGljYWwgZ3JhcGhpYyBldmVyIGRyYXduLiIgSGlzIGRlcGljdGlvbiBvZiBOYXBvbGVvbidzIDE4MTIgUnVzc2lhbiBjYW1wYWlnbiBlbmNvZGVzIHNpeCB2YXJpYWJsZXMgaW4gYSBzaW5nbGUgaW1hZ2U6IHRoZSBzaXplIG9mIHRoZSBhcm15LCBpdHMgbG9jYXRpb24gKGxhdGl0dWRlIGFuZCBsb25naXR1ZGUpLCBkaXJlY3Rpb24gb2YgbW92ZW1lbnQsIHRlbXBlcmF0dXJlIGR1cmluZyB0aGUgcmV0cmVhdCwgYW5kIGRhdGVzIG9mIGtleSBldmVudHMuIFRoZSBzaHJpbmtpbmcgYmFuZCB0ZWxscyB0aGUgc3Rvcnkgb2YgY2F0YXN0cm9waGljIGxvc3MgbW9yZSBwb3dlcmZ1bGx5IHRoYW4gYW55IHRhYmxlIG9mIGNhc3VhbHR5IGZpZ3VyZXMgY291bGQuDQoNCmBgYHtyIG1pbmFyZCwgZWNobz1GQUxTRSwgZmlnLmNhcD0iTWluYXJkJ3MgbWFwIG9mIE5hcG9sZW9uJ3MgbWFyY2ggdG8gYW5kIGZyb20gTW9zY293ICgxODY5KS4gVGhlIHdpZHRoIG9mIHRoZSBiYW5kIHJlcHJlc2VudHMgYXJteSBzaXplIC0tIGZyb20gNDIyLDAwMCBzb2xkaWVycyBhdCB0aGUgc3RhcnQgdG8gYSBtZXJlIDEwLDAwMCByZXR1cm5pbmcuIiwgb3V0LndpZHRoPSIxMDAlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDMvTWluYXJkZnJlbmNoLnBuZyIpDQpgYGANCg0KVGhlIHRocmVhZCBjb25uZWN0aW5nIFBsYXlmYWlyLCBTbm93LCBhbmQgTWluYXJkIHRvIG1vZGVybiBwcmFjdGl0aW9uZXJzIGlzIGEgY29tbWl0bWVudCB0byAqKmhvbmVzdHksIGNsYXJpdHksIGFuZCBlZmZpY2llbmN5KiogaW4gdmlzdWFsIGNvbW11bmljYXRpb24uIFRoZXNlIGFyZSB0aGUgZGVzaWduIHByaW5jaXBsZXMgd2Ugbm93IHR1cm4gdG8uDQoNCiMjIFR1ZnRlJ3MgRGF0YS1JbmsgUmF0aW8NCg0KRWR3YXJkIFR1ZnRlIGlzIGFyZ3VhYmx5IHRoZSBtb3N0IGluZmx1ZW50aWFsIHRoaW5rZXIgaW4gZGF0YSB2aXN1YWxpemF0aW9uIGRlc2lnbi4gSGlzIGNvcmUgY29uY2VwdCBpcyB0aGUgKipkYXRhLWluayByYXRpbyoqOg0KDQokJFx0ZXh0e0RhdGEtaW5rIHJhdGlvfSA9IFxmcmFje1x0ZXh0e0RhdGEtaW5rfX17XHRleHR7VG90YWwgaW5rIHVzZWQgaW4gdGhlIGdyYXBoaWN9fSQkDQoNClRoZSBwcmluY2lwbGUgaXMgc2ltcGxlOiAqKm1heGltaXplIHRoZSBzaGFyZSBvZiBpbmsgKG9yIHBpeGVscykgZGV2b3RlZCB0byBkaXNwbGF5aW5nIGFjdHVhbCBkYXRhKiouIEV2ZXJ5dGhpbmcgZWxzZSAtLSB1bm5lY2Vzc2FyeSBncmlkbGluZXMsIGhlYXZ5IGJvcmRlcnMsIGRlY29yYXRpdmUgc2hhZGluZywgcmVkdW5kYW50IGxhYmVscywgM0QgZWZmZWN0cyAtLSBpcyAibm9uLWRhdGEtaW5rIiB0aGF0IHNob3VsZCBiZSBlbGltaW5hdGVkIG9yIG1pbmltaXplZC4gVHVmdGUgY2FsbHMgZXhjZXNzaXZlIG5vbi1kYXRhLWluayAqKmNoYXJ0anVuayoqLg0KDQpUaGlzIGRvZXMgbm90IG1lYW4gY2hhcnRzIHNob3VsZCBiZSB1Z2x5IG9yIGF1c3RlcmUuIEl0IG1lYW5zIGV2ZXJ5IHZpc3VhbCBlbGVtZW50IHNob3VsZCBlYXJuIGl0cyBwbGFjZSBieSBjb21tdW5pY2F0aW5nIHNvbWV0aGluZyB1c2VmdWwuIElmIGFuIGVsZW1lbnQgY2FuIGJlIHJlbW92ZWQgd2l0aG91dCBsb3NpbmcgaW5mb3JtYXRpb24sIGl0IHByb2JhYmx5IHNob3VsZCBiZS4NCg0KIyMjIERhdGEtSW5rIERlbW86IFNldHRpbmcgVXAgdGhlIERhdGENCg0KTGV0IHVzIHNlZSB0aGlzIGluIHByYWN0aWNlIHN0ZXAgYnkgc3RlcC4gRmlyc3Qgd2UgY3JlYXRlIGEgc2ltcGxlIGRhdGFzZXQ6DQoNCmBgYHtyIGRhdGEtaW5rLXNldHVwLCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KbGlicmFyeSh0aWR5dmVyc2UpDQpsaWJyYXJ5KHBhdGNod29yaykNCg0KZGZfYnVkZ2V0IDwtIHRpYmJsZSgNCiAgY2F0ZWdvcnkgPSBjKCJQcm9kdWN0IEEiLCAiUHJvZHVjdCBCIiwgIlByb2R1Y3QgQyIsICJQcm9kdWN0IEQiLCAiUHJvZHVjdCBFIiksDQogIHZhbHVlID0gYyg0NSwgNzIsIDM4LCA2MSwgNTMpDQopDQpgYGANCg0KIyMjIERhdGEtSW5rIERlbW86IFRoZSBDbHV0dGVyZWQgVmVyc2lvbg0KDQpOb3cgd2UgY3JlYXRlIGEgYmFyIGNoYXJ0IGhlYXZ5IHdpdGggY2hhcnRqdW5rIC0tIHVubmVjZXNzYXJ5IGdyaWRsaW5lcywgYSBmaWxsZWQgYmFja2dyb3VuZCwgYW5kIG5vIGRpcmVjdCBsYWJlbHM6DQoNCmBgYHtyIGRhdGEtaW5rLWJlZm9yZSwgZmlnLndpZHRoPTUsIGZpZy5oZWlnaHQ9NH0NCnBfY2x1dHRlcmVkIDwtIGdncGxvdChkZl9idWRnZXQsIGFlcyh4ID0gY2F0ZWdvcnksIHkgPSB2YWx1ZSkpICsNCiAgZ2VvbV9iYXIoc3RhdCA9ICJpZGVudGl0eSIsIGZpbGwgPSAiIzAwMjk2NyIsIHdpZHRoID0gMC41KSArDQogIHRoZW1lX2dyYXkoYmFzZV9zaXplID0gMTMpICsNCiAgdGhlbWUocGFuZWwuZ3JpZC5tYWpvci54ID0gZWxlbWVudF9saW5lKCksDQogICAgICAgIHBhbmVsLmdyaWQubWlub3IgPSBlbGVtZW50X2xpbmUoKSkgKw0KICBsYWJzKHRpdGxlID0gIkJlZm9yZTogTG93IGRhdGEtaW5rIHJhdGlvIiwNCiAgICAgICB4ID0gIkNhdGVnb3J5IiwgeSA9ICJWYWx1ZSIpDQoNCnBfY2x1dHRlcmVkDQpgYGANCg0KIyMjIERhdGEtSW5rIERlbW86IFRoZSBDbGVhbiBWZXJzaW9uDQoNCk5vdyB3ZSBzdHJpcCBhd2F5IHRoZSBjaGFydGp1bmsgYW5kIGFkZCBkaXJlY3QgbGFiZWxzLiBDb21wYXJlIHRoZSB0d286DQoNCmBgYHtyIGRhdGEtaW5rLWFmdGVyLCBmaWcud2lkdGg9MTAsIGZpZy5oZWlnaHQ9NH0NCnBfY2xlYW4gPC0gZ2dwbG90KGRmX2J1ZGdldCwgYWVzKHggPSBjYXRlZ29yeSwgeSA9IHZhbHVlKSkgKw0KICBnZW9tX2JhcihzdGF0ID0gImlkZW50aXR5IiwgZmlsbCA9ICIjMDAyOTY3Iiwgd2lkdGggPSAwLjUpICsNCiAgZ2VvbV90ZXh0KGFlcyhsYWJlbCA9IHZhbHVlKSwgdmp1c3QgPSAtMC41LCBzaXplID0gNCwgY29sb3IgPSAiIzAwMjk2NyIpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykgKw0KICB0aGVtZShwYW5lbC5ncmlkLm1ham9yLnggPSBlbGVtZW50X2JsYW5rKCksDQogICAgICAgIHBhbmVsLmdyaWQubWlub3IgPSBlbGVtZW50X2JsYW5rKCksDQogICAgICAgIGF4aXMudGl0bGUgPSBlbGVtZW50X2JsYW5rKCkpICsNCiAgbGFicyh0aXRsZSA9ICJBZnRlcjogSGlnaCBkYXRhLWluayByYXRpbyIpDQoNCnBfY2x1dHRlcmVkICsgcF9jbGVhbg0KYGBgDQoNClRoZSAiYWZ0ZXIiIHZlcnNpb24gY29tbXVuaWNhdGVzIHRoZSBzYW1lIGRhdGEgbW9yZSBlZmZlY3RpdmVseS4gVGhlIGdyaWRsaW5lcyBhcmUgZ29uZSBiZWNhdXNlIHRoZSBkaXJlY3QgbGFiZWxzIG1ha2UgdGhlbSB1bm5lY2Vzc2FyeS4gVGhlIGF4aXMgdGl0bGUgaXMgcmVtb3ZlZCBiZWNhdXNlIHRoZSBjYXRlZ29yeSBsYWJlbHMgYXJlIHNlbGYtZXhwbGFuYXRvcnkuIEV2ZXJ5IHJlbWFpbmluZyBlbGVtZW50IHNlcnZlcyBhIHB1cnBvc2UuDQoNCjo6OiB7LmNhbGxvdXQtdGlwfQ0KKipQcmFjdGljYWwgcnVsZSBvZiB0aHVtYjoqKiBBZnRlciBjcmVhdGluZyBhIGNoYXJ0LCBhc2sgeW91cnNlbGY6ICJDYW4gSSByZW1vdmUgdGhpcyBlbGVtZW50IHdpdGhvdXQgbG9zaW5nIGluZm9ybWF0aW9uPyIgSWYgdGhlIGFuc3dlciBpcyB5ZXMsIHJlbW92ZSBpdC4gUmVwZWF0IHVudGlsIHRoZSBhbnN3ZXIgaXMgbm8gZm9yIGV2ZXJ5IHJlbWFpbmluZyBlbGVtZW50Lg0KOjo6DQoNCiMjIFRoZSBMaWUgRmFjdG9yDQoNClRoZSAqKmxpZSBmYWN0b3IqKiBtZWFzdXJlcyB0aGUgZGVncmVlIHRvIHdoaWNoIGEgZ3JhcGhpYyBkaXN0b3J0cyB0aGUgdW5kZXJseWluZyBkYXRhOg0KDQokJFx0ZXh0e0xpZSBmYWN0b3J9ID0gXGZyYWN7XHRleHR7U2l6ZSBvZiBlZmZlY3Qgc2hvd24gaW4gdGhlIGdyYXBoaWN9fXtcdGV4dHtTaXplIG9mIGVmZmVjdCBpbiB0aGUgZGF0YX19JCQNCg0KQSBsaWUgZmFjdG9yIG9mIDEuMCBtZWFucyB0aGUgZ3JhcGhpYyBmYWl0aGZ1bGx5IHJlcHJlc2VudHMgdGhlIGRhdGEuIFR1ZnRlIGFyZ3VlcyB0aGF0IGxpZSBmYWN0b3JzIGFib3ZlIDEuMDUgb3IgYmVsb3cgMC45NSByZXByZXNlbnQgc2lnbmlmaWNhbnQgZGlzdG9ydGlvbnMuDQoNCiMjIyBEaXN0b3J0ZWQgUHJvcG9ydGlvbnMNCg0KV2hlbiBncmFwaGljYWwgcmVwcmVzZW50YXRpb25zIG9mIHF1YW50aXRpZXMgdXNlIGFyZWEgb3Igdm9sdW1lIHJhdGhlciB0aGFuIGxlbmd0aCwgZGlzdG9ydGlvbiBvZnRlbiBmb2xsb3dzOg0KDQpgYGB7ciBzaHJpbmtpbmctZG9jdG9yLCBlY2hvPUZBTFNFLCBmaWcuY2FwPSJUaGUgJ3Nocmlua2luZyBkb2N0b3InIC0tIHRoZSBmaWd1cmUgc2hyaW5rcyBmYXN0ZXIgdGhhbiB0aGUgdW5kZXJseWluZyBkYXRhIHdhcnJhbnRzLCBkcmFtYXRpY2FsbHkgZXhhZ2dlcmF0aW5nIHRoZSBkZWNsaW5lLiIsIG91dC53aWR0aD0iNjAlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDMvbGllc2hyaW5raW5nZG9jdG9yLnBuZyIpDQpgYGANCg0KYGBge3Igc2hyaW5raW5nLWRvbGxhciwgZWNobz1GQUxTRSwgZmlnLmNhcD0iVGhlICdzaHJpbmtpbmcgZG9sbGFyJyAtLSB0aGUgdmlzdWFsIHNocmlua2FnZSBmYXIgZXhjZWVkcyB0aGUgYWN0dWFsIGRlY2xpbmUgaW4gcHVyY2hhc2luZyBwb3dlciwgcHJvZHVjaW5nIGEgbGllIGZhY3RvciB3ZWxsIGFib3ZlIDEuIiwgb3V0LndpZHRoPSI2MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMy9saWVzaHJpbmtpbmdkb2xsYXIucG5nIikNCmBgYA0KDQojIyMgVHJ1bmNhdGVkIEF4ZXMNCg0KT25lIG9mIHRoZSBtb3N0IGNvbW1vbiBmb3JtcyBvZiBkZWNlcHRpb24gaXMgdHJ1bmNhdGluZyB0aGUgeS1heGlzIG9mIGEgYmFyIGNoYXJ0LiBCZWNhdXNlIGJhcnMgZW5jb2RlIHF1YW50aXR5IHRocm91Z2ggdGhlaXIgKipsZW5ndGgqKiAoZnJvbSB6ZXJvIHRvIHRoZSBkYXRhIHZhbHVlKSwgc3RhcnRpbmcgdGhlIGF4aXMgYXQgYSBub24temVybyB2YWx1ZSBjYW4gbWFrZSBzbWFsbCBkaWZmZXJlbmNlcyBhcHBlYXIgZW5vcm1vdXMuDQoNCkxldCB1cyBzZWUgdGhpcyB3aXRoIFIgY29kZS4gRmlyc3QsIHRoZSBkYXRhOg0KDQpgYGB7ciB0cnVuY2F0ZWQtZGF0YX0NCmRmX3NhbGVzIDwtIHRpYmJsZSgNCiAgcXVhcnRlciA9IGMoIlExIiwgIlEyIiwgIlEzIiwgIlE0IiksDQogIHJldmVudWUgPSBjKDk4LCAxMDEsIDEwMywgMTA1KQ0KKQ0KYGBgDQoNCk5vdyB0aGUgc2lkZS1ieS1zaWRlIGNvbXBhcmlzb246DQoNCmBgYHtyIHRydW5jYXRlZC1heGlzLWRlbW8sIGZpZy53aWR0aD0xMCwgZmlnLmhlaWdodD00fQ0KcF9taXNsZWFkaW5nIDwtIGdncGxvdChkZl9zYWxlcywgYWVzKHggPSBxdWFydGVyLCB5ID0gcmV2ZW51ZSkpICsNCiAgZ2VvbV9jb2woZmlsbCA9ICIjQzQxRTNBIikgKw0KICBjb29yZF9jYXJ0ZXNpYW4oeWxpbSA9IGMoOTYsIDEwNikpICsNCiAgbGFicyh0aXRsZSA9ICJNaXNsZWFkaW5nOiBUcnVuY2F0ZWQgYXhpcyIsDQogICAgICAgc3VidGl0bGUgPSAiTG9va3MgbGlrZSByZXZlbnVlIHRyaXBsZWQhIiwNCiAgICAgICB5ID0gIlJldmVudWUgKCRNKSIpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykNCg0KcF9ob25lc3QgPC0gZ2dwbG90KGRmX3NhbGVzLCBhZXMoeCA9IHF1YXJ0ZXIsIHkgPSByZXZlbnVlKSkgKw0KICBnZW9tX2NvbChmaWxsID0gIiMwMDI5NjciKSArDQogIGNvb3JkX2NhcnRlc2lhbih5bGltID0gYygwLCAxMTApKSArDQogIGxhYnModGl0bGUgPSAiSG9uZXN0OiBGdWxsIGF4aXMiLA0KICAgICAgIHN1YnRpdGxlID0gIlJldmVudWUgZ3JldyBtb2Rlc3RseSAofjclKSIsDQogICAgICAgeSA9ICJSZXZlbnVlICgkTSkiKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpDQoNCnBfbWlzbGVhZGluZyArIHBfaG9uZXN0DQpgYGANCg0KVGhlIGxlZnQgcGFuZWwgbWFrZXMgaXQgbG9vayBsaWtlIHJldmVudWUgdHJpcGxlZCBmcm9tIFExIHRvIFE0LiBUaGUgcmlnaHQgcGFuZWwgcmV2ZWFscyB0aGUgdHJ1dGg6IHJldmVudWUgZ3JldyBieSBhYm91dCA3JS4gU2FtZSBkYXRhLCByYWRpY2FsbHkgZGlmZmVyZW50IGltcHJlc3Npb25zLg0KDQo6Ojogey5jYWxsb3V0LXdhcm5pbmd9DQoqKkltcG9ydGFudCBudWFuY2U6KiogVHJ1bmNhdGVkIGF4ZXMgYXJlIG5vdCAqYWx3YXlzKiBkZWNlcHRpdmUuIEZvciBsaW5lIGNoYXJ0cyBzaG93aW5nIGNoYW5nZSBvdmVyIHRpbWUsIGEgbm9uLXplcm8gYmFzZWxpbmUgY2FuIGJlIGFwcHJvcHJpYXRlIGJlY2F1c2UgdGhlIHZpc3VhbCBlbmNvZGluZyBpcyBwb3NpdGlvbi9zbG9wZSwgbm90IGxlbmd0aC4gVGhlIHJ1bGUgaXM6ICoqYmFyIGNoYXJ0cyBtdXN0IHN0YXJ0IGF0IHplcm87IGxpbmUgY2hhcnRzIGNhbiBzb21ldGltZXMganVzdGlmeSBhIG5vbi16ZXJvIGJhc2VsaW5lKiogLS0gYnV0IGFsd2F5cyBsYWJlbCB5b3VyIGF4ZXMgY2xlYXJseS4NCjo6Og0KDQpgYGB7ciBoaWdod2F5LWxpZSwgZWNobz1GQUxTRSwgZmlnLmNhcD0iTGllIGZhY3RvciBpbiBhIGhpZ2h3YXkgZnVlbCBzdGFuZGFyZHMgZ3JhcGhpYy4gVGhlIHZpc3VhbCBpbXByZXNzaW9uIGV4YWdnZXJhdGVzIHRoZSBhY3R1YWwgZGF0YSBjaGFuZ2UuIiwgb3V0LndpZHRoPSI2MCUifQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMy9saWVmYWN0b3JoaWdod2F5LnBuZyIpDQpgYGANCg0KIyMgU2xvcGVncmFwaHMNCg0KQSAqKnNsb3BlZ3JhcGgqKiBpcyBhIGNoYXJ0IGRlc2lnbmVkIHRvIHNob3cgY2hhbmdlIGJldHdlZW4gdHdvIChvciBvY2Nhc2lvbmFsbHkgbW9yZSkgdGltZSBwb2ludHMgZm9yIG11bHRpcGxlIGNhdGVnb3JpZXMuIEl0IGNvbnNpc3RzIG9mIHR3byB2ZXJ0aWNhbCBheGVzIGNvbm5lY3RlZCBieSBsaW5lcywgd2hlcmUgdGhlIHNsb3BlIGFuZCBkaXJlY3Rpb24gb2YgZWFjaCBsaW5lIGltbWVkaWF0ZWx5IGNvbnZleSB3aGV0aGVyIGEgY2F0ZWdvcnkgaW5jcmVhc2VkLCBkZWNyZWFzZWQsIG9yIHJlbWFpbmVkIHN0YWJsZS4NCg0KYGBge3Igc2xvcGVncmFwaC1pbWFnZSwgZWNobz1GQUxTRSwgZmlnLmNhcD0iQSBzbG9wZWdyYXBoIHNob3dpbmcgY2hhbmdlIGFjcm9zcyB0d28gdGltZSBwZXJpb2RzLiBUaGUgc2xvcGUgb2YgZWFjaCBsaW5lIGltbWVkaWF0ZWx5IGNvbW11bmljYXRlcyB0aGUgZGlyZWN0aW9uIGFuZCBtYWduaXR1ZGUgb2YgY2hhbmdlLiIsIG91dC53aWR0aD0iNjAlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDMvc2xvcGVncmFwaC5wbmciKQ0KYGBgDQoNClNsb3BlZ3JhcGhzIGFyZSBhIGJlYXV0aWZ1bGx5IG1pbmltYWxpc3QgZGVzaWduLiBUaGV5IHVzZSBkaXJlY3QgbGFiZWxpbmcgKG5vIGxlZ2VuZCBuZWVkZWQpLCBhbmQgdGhlIHZpc3VhbCBlbmNvZGluZyAtLSBzbG9wZSAtLSBpcyBvbmUgb2YgdGhlIG1vc3QgaW50dWl0aXZlIGZvciB0aGUgaHVtYW4gZXllLiBUaGV5IGFyZSBlc3BlY2lhbGx5IGVmZmVjdGl2ZSBmb3I6DQoNCi0gQ29tcGFyaW5nIHJhbmtpbmdzIGFjcm9zcyB0d28gdGltZSBwb2ludHMNCi0gU2hvd2luZyB3aGljaCBjYXRlZ29yaWVzIGltcHJvdmVkIGFuZCB3aGljaCBkZWNsaW5lZA0KLSBIaWdobGlnaHRpbmcgdGhlIG1hZ25pdHVkZSBvZiBjaGFuZ2UgdGhyb3VnaCB0aGUgc3RlZXBuZXNzIG9mIHRoZSBsaW5lDQoNCiMjIERlc2lnbmluZyBmb3IgQ2xhcml0eQ0KDQpCZXlvbmQgVHVmdGUncyBzcGVjaWZpYyBwcmluY2lwbGVzLCBzZXZlcmFsIGJyb2FkZXIgZ3VpZGVsaW5lcyBoZWxwIHByb2R1Y2UgY2xlYXIsIGVmZmVjdGl2ZSB2aXN1YWxpemF0aW9uczoNCg0KKipMYWJlbCBkaXJlY3RseS4qKiBXaGVuZXZlciBwb3NzaWJsZSwgbGFiZWwgZGF0YSBlbGVtZW50cyBkaXJlY3RseSBvbiB0aGUgY2hhcnQgcmF0aGVyIHRoYW4gcmVseWluZyBvbiBhIHNlcGFyYXRlIGxlZ2VuZC4gTGVnZW5kcyBmb3JjZSB0aGUgdmlld2VyIHRvIGxvb2sgYmFjayBhbmQgZm9ydGggYmV0d2VlbiB0aGUgcGxvdCBhbmQgdGhlIGtleSwgaW5jcmVhc2luZyBjb2duaXRpdmUgbG9hZC4NCg0KKipVc2UgY29sb3IgcHVycG9zZWZ1bGx5LioqIENvbG9yIHNob3VsZCBlbmNvZGUgbWVhbmluZywgbm90IHNlcnZlIGFzIGRlY29yYXRpb24uIFJlc2VydmUgY29sb3IgZm9yIGRpc3Rpbmd1aXNoaW5nIGdyb3VwcywgaGlnaGxpZ2h0aW5nIGEga2V5IGZpbmRpbmcsIG9yIGVuY29kaW5nIGEgdmFyaWFibGUuIEF2b2lkICJyYWluYm93IiBjb2xvciBzY2hlbWVzIHRoYXQgaGF2ZSBubyBuYXR1cmFsIG9yZGVyaW5nLg0KDQoqKk9yZGVyIGRhdGEgbWVhbmluZ2Z1bGx5LioqIERlZmF1bHQgYWxwaGFiZXRpY2FsIG9yZGVyaW5nIGlzIHJhcmVseSB0aGUgYmVzdCBjaG9pY2UuIE9yZGVyIGJhcnMgYnkgdmFsdWUuIE9yZGVyIHRpbWUgc2VyaWVzIGNocm9ub2xvZ2ljYWxseS4gKipUaGUgb3JkZXIgb2YgZGF0YSBpbiBhIGNoYXJ0IGlzIGEgZGVzaWduIGRlY2lzaW9uKiosIGFuZCBpdCBzaG91bGQgc2VydmUgdGhlIHZpZXdlcidzIHVuZGVyc3RhbmRpbmcuDQoNCioqUmVkdWNlIGNvZ25pdGl2ZSBsb2FkLioqIEV2ZXJ5IHVubmVjZXNzYXJ5IGVsZW1lbnQgYWRkcyB0byB0aGUgdmlld2VyJ3MgY29nbml0aXZlIGJ1cmRlbi4gR3JpZGxpbmVzLCBib3JkZXJzLCBiYWNrZ3JvdW5kIHNoYWRpbmcsIHRpY2sgbWFya3MsIHJlZHVuZGFudCBheGlzIGxhYmVscyAtLSBlYWNoIGRlbWFuZHMgYSBzbWFsbCBhbW91bnQgb2YgYXR0ZW50aW9uLiBJbmRpdmlkdWFsbHkgdGhleSBhcmUgdHJpdmlhbCwgYnV0IGNvbGxlY3RpdmVseSB0aGV5IGNhbiBvYnNjdXJlIHRoZSBkYXRhLg0KDQpgYGB7ciBnZWxtYW4tbWFwLCBlY2hvPUZBTFNFLCBmaWcuY2FwPSJBbmRyZXcgR2VsbWFuJ3MgcmVkZXNpZ25lZCB2b3VjaGVyIG1hcCAtLSBhIGNsZWFyIGV4YW1wbGUgb2YgdGhvdWdodGZ1bCBkZXNpZ24gY2hvaWNlcyBzZXJ2aW5nIHRoZSBkYXRhLiIsIG91dC53aWR0aD0iNzAlIn0NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvMDMvZ2VsbWFudm91Y2hlcm1hcC5wbmciKQ0KYGBgDQoNCi0tLQ0KDQo6Ojogey5jYWxsb3V0LWlnbmF0aWFufQ0KKipJZ25hdGlhbiBSZWZsZWN0aW9uOiBTZWVpbmcgQ2xlYXJseSBhbmQgRGVzaWduaW5nIEhvbmVzdGx5KioNCg0KVGhlIElnbmF0aWFuIHRyYWRpdGlvbiBwbGFjZXMgZ3JlYXQgZW1waGFzaXMgb24gKipkaXNjZXJubWVudCoqIC0tIHRoZSBwcmFjdGljZSBvZiBwZXJjZWl2aW5nIHJlYWxpdHkgYXMgaXQgdHJ1bHkgaXMsIGZyZWUgZnJvbSBkaXN0b3J0aW9uIGFuZCBzZWxmLWRlY2VwdGlvbi4gVGhpcyB3ZWVrJ3MgbWF0ZXJpYWwgcmV2ZWFscyBob3cgZWFzaWx5IG91ciBwZXJjZXB0aW9uIGNhbiBiZSBtYW5pcHVsYXRlZC4gQSAzRCBwaWUgY2hhcnQgZXhwbG9pdHMgb3VyIHBvb3IgYWJpbGl0eSB0byBqdWRnZSB2b2x1bWUuIEEgcmFpbmJvdyBjb2xvciBzY2FsZSBvYnNjdXJlcyB0aGUgdHJ1ZSBtYWduaXR1ZGUgb2YgZGlmZmVyZW5jZXMuIEEgdHJ1bmNhdGVkIGF4aXMgZXhhZ2dlcmF0ZXMgYSBtb2Rlc3QgY2hhbmdlIGludG8gYSBkcmFtYXRpYyBvbmUuDQoNCkF0IEdvbnphZ2EsIHdlIGFyZSBndWlkZWQgYnkgdGhlIElnbmF0aWFuIHByaW5jaXBsZSBvZiAqbWFnaXMqIC0tIHRoZSByZWxlbnRsZXNzIHB1cnN1aXQgb2YgdGhlIGdyZWF0ZXIgZ29vZCwgb2YgZG9pbmcgdGhpbmdzIG5vdCBqdXN0IGFkZXF1YXRlbHkgYnV0IHdpdGggZXhjZWxsZW5jZSBhbmQgaW50ZWdyaXR5LiBJbiBkYXRhIHZpc3VhbGl6YXRpb24sIG1hZ2lzIG1lYW5zIHN0cmlwcGluZyBhd2F5IHRoZSB1bm5lY2Vzc2FyeSBzbyB0aGF0IHRydXRoIGNhbiBlbWVyZ2UgY2xlYXJseS4gSXQgbWVhbnMgY2hvb3NpbmcgaG9uZXN0IHNjYWxlcywgZmFpdGhmdWwgcmVwcmVzZW50YXRpb25zLCBhbmQgZGVzaWducyB0aGF0IHNlcnZlIHRoZSB2aWV3ZXIgcmF0aGVyIHRoYW4gdGhlIGRlc2lnbmVyJ3MgYWdlbmRhLg0KDQpUaGUgcHJpbmNpcGxlIG9mICoqQ3VyYSBQZXJzb25hbGlzKiogKGNhcmUgZm9yIHRoZSB3aG9sZSBwZXJzb24pIGNhbGxzIHVzIHRvIGNvbnNpZGVyIG91ciBhdWRpZW5jZSdzIG5lZWRzOiBDYW4gYSBjb2xvcmJsaW5kIHZpZXdlciByZWFkIHRoaXMgY2hhcnQ/IERvZXMgdGhpcyBlbmNvZGluZyBhY2N1cmF0ZWx5IHJlcHJlc2VudCB0aGUgdW5kZXJseWluZyBkYXRhPyBBbSBJIG1ha2luZyB0aGUgdHJ1dGggZWFzaWVyIHRvIHNlZSwgb3IgaGFyZGVyPw0KDQpBIGxpZSBmYWN0b3IgZ3JlYXRlciB0aGFuIDEgaXMsIGluIGEgdmVyeSByZWFsIHNlbnNlLCBhIGxpZSB0b2xkIHdpdGggZGF0YS4gQXMgeW91IGRldmVsb3AgeW91ciB2aXN1YWxpemF0aW9uIHNraWxscywgY29tbWl0IHRvIGEgc2ltcGxlIHN0YW5kYXJkOiAqKmxldCB0aGUgZGF0YSBzcGVhayB0cnV0aGZ1bGx5LCBhbmQgZGVzaWduIHlvdXIgY2hhcnRzIHRvIGFtcGxpZnkgdGhhdCB0cnV0aCwgbm90IGRpc3RvcnQgaXQuKioNCjo6Og0KDQotLS0NCg0KIyMgU3VtbWFyeTogQSBQZXJjZXB0aW9uIGFuZCBEZXNpZ24gQ2hlY2tsaXN0DQoNCldoZW4gZGVzaWduaW5nIG9yIGV2YWx1YXRpbmcgYSB2aXN1YWxpemF0aW9uLCBydW4gdGhyb3VnaCB0aGlzIGNoZWNrbGlzdDoNCg0KfCBQcmluY2lwbGUgfCBRdWVzdGlvbiB0byBBc2sgfA0KfC0tLXwtLS18DQp8ICoqUHJlYXR0ZW50aXZlIGF0dHJpYnV0ZXMqKiB8IERvZXMgdGhlIG1vc3QgaW1wb3J0YW50IGluZm9ybWF0aW9uIHBvcCBvdXQgaW1tZWRpYXRlbHk/IHwNCnwgKipHZXN0YWx0IGdyb3VwaW5nKiogfCBBcmUgdmlzdWFsIGdyb3VwcyBhbGlnbmVkIHdpdGggZGF0YSBncm91cHM/IHwNCnwgKipDbGV2ZWxhbmQgJiBNY0dpbGwqKiB8IEFtIEkgdXNpbmcgdGhlIG1vc3QgYWNjdXJhdGUgZW5jb2RpbmcgZm9yIHRoZSBrZXkgY29tcGFyaXNvbj8gfA0KfCAqKkNvbG9yIHBhbGV0dGUqKiB8IElzIG15IHBhbGV0dGUgYXBwcm9wcmlhdGUgZm9yIHRoZSBkYXRhIHR5cGUgKHNlcXVlbnRpYWwsIGRpdmVyZ2luZywgcXVhbGl0YXRpdmUpPyB8DQp8ICoqQ29sb3JibGluZG5lc3MqKiB8IFdvdWxkIGEgY29sb3JibGluZCB2aWV3ZXIgZ2V0IHRoZSBzYW1lIG1lc3NhZ2U/IHwNCnwgKipXb3JraW5nIG1lbW9yeSoqIHwgQ2FuIHRoZSB2aWV3ZXIgdW5kZXJzdGFuZCB0aGUgY2hhcnQgd2l0aG91dCBjb25zdGFudGx5IGNvbnN1bHRpbmcgYSBsZWdlbmQ/IHwNCnwgKipEYXRhLWluayByYXRpbyoqIHwgQ2FuIEkgcmVtb3ZlIGFueSBlbGVtZW50IHdpdGhvdXQgbG9zaW5nIGluZm9ybWF0aW9uPyB8DQp8ICoqTGllIGZhY3RvcioqIHwgRG9lcyB0aGUgdmlzdWFsIGltcHJlc3Npb24gbWF0Y2ggdGhlIG1hZ25pdHVkZSBvZiB0aGUgZGF0YT8gfA0KfCAqKkF4aXMgaW50ZWdyaXR5KiogfCBEbyBiYXIgY2hhcnRzIHN0YXJ0IGF0IHplcm8/IEFyZSBzY2FsZXMgbGFiZWxlZCBjbGVhcmx5PyB8DQoNCi0tLQ0KDQojIyBFeGVyY2lzZXMNCg0KOjo6IHsuZXhlcmNpc2UtYmxvY2t9DQo6Ojogey5leGVyY2lzZS1oZWFkZXJ9DQpXZWVrIDIgRXhlcmNpc2VzDQo6OjoNCjo6OiB7LmV4ZXJjaXNlLWJvZHl9DQoNCioqRXhlcmNpc2UgMTogUHJlYXR0ZW50aXZlIEF0dHJpYnV0ZXMgYW5kIHRoZSBQZXJjZXB0dWFsIEhpZXJhcmNoeSoqDQoNClVzaW5nIHRoZSBgZGlhbW9uZHNgIGRhdGFzZXQsIGNyZWF0ZSB0d28gY2hhcnRzIG9mIHRoZSBkaXN0cmlidXRpb24gb2YgZGlhbW9uZCBgY3V0YCBxdWFsaXR5IC0tIGEgYmFyIGNoYXJ0IGFuZCBhIHBpZSBjaGFydC4gRmlsbCBpbiB0aGUgYmxhbmtzIGluIHRoZSBjb2RlIGJlbG93LCB0aGVuIHdyaXRlIDItMyBzZW50ZW5jZXMgY29tcGFyaW5nIHdoaWNoIGNoYXJ0IG1ha2VzIGl0IGVhc2llciB0byBjb21wYXJlIGNhdGVnb3JpZXMgYW5kIHdoeSwgcmVmZXJlbmNpbmcgQ2xldmVsYW5kICYgTWNHaWxsJ3MgaGllcmFyY2h5Lg0KDQpgYGB7ciBleGVyY2lzZTEtdGVtcGxhdGUsIGV2YWw9RkFMU0V9DQpsaWJyYXJ5KHRpZHl2ZXJzZSkNCmxpYnJhcnkocGF0Y2h3b3JrKQ0KDQpjdXRfY291bnRzIDwtIGRpYW1vbmRzICU+JSBjb3VudChjdXQpDQoNCiMgQmFyIGNoYXJ0IC0tIGZpbGwgaW4gdGhlIG1pc3NpbmcgYWVzdGhldGljIGFuZCBnZW9tDQpwX2JhciA8LSBnZ3Bsb3QoY3V0X2NvdW50cywgYWVzKHggPSBmY3RfcmVvcmRlcihjdXQsIG4pLCB5ID0gX19fKSkgKw0KICBnZW9tX2NvbChmaWxsID0gIiMwMDI5NjciKSArDQogIGNvb3JkX2ZsaXAoKSArDQogIGxhYnModGl0bGUgPSAiQmFyIENoYXJ0OiBEaWFtb25kIEN1dCBRdWFsaXR5IiwNCiAgICAgICB4ID0gTlVMTCwgeSA9ICJDb3VudCIpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykNCg0KIyBQaWUgY2hhcnQgLS0gZmlsbCBpbiB0aGUgbWlzc2luZyBjb29yZCBmdW5jdGlvbg0KcF9waWUgPC0gZ2dwbG90KGN1dF9jb3VudHMsIGFlcyh4ID0gIiIsIHkgPSBuLCBmaWxsID0gY3V0KSkgKw0KICBnZW9tX2NvbCh3aWR0aCA9IDEpICsNCiAgX19fKHRoZXRhID0gInkiKSArDQogIHNjYWxlX2ZpbGxfYnJld2VyKHBhbGV0dGUgPSAiU2V0MiIpICsNCiAgbGFicyh0aXRsZSA9ICJQaWUgQ2hhcnQ6IERpYW1vbmQgQ3V0IFF1YWxpdHkiLCBmaWxsID0gIkN1dCIpICsNCiAgdGhlbWVfdm9pZChiYXNlX3NpemUgPSAxMykNCg0KcF9iYXIgKyBwX3BpZQ0KYGBgDQoNCioqRXhlcmNpc2UgMjogQ29sb3JibGluZC1GcmllbmRseSBSZWRlc2lnbioqDQoNClRoZSBwbG90IGJlbG93IHVzZXMgYSByZWQtZ3JlZW4gY29sb3Igc2NoZW1lIHRoYXQgaXMgbm90IGFjY2Vzc2libGUgdG8gY29sb3JibGluZCB2aWV3ZXJzLiBGaWxsIGluIHRoZSBibGFua3MgdG8gcmVkZXNpZ24gaXQgdXNpbmcgdGhlIHZpcmlkaXMgcGFsZXR0ZSBhbmQgcmVkdW5kYW50IHNoYXBlIGNvZGluZy4NCg0KYGBge3IgZXhlcmNpc2UyLXRlbXBsYXRlLCBldmFsPUZBTFNFfQ0KbGlicmFyeSh0aWR5dmVyc2UpDQoNCiMgT3JpZ2luYWw6IE5PVCBjb2xvcmJsaW5kLWZyaWVuZGx5DQpnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5LCBjb2xvciA9IGRydikpICsNCiAgZ2VvbV9wb2ludChzaXplID0gMykgKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygiNCIgPSAicmVkIiwgImYiID0gImdyZWVuIiwgInIiID0gImJsdWUiKSkgKw0KICBsYWJzKHRpdGxlID0gIk9yaWdpbmFsOiBQb29yIGNvbG9yIGNob2ljZSIsDQogICAgICAgeCA9ICJFbmdpbmUgRGlzcGxhY2VtZW50IChMKSIsIHkgPSAiSGlnaHdheSBNUEciLCBjb2xvciA9ICJEcml2ZSIpICsNCiAgdGhlbWVfbWluaW1hbCgpDQoNCiMgUmVkZXNpZ246IGZpbGwgaW4gdGhlIGJsYW5rcyBmb3IgY29sb3JibGluZC1mcmllbmRseSB2ZXJzaW9uDQpnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5LCBjb2xvciA9IGRydiwgc2hhcGUgPSBfX18pKSArDQogIGdlb21fcG9pbnQoc2l6ZSA9IDMpICsNCiAgc2NhbGVfY29sb3JfdmlyaWRpc19kKG9wdGlvbiA9ICJfX18iKSArDQogIGxhYnModGl0bGUgPSAiUmVkZXNpZ246IENvbG9yYmxpbmQtRnJpZW5kbHkgd2l0aCBSZWR1bmRhbnQgQ29kaW5nIiwNCiAgICAgICB4ID0gIkVuZ2luZSBEaXNwbGFjZW1lbnQgKEwpIiwgeSA9ICJIaWdod2F5IE1QRyIsDQogICAgICAgY29sb3IgPSAiRHJpdmUiLCBzaGFwZSA9ICJEcml2ZSIpICsNCiAgdGhlbWVfbWluaW1hbCgpDQpgYGANCg0KQWZ0ZXIgY3JlYXRpbmcgeW91ciByZWRlc2lnbiwgdGVzdCBpdCB1c2luZyB0aGUgW0NvYmxpcyBjb2xvcmJsaW5kIHNpbXVsYXRvcl0oaHR0cHM6Ly93d3cuY29sb3ItYmxpbmRuZXNzLmNvbS9jb2JsaXMtY29sb3ItYmxpbmRuZXNzLXNpbXVsYXRvci8pIGJ5IHVwbG9hZGluZyBhIHNjcmVlbnNob3Qgb2YgeW91ciBwbG90LiBXcml0ZSAxLTIgc2VudGVuY2VzIGFib3V0IHdoYXQgeW91IG9ic2VydmUuDQoNCioqRXhlcmNpc2UgMzogRGF0YS1JbmsgUmF0aW8gTWFrZW92ZXIqKg0KDQpUaGUgZm9sbG93aW5nIGNvZGUgcHJvZHVjZXMgYSBjaGFydCBvdmVybG9hZGVkIHdpdGggY2hhcnRqdW5rLiBGaWxsIGluIHRoZSBibGFua3MgaW4gdGhlIHJlZGVzaWduZWQgdmVyc2lvbiB0byBtYXhpbWl6ZSB0aGUgZGF0YS1pbmsgcmF0aW8gd2hpbGUga2VlcGluZyB0aGUgY2hhcnQgcmVhZGFibGUuDQoNCmBgYHtyIGV4ZXJjaXNlMy10ZW1wbGF0ZSwgZXZhbD1GQUxTRX0NCmxpYnJhcnkodGlkeXZlcnNlKQ0KbGlicmFyeShwYXRjaHdvcmspDQoNCmRmX2RlcHQgPC0gdGliYmxlKA0KICBkZXBhcnRtZW50ID0gYygiTWFya2V0aW5nIiwgIkVuZ2luZWVyaW5nIiwgIlNhbGVzIiwgIkhSIiwgIkZpbmFuY2UiKSwNCiAgYnVkZ2V0ID0gYygzMjAsIDU4MCwgNDEwLCAxOTAsIDI3NSkNCikNCg0KIyBPcmlnaW5hbDogZnVsbCBvZiBjaGFydGp1bmsNCnBfanVuayA8LSBnZ3Bsb3QoZGZfZGVwdCwgYWVzKHggPSBkZXBhcnRtZW50LCB5ID0gYnVkZ2V0LCBmaWxsID0gZGVwYXJ0bWVudCkpICsNCiAgZ2VvbV9iYXIoc3RhdCA9ICJpZGVudGl0eSIsIGNvbG9yID0gImJsYWNrIiwgbGluZXdpZHRoID0gMS41KSArDQogIHRoZW1lX2RhcmsoKSArDQogIHRoZW1lKHBhbmVsLmdyaWQgPSBlbGVtZW50X2xpbmUoY29sb3IgPSAid2hpdGUiLCBsaW5ld2lkdGggPSAwLjgpLA0KICAgICAgICBsZWdlbmQucG9zaXRpb24gPSAicmlnaHQiKSArDQogIGxhYnModGl0bGUgPSAiQmVmb3JlOiBEZXBhcnRtZW50IEJ1ZGdldHMiLA0KICAgICAgIHggPSAiRGVwYXJ0bWVudCIsIHkgPSAiQnVkZ2V0ICh0aG91c2FuZHMgJCkiLCBmaWxsID0gIkRlcGFydG1lbnQiKQ0KDQojIFJlZGVzaWduOiBmaWxsIGluIHRoZSBibGFua3MgdG8gY2xlYW4gaXQgdXANCnBfdHVmdGUgPC0gZ2dwbG90KGRmX2RlcHQsIGFlcyh4ID0gZmN0X3Jlb3JkZXIoZGVwYXJ0bWVudCwgYnVkZ2V0KSwgeSA9IGJ1ZGdldCkpICsNCiAgZ2VvbV9jb2woZmlsbCA9ICJfX18iLCB3aWR0aCA9IDAuNikgKw0KICBnZW9tX3RleHQoYWVzKGxhYmVsID0gYnVkZ2V0KSwgaGp1c3QgPSAtMC4yLCBzaXplID0gNCwgY29sb3IgPSAiIzAwMjk2NyIpICsNCiAgY29vcmRfZmxpcCgpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykgKw0KICB0aGVtZShwYW5lbC5ncmlkLm1ham9yLl9fXyA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICAgICAgcGFuZWwuZ3JpZC5taW5vciA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICAgICAgYXhpcy50aXRsZSA9IF9fXygpKSArDQogIGxhYnModGl0bGUgPSAiQWZ0ZXI6IERlcGFydG1lbnQgQnVkZ2V0cyIpDQoNCnBfanVuayArIHBfdHVmdGUNCmBgYA0KDQpXcml0ZSBhIGJyaWVmIHBhcmFncmFwaCBleHBsYWluaW5nIHdoYXQgeW91IGNoYW5nZWQgYW5kIHdoeSBlYWNoIGNoYW5nZSBpbXByb3ZlcyB0aGUgZGF0YS1pbmsgcmF0aW8uDQoNCioqRXhlcmNpc2UgNDogRGVjZXB0aXZlIEdyYXBoIEFuYWx5c2lzKioNCg0KRmluZCBhIGRlY2VwdGl2ZSBvciBtaXNsZWFkaW5nIGdyYXBoIHB1Ymxpc2hlZCBpbiBhIHJlYWwtd29ybGQgc291cmNlIChuZXdzIGFydGljbGUsIHNvY2lhbCBtZWRpYSwgY29ycG9yYXRlIHJlcG9ydCwgb3IgcG9saXRpY2FsIGNhbXBhaWduIG1hdGVyaWFsKS4gSW5jbHVkZSB0aGUgaW1hZ2Ugb3IgYSBsaW5rIGluIHlvdXIgUiBNYXJrZG93biBkb2N1bWVudC4gVGhlbiBhbnN3ZXIgdGhlIGZvbGxvd2luZzoNCg0KLSBXaGF0IGlzIHRoZSBjaGFydCB0cnlpbmcgdG8gY29tbXVuaWNhdGU/DQotIFdoYXQgZGVjZXB0aXZlIHRlY2huaXF1ZShzKSBkb2VzIGl0IHVzZT8gKHRydW5jYXRlZCBheGlzLCBhcmVhIGRpc3RvcnRpb24sIGNoZXJyeS1waWNrZWQgdGltZWZyYW1lLCBldGMuKQ0KLSBFc3RpbWF0ZSB0aGUgbGllIGZhY3RvciBpZiBhcHBsaWNhYmxlLiBTaG93IHlvdXIgY2FsY3VsYXRpb24uDQotIFNrZXRjaCBvciBjb2RlIGluIFIgaG93IHlvdSB3b3VsZCByZWRlc2lnbiB0aGUgY2hhcnQgdG8gYmUgaG9uZXN0Lg0KDQpBIGdvb2QgcGxhY2UgdG8gZmluZCBleGFtcGxlcyBpcyB0aGUgW1dURiBWaXN1YWxpemF0aW9uc10oaHR0cHM6Ly92aXoud3RmLykgYXJjaGl2ZS4NCg0KKipFeGVyY2lzZSA1OiBSZWFkaW5nIEFzc2lnbm1lbnQqKg0KDQpSZWFkIHRoZSBmb2xsb3dpbmcgYW5kIHdyaXRlIHRocmVlIGtleSB0YWtlYXdheXMgZnJvbSBlYWNoIGluIHlvdXIgUiBNYXJrZG93biBkb2N1bWVudDoNCg0KLSBXaWxrZSwgQy5PLiAtLSAqRnVuZGFtZW50YWxzIG9mIERhdGEgVmlzdWFsaXphdGlvbiosIENoYXB0ZXJzIDEtMg0KLSBIZWFseSwgSy4gLS0gKkRhdGEgVmlzdWFsaXphdGlvbjogQSBQcmFjdGljYWwgSW50cm9kdWN0aW9uKiwgQ2hhcHRlciAxDQoNCkZvY3VzIG9uOiBXaGF0IHByaW5jaXBsZXMgZnJvbSB0aGlzIHdlZWsgZG8gdGhlIGF1dGhvcnMgZW1waGFzaXplPyBXaGVyZSBkbyB0aGV5IG9mZmVyIGRpZmZlcmVudCBwZXJzcGVjdGl2ZXM/IEhvdyBkbyBUdWZ0ZSdzIGlkZWFzIGFib3V0IGRhdGEtaW5rIHJlbGF0ZSB0byB3aGF0IFdpbGtlIGFuZCBIZWFseSByZWNvbW1lbmQ/DQoNCjo6Og0KOjo6DQoNCi0tLQ0KDQojIyBBdHRyaWJ1dGlvbnMNCg0KOjo6IHsuY2FsbG91dC1pbmZvfQ0KVGhpcyBjb3Vyc2UgbWF0ZXJpYWwgZHJhd3Mgb24gYW5kIGlzIGluc3BpcmVkIGJ5IHRoZSB3b3JrIG9mIG1hbnkgc2Nob2xhcnMgYW5kIHByYWN0aXRpb25lcnM6DQoNCi0gKipWaXZlayBILiBQYXRpbCoqIC0tIGZvdW5kYXRpb25hbCBjb3Vyc2UgZGVzaWduIGFuZCBtYXRlcmlhbHMgZm9yIGRhdGEgdmlzdWFsaXphdGlvbiBhdCBHb256YWdhIFVuaXZlcnNpdHkNCi0gKipDbGV2ZWxhbmQsIFcuUy4gJiBNY0dpbGwsIFIuKiogKDE5ODQpLiAiR3JhcGhpY2FsIFBlcmNlcHRpb246IFRoZW9yeSwgRXhwZXJpbWVudGF0aW9uLCBhbmQgQXBwbGljYXRpb24gdG8gdGhlIERldmVsb3BtZW50IG9mIEdyYXBoaWNhbCBNZXRob2RzLiIgKkpvdXJuYWwgb2YgdGhlIEFtZXJpY2FuIFN0YXRpc3RpY2FsIEFzc29jaWF0aW9uKiwgNzkoMzg3KSwgNTMxLS01NTQuDQotICoqVHVmdGUsIEUuUi4qKiAtLSAqVGhlIFZpc3VhbCBEaXNwbGF5IG9mIFF1YW50aXRhdGl2ZSBJbmZvcm1hdGlvbiogKEdyYXBoaWNzIFByZXNzLCAxOTgzLCAyMDAxKQ0KLSAqKlBsYXlmYWlyLCBXLioqIC0tICpUaGUgQ29tbWVyY2lhbCBhbmQgUG9saXRpY2FsIEF0bGFzKiAoMTc4NikNCi0gKipTbm93LCBKLioqIC0tICpPbiB0aGUgTW9kZSBvZiBDb21tdW5pY2F0aW9uIG9mIENob2xlcmEqICgxODU1KQ0KLSAqKk1pbmFyZCwgQy5KLioqIC0tICpDYXJ0ZSBmaWd1cmF0aXZlIGRlcyBwZXJ0ZXMgc3VjY2Vzc2l2ZXMgZW4gaG9tbWVzIGRlIGwnQXJtZWUgRnJhbmNhaXNlIGRhbnMgbGEgY2FtcGFnbmUgZGUgUnVzc2llIDE4MTItMTgxMyogKDE4NjkpDQotICoqV2FyZSwgQy4qKiAtLSAqSW5mb3JtYXRpb24gVmlzdWFsaXphdGlvbjogUGVyY2VwdGlvbiBmb3IgRGVzaWduKiAoTW9yZ2FuIEthdWZtYW5uKQ0KLSAqKkZldywgUy4qKiAtLSBQZXJjZXB0dWFsIEVkZ2UgcmVzZWFyY2ggYW5kIHB1YmxpY2F0aW9ucyBvbiBkYXNoYm9hcmQgYW5kIHZpc3VhbGl6YXRpb24gZGVzaWduDQotICoqQ2Fpcm8sIEEuKiogLS0gKlRoZSBUcnV0aGZ1bCBBcnQqIGFuZCAqVGhlIEZ1bmN0aW9uYWwgQXJ0Kg0KLSAqKldpbGtlLCBDLk8uKiogLS0gKkZ1bmRhbWVudGFscyBvZiBEYXRhIFZpc3VhbGl6YXRpb24qIChPJ1JlaWxseSwgMjAxOSkNCi0gKipIZWFseSwgSy4qKiAtLSAqRGF0YSBWaXN1YWxpemF0aW9uOiBBIFByYWN0aWNhbCBJbnRyb2R1Y3Rpb24qIChQcmluY2V0b24gVW5pdmVyc2l0eSBQcmVzcywgMjAxOCkNCjo6Og0KDQo8ZGl2IGNsYXNzPSJwYWdlLW5hdiI+DQo8YSBocmVmPSJ3ZWVrMDEuaHRtbCI+JmxhcnI7IFdlZWsgMTogSW50cm9kdWN0aW9uPC9hPg0KPGEgaHJlZj0id2VlazAzLmh0bWwiPldlZWsgMyAmcmFycjs8L2E+DQo8L2Rpdj4NCg==</div>
<footer style="background:#002967; color:rgba(255,255,255,.75); padding:2.5rem 0 1.5rem; margin-top:3rem;">
<div class="container-fluid" style="max-width:1100px; margin:0 auto; padding:0 2rem;">
  <div class="row">
    <div class="col-md-5">
      <h5 style="color:#fff; font-size:.95rem;">Data Visualization &mdash; Gonzaga University</h5>
      <p style="font-size:.85rem;">School of Business Administration. A course in the Jesuit tradition of intellectual rigor, ethical inquiry, and service to the common good.</p>
    </div>
    <div class="col-md-2">
      <h5 style="color:#fff; font-size:.95rem;">References</h5>
      <ul style="list-style:none; padding:0; font-size:.85rem;">
        <li><a href="https://clauswilke.com/dataviz/" target="_blank" style="color:rgba(255,255,255,.7);">Wilke Textbook</a></li>
        <li><a href="https://socviz.co/" target="_blank" style="color:rgba(255,255,255,.7);">Healy Textbook</a></li>
        <li><a href="https://ggplot2-book.org/" target="_blank" style="color:rgba(255,255,255,.7);">ggplot2 Book</a></li>
      </ul>
    </div>
    <div class="col-md-2">
      <h5 style="color:#fff; font-size:.95rem;">Tools</h5>
      <ul style="list-style:none; padding:0; font-size:.85rem;">
        <li><a href="https://www.r-project.org/" target="_blank" style="color:rgba(255,255,255,.7);">Download R</a></li>
        <li><a href="https://posit.co/downloads/" target="_blank" style="color:rgba(255,255,255,.7);">RStudio</a></li>
        <li><a href="https://www.tidyverse.org/" target="_blank" style="color:rgba(255,255,255,.7);">Tidyverse</a></li>
      </ul>
    </div>
    <div class="col-md-3">
      <h5 style="color:#fff; font-size:.95rem;">Instructor</h5>
      <p style="font-size:.85rem;">Dr. Vivek H. Patil<br>
      <a href="mailto:patil@gonzaga.edu" style="color:rgba(255,255,255,.7);">patil@gonzaga.edu</a><br>
      <a href="http://patilv.com" target="_blank" style="color:rgba(255,255,255,.7);">patilv.com</a></p>
    </div>
  </div>
  <hr style="border-color:rgba(255,255,255,.15); margin:1.5rem 0 1rem;">
  <p style="font-size:.78rem; text-align:center; margin:0;">&copy; Gonzaga University School of Business. Course materials by Dr. Vivek H. Patil. <em>Ad Majorem Dei Gloriam.</em></p>
</div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("week02.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
