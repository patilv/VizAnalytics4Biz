<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 4: Chart Types &amp; Variations</title>

<script src="site_libs/header-attrs-2.30/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Visual Analytics & Data Storytelling with R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="syllabus.html">Syllabus</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Weeks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week01.html">Week 1: Introduction to Data Viz &amp; R</a>
    </li>
    <li>
      <a href="week02.html">Week 2: Visual Perception &amp; Design</a>
    </li>
    <li>
      <a href="week03.html">Week 3: Grammar of Graphics &amp; ggplot2</a>
    </li>
    <li>
      <a href="week04.html">Week 4: Chart Types &amp; Variations</a>
    </li>
    <li>
      <a href="week05.html">Week 5: Data Wrangling Essentials</a>
    </li>
    <li>
      <a href="week06.html">Week 6: Interactive Visualizations</a>
    </li>
    <li>
      <a href="week07.html">Week 7: Geographic Visualization</a>
    </li>
    <li>
      <a href="week08.html">Week 8: Capstone ‚Äî Viz in Practice</a>
    </li>
  </ul>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/patilv/VizAnalytics4Biz">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Week 4: Chart Types &amp; Variations</h1>

</div>


<div class="hero-banner">
<div class="week-badge">
4
</div>
<h1>
Chart Types &amp; Variations
</h1>
<p>
Beyond bar charts ‚Äî a field guide to the visualization zoo
</p>
</div>
<div id="learning-objectives" class="section level2 objectives">
<h2>Learning Objectives</h2>
<p>By the end of this week, you will be able to:</p>
<ul>
<li>Choose the right chart type for a given data relationship</li>
<li>Create lollipop charts, dumbbell charts, ridgeline plots, treemaps,
bubble charts, heatmaps, and correlation matrices</li>
<li>Understand when to use each chart type and articulate why one choice
is better than another</li>
<li>Apply the principle of matching visual encoding to the analytical
question</li>
</ul>
</div>
<div id="setup" class="section level2">
<h2>Setup</h2>
<p>Before we begin, load the core packages we will use throughout this
week. Several chart types require specialized packages that extend
ggplot2. If you have not installed them yet, see the Common Errors box
below.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code></pre></div>
<div class="callout-error">
<p><strong>Common Errors You May Encounter This Week</strong></p>
<p>This week uses several extension packages. If you run into errors,
check this list first:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>Error: could not find function "geom_density_ridges_gradient"</code></strong>
This function lives in the <code>ggridges</code> package, which is not
part of the tidyverse. You need to install it once and then load it:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggridges&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span></code></pre></div></li>
<li><p><strong><code>Error: could not find function "geom_treemap"</code></strong>
This function lives in the <code>treemapify</code> package. Install and
load it:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;treemapify&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">library</span>(treemapify)</span></code></pre></div></li>
<li><p><strong><code>ggpairs()</code> takes forever to run / R appears
frozen</strong> The <code>ggpairs()</code> function computes pairwise
plots for every combination of columns. If you pass a dataset with many
columns, the computation time grows quadratically. Always use
<code>select()</code> to pick only 4‚Äì5 numeric columns before passing to
<code>ggpairs()</code>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Good -- 5 columns = 10 pairs</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg, disp, hp, wt, qsec) <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>()</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Bad -- 11 columns = 55 pairs (slow!)</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>()</span></code></pre></div></li>
<li><p><strong>Bubble chart sizes look wrong / small countries
invisible</strong> Use <code>scale_size_area()</code> instead of
<code>scale_size_continuous()</code>. The <code>scale_size_area()</code>
function ensures that the <em>area</em> of each bubble is proportional
to the data value, which is the perceptually correct mapping. With
<code>scale_size_continuous()</code>, the <em>radius</em> is mapped
linearly, causing larger values to appear disproportionately
huge.</p></li>
<li><p><strong>Heatmap text is unreadable / labels disappear into dark
tiles</strong> Adjust the <code>size</code> parameter in
<code>geom_text()</code> to make labels larger or smaller. On dark
tiles, switch the text <code>color</code> to <code>"white"</code> or a
light value. You can also use conditional coloring:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(value, <span class="dv">1</span>),</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>              <span class="at">color =</span> <span class="fu">after_stat</span>(value <span class="sc">&gt;</span> threshold)), <span class="at">size =</span> <span class="dv">3</span>)</span></code></pre></div>
<p>Or simply pick a text color that contrasts well with your palette
(e.g., <code>"white"</code> on dark sequential scales).</p></li>
</ol>
</div>
</div>
<div id="choosing-the-right-chart" class="section level2">
<h2>Choosing the Right Chart</h2>
<p>The single most important decision in data visualization is choosing
the right chart type. A beautiful chart that uses the wrong encoding is
worse than a plain chart that uses the right one. The chart type you
select should be driven entirely by the <strong>relationship</strong>
you want to show in your data.</p>
<p>Here is a framework for thinking about chart selection:</p>
<ul>
<li><strong>Comparison</strong> of values across categories: bar chart,
lollipop chart, dumbbell chart, dot plot</li>
<li><strong>Distribution</strong> of a single variable or across groups:
histogram, density plot, violin plot, ridgeline plot, boxplot</li>
<li><strong>Relationship</strong> between two or more variables:
scatterplot, bubble chart, heatmap, correlogram</li>
<li><strong>Composition</strong> showing parts of a whole: stacked bar
chart, treemap, waffle chart</li>
<li><strong>Change over time</strong>: line chart, area chart,
sparkline</li>
</ul>
<div class="callout-info">
<p><strong>There is no universal ‚Äúbest‚Äù chart.</strong> The best chart
is the one that most clearly communicates the specific insight you want
your audience to take away. A bar chart is not inherently better or
worse than a treemap ‚Äì it depends on the question you are answering.</p>
</div>
<p>Each of the following sections introduces a chart type, explains when
it is most useful, and provides working R code you can adapt for your
own projects.</p>
</div>
<div id="try-it-chart-type-explorer" class="section level2">
<h2>Try It: Chart Type Explorer</h2>
<p>You have just seen that different chart types serve different
analytical purposes. Now explore them interactively. The sandbox below
lets you switch between chart types using the same dataset, so you can
see how the choice of chart changes the story.</p>
<div class="sandbox-section">
<div class="sandbox-header">
<p><span class="sandbox-icon">üß™</span> Chart Type Explorer ‚Äî Pick the
Right Tool for the Job</p>
</div>
<iframe class="sandbox-frame" src="https://analytics.gonzaga.edu/week04-charttypes/" height="600" loading="lazy" allowfullscreen>
</iframe>
<div class="sandbox-cold-start">
<p>If the app takes a few seconds to load on first visit, that is normal
‚Äî the server is waking up.</p>
</div>
</div>
<div class="try-it-box">
<p><strong>Exploration Tasks:</strong></p>
<ol style="list-style-type: decimal">
<li>Start with the <strong>bar chart</strong> view. What comparison does
it emphasize?</li>
<li>Switch to a <strong>lollipop chart</strong> ‚Äî how does it compare to
the bar chart for readability?</li>
<li>Try the <strong>heatmap</strong> ‚Äî what relationships does it reveal
that the other charts do not?</li>
<li>Look at the <strong>treemap</strong> ‚Äî when might this be more
useful than a bar chart?</li>
</ol>
</div>
<div class="callout-info">
<p><strong>What You Should Have Noticed:</strong> No single chart type
is ‚Äúbest.‚Äù Each one highlights different aspects of the data. Bar charts
excel at precise comparisons, lollipop charts reduce visual clutter,
heatmaps reveal patterns across two dimensions, and treemaps show
part-to-whole relationships with hierarchy. The right choice depends on
what question you are trying to answer.</p>
</div>
<div class="callout-ai">
<p><strong>AI &amp; This Concept</strong> When asking AI to create a
visualization, always tell it <em>what comparison you want to make</em>,
not just ‚Äúchart this data.‚Äù For example, ‚ÄúShow how categories rank from
highest to lowest‚Äù will get you a sorted bar chart, while ‚ÄúShow
correlations between all numeric variables‚Äù will get a heatmap. The more
specific your intent, the better the chart.</p>
</div>
</div>
<div id="lollipop-charts" class="section level2 tabset">
<h2 class="tabset">Lollipop Charts</h2>
<p>Lollipop charts are an elegant alternative to bar charts. They convey
the same information ‚Äì a categorical variable mapped to a quantitative
value ‚Äì but with far less ink. Edward Tufte would approve: the
data-to-ink ratio is much higher.</p>
<p>Use a lollipop chart when you have a <strong>ranked
comparison</strong> of values across categories, especially when you
have many categories where thick bars would feel heavy.</p>
<div id="the-code" class="section level3">
<h3>The Code</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">fct_reorder</span>(manufacturer, avg_hwy)) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_hwy, <span class="at">y =</span> manufacturer)) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> avg_hwy, <span class="at">yend =</span> manufacturer),</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;#94a3b8&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Average Highway MPG by Manufacturer&quot;</span>,</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Lollipop chart ‚Äî less ink than a bar chart&quot;</span>,</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Average Highway MPG&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/lollipop-chart-1.png" alt="" width="768" /></p>
</div>
<div id="how-it-works" class="section level3">
<h3>How It Works</h3>
<p>The lollipop chart is built from two geoms layered together:</p>
<ol style="list-style-type: decimal">
<li><code>geom_segment()</code> draws the thin line (the ‚Äústick‚Äù) from
zero to the data value</li>
<li><code>geom_point()</code> draws the dot (the ‚Äúcandy‚Äù) at the
end</li>
</ol>
<p>Notice that we use <code>fct_reorder()</code> to sort the
manufacturers by their average MPG. This is critical ‚Äì an unsorted
lollipop chart is much harder to read. Always sort by the quantitative
variable unless there is a natural ordering (like months or rankings)
that takes priority.</p>
<div class="callout-tip">
<p><strong>When to choose a lollipop over a bar chart:</strong> Lollipop
charts shine when you have 8 or more categories. With fewer categories,
a standard bar chart is fine. With many categories, the thin stems of a
lollipop chart reduce visual clutter significantly.</p>
</div>
</div>
</div>
<div id="dumbbell-charts" class="section level2">
<h2>Dumbbell Charts</h2>
<p>Dumbbell charts (also called DNA charts or connected dot plots) show
the <strong>difference between two values</strong> for each category.
They are ideal for before/after comparisons, paired measurements, or
showing the gap between two groups.</p>
<p>The ‚Äúdumbbell‚Äù shape ‚Äì two dots connected by a line ‚Äì naturally draws
the eye to the distance between the two values, making it easy to
compare gaps across categories.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>dumbbell_data <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">city =</span> <span class="fu">mean</span>(cty), <span class="at">highway =</span> <span class="fu">mean</span>(hwy)) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">manufacturer =</span> <span class="fu">fct_reorder</span>(manufacturer, highway))</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">ggplot</span>(dumbbell_data) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> city, <span class="at">xend =</span> highway, <span class="at">y =</span> manufacturer, <span class="at">yend =</span> manufacturer),</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;#94a3b8&quot;</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> city, <span class="at">y =</span> manufacturer), <span class="at">color =</span> <span class="st">&quot;#C41E3A&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> highway, <span class="at">y =</span> manufacturer), <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;City vs. Highway MPG by Manufacturer&quot;</span>,</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Red = City | Navy = Highway&quot;</span>,</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Miles Per Gallon&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/dumbbell-chart-1.png" alt="" width="768" /></p>
<p>The segment connects the two values, and the colored dots mark each
endpoint. The color legend is embedded in the subtitle to keep the chart
clean. Notice how easy it is to see which manufacturers have the largest
gap between city and highway fuel economy.</p>
<div class="callout-tip">
<p><strong>Dumbbell charts are underused.</strong> Many analysts default
to grouped bar charts for paired comparisons, but dumbbell charts are
almost always more readable. The connecting line makes the comparison
explicit, while grouped bars force the viewer to mentally bridge the
gap.</p>
</div>
</div>
<div id="ridgeline-plots-joy-plots" class="section level2">
<h2>Ridgeline Plots (Joy Plots)</h2>
<p>Ridgeline plots display the <strong>distribution</strong> of a
variable across multiple groups, stacked vertically with slight overlap.
They are one of the most visually striking chart types in the ggplot2
ecosystem, and they are remarkably effective at revealing distributional
differences.</p>
<p>The name ‚Äújoy plot‚Äù comes from the iconic cover of Joy Division‚Äôs
<em>Unknown Pleasures</em> album, which featured a similar stacked-ridge
visualization of radio pulsar data.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">y =</span> <span class="fu">fct_reorder</span>(class, hwy, <span class="at">.fun =</span> median), <span class="at">fill =</span> <span class="fu">after_stat</span>(x))) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> <span class="dv">2</span>, <span class="at">rel_min_height =</span> <span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution of Highway MPG by Vehicle Class&quot;</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Ridgeline plot ‚Äî compact display of many distributions&quot;</span>,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Highway MPG&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/ridgeline-plot-1.png" alt="" width="768" /></p>
<p>The <code>scale</code> parameter controls how much the ridges
overlap. A value of 2 means each ridge can extend up to twice the
allocated row height. The <code>rel_min_height</code> parameter trims
the tails to avoid distracting wisps at the edges.</p>
<p>The gradient fill using <code>after_stat(x)</code> maps the x-axis
value to a color, reinforcing the positional encoding with a color
encoding. This is a form of <strong>redundant encoding</strong> ‚Äì using
two visual channels for the same variable ‚Äì which can improve
readability.</p>
<div class="callout-info">
<p><strong>When to use ridgeline plots:</strong> They work best when you
have 5‚Äì15 groups and want to compare the full shape of each
distribution. With fewer groups, consider overlapping density plots or
faceted histograms. With more groups, the overlap becomes too dense to
read.</p>
</div>
</div>
<div id="treemaps" class="section level2">
<h2>Treemaps</h2>
<p>Treemaps display <strong>hierarchical or part-to-whole</strong>
relationships using nested rectangles. The area of each rectangle is
proportional to a quantitative variable, making treemaps an effective
way to show composition and relative size simultaneously.</p>
<p>Treemaps are particularly useful when you have two levels of
hierarchy (e.g., manufacturer and class, or department and team) and
want to show how subcategories contribute to larger groups.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">count</span>(manufacturer, class) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">area =</span> n, <span class="at">fill =</span> manufacturer, <span class="at">subgroup =</span> manufacturer, <span class="at">label =</span> class)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">place =</span> <span class="st">&quot;centre&quot;</span>, <span class="at">size =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="fu">geom_treemap_subgroup_border</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Vehicle Models: Manufacturer x Class&quot;</span>,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Area represents number of models in the mpg dataset&quot;</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/treemap-chart-1.png" alt="" width="768" /></p>
<p>The <code>treemapify</code> package provides ggplot2-compatible geoms
for treemaps. <code>geom_treemap()</code> draws the filled rectangles,
<code>geom_treemap_text()</code> adds labels inside each rectangle, and
<code>geom_treemap_subgroup_border()</code> draws thicker borders around
the top-level grouping (manufacturer) to make the hierarchy visible.</p>
<div class="callout-tip">
<p><strong>Treemaps vs.¬†pie charts:</strong> Both show composition, but
treemaps are far more effective because we can judge rectangular areas
more accurately than circular arc lengths. Treemaps also scale to many
more categories and support nested hierarchies.</p>
</div>
</div>
<div id="bubble-charts" class="section level2">
<h2>Bubble Charts</h2>
<p>A bubble chart is a scatterplot where a <strong>third
variable</strong> controls the size of each point. When done well,
bubble charts can pack an impressive amount of information into a single
graphic. The most famous example is Hans Rosling‚Äôs Gapminder
visualization of global health and wealth.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Africa&quot;</span> <span class="ot">=</span> <span class="st">&quot;#C41E3A&quot;</span>, <span class="st">&quot;Americas&quot;</span> <span class="ot">=</span> <span class="st">&quot;#002967&quot;</span>,</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>                                <span class="st">&quot;Asia&quot;</span> <span class="ot">=</span> <span class="st">&quot;#B4975A&quot;</span>, <span class="st">&quot;Europe&quot;</span> <span class="ot">=</span> <span class="st">&quot;#2563eb&quot;</span>, <span class="st">&quot;Oceania&quot;</span> <span class="ot">=</span> <span class="st">&quot;#10b981&quot;</span>)) <span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Wealth, Health, and Population (2007)&quot;</span>,</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Bubble size = population&quot;</span>,</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;GDP per Capita (log scale)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Life Expectancy&quot;</span>,</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Continent&quot;</span>,</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Gapminder Foundation&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/bubble-chart-gapminder-1.png" alt="" width="768" /></p>
<p>Several design decisions make this chart work:</p>
<ul>
<li><strong>Log scale on x-axis</strong>: GDP per capita has an
extremely skewed distribution. A log scale spreads the data out so that
both poor and rich countries are visible.</li>
<li><strong><code>scale_size_area()</code></strong>: This ensures that
the area (not the radius) of each bubble is proportional to the
population, which is the perceptually correct mapping.</li>
<li><strong>Alpha transparency</strong>: With many overlapping bubbles,
transparency prevents large countries from completely obscuring small
ones.</li>
<li><strong>Color by continent</strong>: This adds a fourth variable,
creating a chart that encodes GDP, life expectancy, population, and
continent in a single view.</li>
</ul>
<div class="callout-info">
<p><strong>Caution with bubble charts:</strong> Do not use more than one
size variable. Human perception of area is imprecise, so bubble charts
work best when the size variable is used for rough comparisons (‚ÄúChina
is much bigger than Norway‚Äù) rather than precise readings. If you need
precision, use a different encoding.</p>
</div>
</div>
<div id="heatmaps" class="section level2">
<h2>Heatmaps</h2>
<p>Heatmaps use <strong>color intensity</strong> to represent values in
a matrix. They are excellent for spotting patterns, clusters, and
outliers in data that has two categorical dimensions and one
quantitative dimension.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer, class) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> manufacturer, <span class="at">fill =</span> avg_hwy)) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(avg_hwy, <span class="dv">0</span>)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;mako&quot;</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">na.value =</span> <span class="st">&quot;#f1f5f9&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Average Highway MPG: Manufacturer x Class&quot;</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;Avg MPG&quot;</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="week04_files/figure-html/heatmap-chart-1.png" alt="" width="768" /></p>
<p>Key elements of a good heatmap:</p>
<ul>
<li><strong>White borders</strong> between tiles create visual
separation and prevent colors from blending together.</li>
<li><strong>Text labels</strong> inside tiles let readers extract exact
values, compensating for the imprecision of color perception.</li>
<li><strong>A sequential color scale</strong> (like viridis ‚Äúmako‚Äù) maps
low values to light colors and high values to dark (or vice versa).
Avoid rainbow color scales, which create false perceptual
boundaries.</li>
<li><strong>Missing data handling</strong> with <code>na.value</code>
ensures that empty cells are visually distinct from low-value
cells.</li>
</ul>
<p>The pattern of missing tiles (where no manufacturer makes a vehicle
in that class) is itself informative ‚Äì it reveals the market
segmentation strategy of each brand.</p>
</div>
<div id="correlation-matrices" class="section level2">
<h2>Correlation Matrices</h2>
<p>A correlation matrix visualizes the <strong>pairwise
relationships</strong> between all numeric variables in a dataset. The
<code>GGally</code> package provides <code>ggpairs()</code>, which
creates a matrix of scatterplots, correlation coefficients, and density
curves in a single call.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">select</span>(mpg, disp, hp, wt, qsec) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="fu">ggpairs</span>(</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="at">upper =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="fu">wrap</span>(<span class="st">&quot;cor&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>)),</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="at">lower =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="fu">wrap</span>(<span class="st">&quot;smooth&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>)),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="at">diag =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="fu">wrap</span>(<span class="st">&quot;densityDiag&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#eff6ff&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>))</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Correlation Matrix ‚Äî mtcars&quot;</span>) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">11</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/correlation-matrix-ggally-1.png" alt="" width="672" /></p>
<p>The matrix has three regions:</p>
<ul>
<li><strong>Upper triangle</strong>: Correlation coefficients (numeric
summaries)</li>
<li><strong>Lower triangle</strong>: Scatterplots with smoothed trend
lines (visual relationships)</li>
<li><strong>Diagonal</strong>: Density plots (individual
distributions)</li>
</ul>
<p>This layout is efficient because the upper and lower triangles are
mirror images ‚Äì they show the same pairs, just in different forms.
Together, they give you both the number and the shape of each
relationship.</p>
<div class="callout-tip">
<p><strong>Reading correlations:</strong> Look for the strongest
relationships first. In the mtcars data, <code>wt</code> and
<code>mpg</code> have a strong negative correlation (heavier cars get
worse mileage), while <code>disp</code> and <code>hp</code> have a
strong positive correlation (bigger engines tend to be more powerful).
These are exactly the patterns you would expect from domain knowledge,
which is reassuring.</p>
</div>
</div>
<div id="violin-plots" class="section level2">
<h2>Violin Plots</h2>
<p>Violin plots combine the summary statistics of a boxplot with the
distributional shape of a density plot. The ‚Äúviolin‚Äù shape shows where
the data is concentrated, while the embedded boxplot marks the median
and interquartile range.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(class, hwy, <span class="at">.fun =</span> median), <span class="at">y =</span> hwy, <span class="at">fill =</span> class)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.15</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">outlier.size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set3&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Highway MPG by Vehicle Class&quot;</span>,</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Violin + boxplot overlay&quot;</span>,</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">&quot;Highway MPG&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="week04_files/figure-html/violin-plot-class-1.png" alt="" width="768" /></p>
<p>The combination of violin and boxplot is more informative than either
alone:</p>
<ul>
<li>The <strong>violin</strong> shows whether the distribution is
unimodal, bimodal, or skewed ‚Äì information that a boxplot hides
entirely.</li>
<li>The <strong>boxplot</strong> adds precise reference points (median,
quartiles) that are difficult to read from a density shape alone.</li>
</ul>
<p>Notice that we set <code>color = NA</code> on the violin to remove
the outline and <code>fill = "white"</code> on the boxplot so it sits
cleanly inside the violin shape.</p>
</div>
<div id="a-decision-framework" class="section level2">
<h2>A Decision Framework</h2>
<p>When you are faced with a new dataset and need to choose a chart
type, work through these questions:</p>
<p><strong>‚ÄúWhat is my primary question?‚Äù</strong></p>
<table>
<colgroup>
<col width="41%" />
<col width="58%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">I want to‚Ä¶</th>
<th align="left">Consider these chart types</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Compare values across groups</td>
<td align="left">Bar chart, lollipop chart, dumbbell chart</td>
</tr>
<tr class="even">
<td align="left">Show a distribution</td>
<td align="left">Histogram, density plot, violin, ridgeline</td>
</tr>
<tr class="odd">
<td align="left">Show a relationship</td>
<td align="left">Scatterplot, bubble chart, heatmap</td>
</tr>
<tr class="even">
<td align="left">Show composition / parts-whole</td>
<td align="left">Stacked bar chart, treemap, waffle chart</td>
</tr>
<tr class="odd">
<td align="left">Show change over time</td>
<td align="left">Line chart, area chart, sparkline</td>
</tr>
</tbody>
</table>
<p><strong>‚ÄúHow many categories do I have?‚Äù</strong></p>
<ul>
<li>2‚Äì5 categories: Almost any chart type works</li>
<li>6‚Äì15 categories: Lollipop, ridgeline, and heatmaps handle this range
well</li>
<li>15+ categories: Consider filtering, grouping, or using small
multiples</li>
</ul>
<p><strong>‚ÄúWho is my audience?‚Äù</strong></p>
<ul>
<li>General public: Stick to familiar types (bar, line, scatter)</li>
<li>Technical audience: You can use more specialized types (ridgeline,
correlogram, treemap)</li>
<li>Decision makers: Prioritize clarity and annotate key takeaways
directly on the chart</li>
</ul>
<div class="callout-info">
<p><strong>The ‚Äúone more chart‚Äù rule:</strong> If you have time, always
try at least one alternative chart type for your data. You may discover
that a different encoding reveals a pattern you missed. Visualization is
an iterative process.</p>
</div>
</div>
<div id="ignatian-reflection" class="section level2">
<h2>Ignatian Reflection</h2>
<div class="callout-ignatian">
<p><strong>‚ÄúMen and Women for Others‚Äù ‚Äì Chart Choice as an Act of
Service</strong></p>
<p>Choosing the right chart type is not merely a technical skill ‚Äì it is
an act of service to your audience. When you select a visualization that
clearly communicates a pattern, you empower others to understand and
act. When you choose a chart that obscures or misleads, you fail in that
responsibility.</p>
<p>St.¬†Ignatius spoke of <em>Cura Personalis</em> ‚Äì care for the whole
person. In the context of data visualization, this means considering
your audience‚Äôs background, literacy, and needs. A ridgeline plot may be
beautiful and information-rich, but if your audience has never seen one
before, a simpler chart with careful annotation may serve them better.
The goal is not to showcase your technical skills but to illuminate
truth.</p>
<p>The wrong chart can mislead; the right one illuminates. As you
practice building different chart types this week, ask yourself: <em>Am
I choosing this chart because it serves my audience, or because it looks
impressive?</em> The answer to that question is the difference between
decoration and communication.</p>
</div>
<hr />
</div>
<div id="challenge-chart-matchmaker" class="section level2">
<h2>Challenge: Chart Matchmaker</h2>
<div class="sandbox-section">
<div class="sandbox-header">
<p><span class="sandbox-icon">üéÆ</span> Chart Matchmaker ‚Äî The right
chart for the right question</p>
</div>
<iframe class="sandbox-frame" src="https://analytics.gonzaga.edu/week04-game/" height="700" loading="lazy" allowfullscreen>
</iframe>
<div class="sandbox-cold-start">
<p>If the app takes a few seconds to load on first visit, that is normal
‚Äî the server is waking up.</p>
</div>
</div>
<div class="try-it-box">
<p><strong>How to Play:</strong></p>
<ol style="list-style-type: decimal">
<li>Enter your name and click <strong>Start Game</strong></li>
<li>Each round presents a business question and data description</li>
<li>Select the best chart type from the grid of 7 options</li>
<li>Complete all 10 rounds, then copy your completion report into the
Canvas assignment</li>
</ol>
</div>
<hr />
</div>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<div class="exercise-block">
<div class="exercise-header">
<p>Week 4 Exercises</p>
</div>
<div class="exercise-body">
<p><strong>Exercise 1: Lollipop Chart with Gapminder</strong></p>
<p>Using the <code>gapminder</code> package, filter the data to the year
2007 and a single continent of your choice. Create a lollipop chart
showing life expectancy by country, sorted from highest to lowest. Use
Gonzaga navy (<code>#002967</code>) for the dots and a light gray for
the stems. Add a meaningful title and subtitle.</p>
<p>Fill in the blanks in the starter code below:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>, continent <span class="sc">==</span> <span class="st">&quot;___&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_reorder</span>(country, lifeExp)) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> lifeExp, <span class="at">y =</span> country)) <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> ___, <span class="at">yend =</span> ___),</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;#94a3b8&quot;</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;___&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;___&quot;</span>,</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;___&quot;</span>,</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Life Expectancy (years)&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><strong>Hints:</strong></p>
<ul>
<li>The <code>xend</code> in <code>geom_segment()</code> should be the
same variable mapped to the x-axis.</li>
<li>The <code>yend</code> should be the same variable mapped to the
y-axis.</li>
<li>Gonzaga navy is <code>#002967</code>.</li>
</ul>
<hr />
<p><strong>Exercise 2: Ridgeline Plot of Diamond Prices</strong></p>
<p>Using the built-in <code>diamonds</code> dataset, create a ridgeline
plot showing the distribution of <code>price</code> by <code>cut</code>
quality. Use <code>fct_reorder()</code> to sort the cuts by median
price. Experiment with the <code>scale</code> parameter and choose a
color palette that works well.</p>
<p>Fill in the blanks:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> ___, <span class="at">y =</span> <span class="fu">fct_reorder</span>(___, ___, <span class="at">.fun =</span> median),</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">after_stat</span>(x))) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> ___, <span class="at">rel_min_height =</span> <span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;___&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;___&quot;</span>,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;___&quot;</span>,</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Price (USD)&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><strong>Hints:</strong></p>
<ul>
<li>The x aesthetic should be the variable whose distribution you want
to show (<code>price</code>).</li>
<li>The first argument to <code>fct_reorder()</code> is the factor
variable (<code>cut</code>), and the second is the numeric variable to
sort by (<code>price</code>).</li>
<li>Try <code>scale</code> values between 1.5 and 3 to see how the
overlap changes.</li>
<li>Viridis options include <code>"magma"</code>, <code>"plasma"</code>,
<code>"inferno"</code>, <code>"viridis"</code>, and
<code>"mako"</code>.</li>
</ul>
<hr />
<p><strong>Exercise 3: Dumbbell Chart ‚Äì Before and After</strong></p>
<p>Using the <code>gapminder</code> dataset, compare life expectancy in
1952 vs.¬†2007 for countries in the Americas. Create a dumbbell chart
that shows both values for each country, connected by a line. Use
Gonzaga red (<code>#C41E3A</code>) for 1952 and Gonzaga navy
(<code>#002967</code>) for 2007.</p>
<p>Fill in the blanks:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>dumbbell_americas <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">&quot;Americas&quot;</span>, year <span class="sc">%in%</span> <span class="fu">c</span>(___, ___)) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  <span class="fu">select</span>(country, year, lifeExp) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> lifeExp,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;year_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">fct_reorder</span>(country, ___))</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="fu">ggplot</span>(dumbbell_americas) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_1952, <span class="at">xend =</span> ___, <span class="at">y =</span> country, <span class="at">yend =</span> ___),</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;#94a3b8&quot;</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> ___, <span class="at">y =</span> country), <span class="at">color =</span> <span class="st">&quot;#C41E3A&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> ___, <span class="at">y =</span> country), <span class="at">color =</span> <span class="st">&quot;#002967&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;___&quot;</span>,</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Red = 1952 | Navy = 2007&quot;</span>,</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Life Expectancy (years)&quot;</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><strong>Hints:</strong></p>
<ul>
<li>Sort countries by their 2007 life expectancy
(<code>year_2007</code>) for a clean visual ordering.</li>
<li>The <code>xend</code> in <code>geom_segment()</code> should be
<code>year_2007</code>.</li>
<li>The first <code>geom_point()</code> maps x to the 1952 column; the
second maps x to the 2007 column.</li>
</ul>
<hr />
<p><strong>Exercise 4: Heatmap of mtcars Correlations</strong></p>
<p>Compute the correlation matrix for the numeric columns in
<code>mtcars</code>, then reshape it into a long format suitable for
<code>geom_tile()</code>. Create a heatmap of the correlations with text
labels inside each tile. Use a <strong>diverging</strong> color scale
(e.g., blue for negative, white for zero, red for positive).</p>
<p>Fill in the blanks:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  <span class="fu">select</span>(mpg, cyl, disp, hp, drat, wt, qsec) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="fu">cor</span>()</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>cor_long <span class="ot">&lt;-</span> cor_matrix <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;var1&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>var1, <span class="at">names_to =</span> <span class="st">&quot;var2&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;correlation&quot;</span>)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="fu">ggplot</span>(cor_long, <span class="fu">aes</span>(<span class="at">x =</span> var1, <span class="at">y =</span> var2, <span class="at">fill =</span> ___)) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(___, <span class="dv">2</span>)), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;___&quot;</span>, <span class="at">mid =</span> <span class="st">&quot;___&quot;</span>, <span class="at">high =</span> <span class="st">&quot;___&quot;</span>, <span class="at">midpoint =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;___&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Correlation&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><strong>Hints:</strong></p>
<ul>
<li>The <code>fill</code> aesthetic and the <code>label</code> value
both use the <code>correlation</code> column.</li>
<li>For <code>scale_fill_gradient2()</code>, a natural choice is
<code>low = "#002967"</code> (navy for negative),
<code>mid = "white"</code>, and <code>high = "#C41E3A"</code> (red for
positive).</li>
<li>Consider adding <code>panel.grid = element_blank()</code> to remove
grid lines behind the tiles.</li>
</ul>
<hr />
<p><strong>Exercise 5: Three Charts, One Dataset</strong></p>
<p>Choose a dataset and a question. Then create <strong>three different
chart types</strong> that attempt to answer the same question. For
example, if your question is ‚ÄúHow does highway MPG vary by vehicle
class?‚Äù, you might create a boxplot, a violin plot, and a ridgeline
plot.</p>
<p>For each chart, write 2‚Äì3 sentences explaining what the chart reveals
and what it hides. Then write a brief paragraph (4‚Äì5 sentences) arguing
which of the three is the most effective for your specific question and
audience. There is no single right answer ‚Äì the point is to practice
evaluating trade-offs.</p>
<p>Here is a starter template to get you going:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co"># Choose your dataset and question:</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># Dataset: ___</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co"># Question: &quot;How does ___ vary by ___?&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co"># Chart 1: ___</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co"># (your code here)</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="co"># Chart 2: ___</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co"># (your code here)</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co"># Chart 3: ___</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="co"># (your code here)</span></span></code></pre></div>
<p>Write your comparison paragraph below each chart in your R Markdown
document.</p>
</div>
</div>
</div>
<div id="attributions" class="section level2">
<h2>Attributions</h2>
<p>This course material draws on and is inspired by the work of many
scholars and practitioners:</p>
<ul>
<li><strong>Vivek H. Patil</strong> ‚Äì foundational course design and
materials for data visualization at Gonzaga University</li>
<li><strong>Wilke, C.O.</strong> ‚Äì <em>Fundamentals of Data
Visualization</em> (O‚ÄôReilly, 2019), Chapters 6‚Äì12</li>
<li><strong>Healy, K.</strong> ‚Äì <em>Data Visualization: A Practical
Introduction</em> (Princeton University Press, 2018)</li>
<li><strong>Wickham, H.</strong> ‚Äì <em>ggplot2: Elegant Graphics for
Data Analysis</em> (Springer, 3rd edition)</li>
<li><strong>Schwabish, J.</strong> (2014). ‚ÄúAn Economist‚Äôs Guide to
Visualizing Data.‚Äù <em>Journal of Economic Perspectives</em>, 28(1),
209‚Äì234.</li>
</ul>
<div class="page-nav">
<p><a href="week03.html">‚Üê Week 3</a> <a href="week05.html">Week 5
‚Üí</a></p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIldlZWsgNDogQ2hhcnQgVHlwZXMgJiBWYXJpYXRpb25zIg0Kb3V0cHV0Og0KICBodG1sX2RvY3VtZW50Og0KICAgIHRvYzogdHJ1ZQ0KICAgIHRvY19mbG9hdDogdHJ1ZQ0KLS0tDQoNCjxkaXYgY2xhc3M9Imhlcm8tYmFubmVyIj4NCjxkaXYgY2xhc3M9IndlZWstYmFkZ2UiPjQ8L2Rpdj4NCjxoMT5DaGFydCBUeXBlcyAmYW1wOyBWYXJpYXRpb25zPC9oMT4NCjxwPkJleW9uZCBiYXIgY2hhcnRzICZtZGFzaDsgYSBmaWVsZCBndWlkZSB0byB0aGUgdmlzdWFsaXphdGlvbiB6b288L3A+DQo8L2Rpdj4NCg0KOjo6IHsub2JqZWN0aXZlc30NCiMjIExlYXJuaW5nIE9iamVjdGl2ZXMNCg0KQnkgdGhlIGVuZCBvZiB0aGlzIHdlZWssIHlvdSB3aWxsIGJlIGFibGUgdG86DQoNCi0gQ2hvb3NlIHRoZSByaWdodCBjaGFydCB0eXBlIGZvciBhIGdpdmVuIGRhdGEgcmVsYXRpb25zaGlwDQotIENyZWF0ZSBsb2xsaXBvcCBjaGFydHMsIGR1bWJiZWxsIGNoYXJ0cywgcmlkZ2VsaW5lIHBsb3RzLCB0cmVlbWFwcywgYnViYmxlIGNoYXJ0cywgaGVhdG1hcHMsIGFuZCBjb3JyZWxhdGlvbiBtYXRyaWNlcw0KLSBVbmRlcnN0YW5kIHdoZW4gdG8gdXNlIGVhY2ggY2hhcnQgdHlwZSBhbmQgYXJ0aWN1bGF0ZSB3aHkgb25lIGNob2ljZSBpcyBiZXR0ZXIgdGhhbiBhbm90aGVyDQotIEFwcGx5IHRoZSBwcmluY2lwbGUgb2YgbWF0Y2hpbmcgdmlzdWFsIGVuY29kaW5nIHRvIHRoZSBhbmFseXRpY2FsIHF1ZXN0aW9uDQo6OjoNCg0KIyMgU2V0dXANCg0KQmVmb3JlIHdlIGJlZ2luLCBsb2FkIHRoZSBjb3JlIHBhY2thZ2VzIHdlIHdpbGwgdXNlIHRocm91Z2hvdXQgdGhpcyB3ZWVrLiBTZXZlcmFsIGNoYXJ0IHR5cGVzIHJlcXVpcmUgc3BlY2lhbGl6ZWQgcGFja2FnZXMgdGhhdCBleHRlbmQgZ2dwbG90Mi4gSWYgeW91IGhhdmUgbm90IGluc3RhbGxlZCB0aGVtIHlldCwgc2VlIHRoZSBDb21tb24gRXJyb3JzIGJveCBiZWxvdy4NCg0KYGBge3Igc2V0dXAtd2VlazA0LCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KbGlicmFyeSh0aWR5dmVyc2UpDQpsaWJyYXJ5KGdncmlkZ2VzKQ0KbGlicmFyeSh0cmVlbWFwaWZ5KQ0KbGlicmFyeShnYXBtaW5kZXIpDQpsaWJyYXJ5KEdHYWxseSkNCmBgYA0KDQo6Ojogey5jYWxsb3V0LWVycm9yfQ0KKipDb21tb24gRXJyb3JzIFlvdSBNYXkgRW5jb3VudGVyIFRoaXMgV2VlayoqDQoNClRoaXMgd2VlayB1c2VzIHNldmVyYWwgZXh0ZW5zaW9uIHBhY2thZ2VzLiBJZiB5b3UgcnVuIGludG8gZXJyb3JzLCBjaGVjayB0aGlzIGxpc3QgZmlyc3Q6DQoNCjEuICoqYEVycm9yOiBjb3VsZCBub3QgZmluZCBmdW5jdGlvbiAiZ2VvbV9kZW5zaXR5X3JpZGdlc19ncmFkaWVudCJgKioNCiAgIFRoaXMgZnVuY3Rpb24gbGl2ZXMgaW4gdGhlIGBnZ3JpZGdlc2AgcGFja2FnZSwgd2hpY2ggaXMgbm90IHBhcnQgb2YgdGhlIHRpZHl2ZXJzZS4gWW91IG5lZWQgdG8gaW5zdGFsbCBpdCBvbmNlIGFuZCB0aGVuIGxvYWQgaXQ6DQogICBgYGByDQogICBpbnN0YWxsLnBhY2thZ2VzKCJnZ3JpZGdlcyIpDQogICBsaWJyYXJ5KGdncmlkZ2VzKQ0KICAgYGBgDQoNCjIuICoqYEVycm9yOiBjb3VsZCBub3QgZmluZCBmdW5jdGlvbiAiZ2VvbV90cmVlbWFwImAqKg0KICAgVGhpcyBmdW5jdGlvbiBsaXZlcyBpbiB0aGUgYHRyZWVtYXBpZnlgIHBhY2thZ2UuIEluc3RhbGwgYW5kIGxvYWQgaXQ6DQogICBgYGByDQogICBpbnN0YWxsLnBhY2thZ2VzKCJ0cmVlbWFwaWZ5IikNCiAgIGxpYnJhcnkodHJlZW1hcGlmeSkNCiAgIGBgYA0KDQozLiAqKmBnZ3BhaXJzKClgIHRha2VzIGZvcmV2ZXIgdG8gcnVuIC8gUiBhcHBlYXJzIGZyb3plbioqDQogICBUaGUgYGdncGFpcnMoKWAgZnVuY3Rpb24gY29tcHV0ZXMgcGFpcndpc2UgcGxvdHMgZm9yIGV2ZXJ5IGNvbWJpbmF0aW9uIG9mIGNvbHVtbnMuIElmIHlvdSBwYXNzIGEgZGF0YXNldCB3aXRoIG1hbnkgY29sdW1ucywgdGhlIGNvbXB1dGF0aW9uIHRpbWUgZ3Jvd3MgcXVhZHJhdGljYWxseS4gQWx3YXlzIHVzZSBgc2VsZWN0KClgIHRvIHBpY2sgb25seSA0LS01IG51bWVyaWMgY29sdW1ucyBiZWZvcmUgcGFzc2luZyB0byBgZ2dwYWlycygpYDoNCiAgIGBgYHINCiAgICMgR29vZCAtLSA1IGNvbHVtbnMgPSAxMCBwYWlycw0KICAgbXRjYXJzICU+JSBzZWxlY3QobXBnLCBkaXNwLCBocCwgd3QsIHFzZWMpICU+JSBnZ3BhaXJzKCkNCg0KICAgIyBCYWQgLS0gMTEgY29sdW1ucyA9IDU1IHBhaXJzIChzbG93ISkNCiAgIG10Y2FycyAlPiUgZ2dwYWlycygpDQogICBgYGANCg0KNC4gKipCdWJibGUgY2hhcnQgc2l6ZXMgbG9vayB3cm9uZyAvIHNtYWxsIGNvdW50cmllcyBpbnZpc2libGUqKg0KICAgVXNlIGBzY2FsZV9zaXplX2FyZWEoKWAgaW5zdGVhZCBvZiBgc2NhbGVfc2l6ZV9jb250aW51b3VzKClgLiBUaGUgYHNjYWxlX3NpemVfYXJlYSgpYCBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgdGhlICphcmVhKiBvZiBlYWNoIGJ1YmJsZSBpcyBwcm9wb3J0aW9uYWwgdG8gdGhlIGRhdGEgdmFsdWUsIHdoaWNoIGlzIHRoZSBwZXJjZXB0dWFsbHkgY29ycmVjdCBtYXBwaW5nLiBXaXRoIGBzY2FsZV9zaXplX2NvbnRpbnVvdXMoKWAsIHRoZSAqcmFkaXVzKiBpcyBtYXBwZWQgbGluZWFybHksIGNhdXNpbmcgbGFyZ2VyIHZhbHVlcyB0byBhcHBlYXIgZGlzcHJvcG9ydGlvbmF0ZWx5IGh1Z2UuDQoNCjUuICoqSGVhdG1hcCB0ZXh0IGlzIHVucmVhZGFibGUgLyBsYWJlbHMgZGlzYXBwZWFyIGludG8gZGFyayB0aWxlcyoqDQogICBBZGp1c3QgdGhlIGBzaXplYCBwYXJhbWV0ZXIgaW4gYGdlb21fdGV4dCgpYCB0byBtYWtlIGxhYmVscyBsYXJnZXIgb3Igc21hbGxlci4gT24gZGFyayB0aWxlcywgc3dpdGNoIHRoZSB0ZXh0IGBjb2xvcmAgdG8gYCJ3aGl0ZSJgIG9yIGEgbGlnaHQgdmFsdWUuIFlvdSBjYW4gYWxzbyB1c2UgY29uZGl0aW9uYWwgY29sb3Jpbmc6DQogICBgYGByDQogICBnZW9tX3RleHQoYWVzKGxhYmVsID0gcm91bmQodmFsdWUsIDEpLA0KICAgICAgICAgICAgICAgICBjb2xvciA9IGFmdGVyX3N0YXQodmFsdWUgPiB0aHJlc2hvbGQpKSwgc2l6ZSA9IDMpDQogICBgYGANCiAgIE9yIHNpbXBseSBwaWNrIGEgdGV4dCBjb2xvciB0aGF0IGNvbnRyYXN0cyB3ZWxsIHdpdGggeW91ciBwYWxldHRlIChlLmcuLCBgIndoaXRlImAgb24gZGFyayBzZXF1ZW50aWFsIHNjYWxlcykuDQo6OjoNCg0KIyMgQ2hvb3NpbmcgdGhlIFJpZ2h0IENoYXJ0DQoNClRoZSBzaW5nbGUgbW9zdCBpbXBvcnRhbnQgZGVjaXNpb24gaW4gZGF0YSB2aXN1YWxpemF0aW9uIGlzIGNob29zaW5nIHRoZSByaWdodCBjaGFydCB0eXBlLiBBIGJlYXV0aWZ1bCBjaGFydCB0aGF0IHVzZXMgdGhlIHdyb25nIGVuY29kaW5nIGlzIHdvcnNlIHRoYW4gYSBwbGFpbiBjaGFydCB0aGF0IHVzZXMgdGhlIHJpZ2h0IG9uZS4gVGhlIGNoYXJ0IHR5cGUgeW91IHNlbGVjdCBzaG91bGQgYmUgZHJpdmVuIGVudGlyZWx5IGJ5IHRoZSAqKnJlbGF0aW9uc2hpcCoqIHlvdSB3YW50IHRvIHNob3cgaW4geW91ciBkYXRhLg0KDQpIZXJlIGlzIGEgZnJhbWV3b3JrIGZvciB0aGlua2luZyBhYm91dCBjaGFydCBzZWxlY3Rpb246DQoNCi0gKipDb21wYXJpc29uKiogb2YgdmFsdWVzIGFjcm9zcyBjYXRlZ29yaWVzOiBiYXIgY2hhcnQsIGxvbGxpcG9wIGNoYXJ0LCBkdW1iYmVsbCBjaGFydCwgZG90IHBsb3QNCi0gKipEaXN0cmlidXRpb24qKiBvZiBhIHNpbmdsZSB2YXJpYWJsZSBvciBhY3Jvc3MgZ3JvdXBzOiBoaXN0b2dyYW0sIGRlbnNpdHkgcGxvdCwgdmlvbGluIHBsb3QsIHJpZGdlbGluZSBwbG90LCBib3hwbG90DQotICoqUmVsYXRpb25zaGlwKiogYmV0d2VlbiB0d28gb3IgbW9yZSB2YXJpYWJsZXM6IHNjYXR0ZXJwbG90LCBidWJibGUgY2hhcnQsIGhlYXRtYXAsIGNvcnJlbG9ncmFtDQotICoqQ29tcG9zaXRpb24qKiBzaG93aW5nIHBhcnRzIG9mIGEgd2hvbGU6IHN0YWNrZWQgYmFyIGNoYXJ0LCB0cmVlbWFwLCB3YWZmbGUgY2hhcnQNCi0gKipDaGFuZ2Ugb3ZlciB0aW1lKio6IGxpbmUgY2hhcnQsIGFyZWEgY2hhcnQsIHNwYXJrbGluZQ0KDQo6Ojogey5jYWxsb3V0LWluZm99DQoqKlRoZXJlIGlzIG5vIHVuaXZlcnNhbCAiYmVzdCIgY2hhcnQuKiogVGhlIGJlc3QgY2hhcnQgaXMgdGhlIG9uZSB0aGF0IG1vc3QgY2xlYXJseSBjb21tdW5pY2F0ZXMgdGhlIHNwZWNpZmljIGluc2lnaHQgeW91IHdhbnQgeW91ciBhdWRpZW5jZSB0byB0YWtlIGF3YXkuIEEgYmFyIGNoYXJ0IGlzIG5vdCBpbmhlcmVudGx5IGJldHRlciBvciB3b3JzZSB0aGFuIGEgdHJlZW1hcCAtLSBpdCBkZXBlbmRzIG9uIHRoZSBxdWVzdGlvbiB5b3UgYXJlIGFuc3dlcmluZy4NCjo6Og0KDQpFYWNoIG9mIHRoZSBmb2xsb3dpbmcgc2VjdGlvbnMgaW50cm9kdWNlcyBhIGNoYXJ0IHR5cGUsIGV4cGxhaW5zIHdoZW4gaXQgaXMgbW9zdCB1c2VmdWwsIGFuZCBwcm92aWRlcyB3b3JraW5nIFIgY29kZSB5b3UgY2FuIGFkYXB0IGZvciB5b3VyIG93biBwcm9qZWN0cy4NCg0KIyMgVHJ5IEl0OiBDaGFydCBUeXBlIEV4cGxvcmVyDQoNCllvdSBoYXZlIGp1c3Qgc2VlbiB0aGF0IGRpZmZlcmVudCBjaGFydCB0eXBlcyBzZXJ2ZSBkaWZmZXJlbnQgYW5hbHl0aWNhbCBwdXJwb3Nlcy4gTm93IGV4cGxvcmUgdGhlbSBpbnRlcmFjdGl2ZWx5LiBUaGUgc2FuZGJveCBiZWxvdyBsZXRzIHlvdSBzd2l0Y2ggYmV0d2VlbiBjaGFydCB0eXBlcyB1c2luZyB0aGUgc2FtZSBkYXRhc2V0LCBzbyB5b3UgY2FuIHNlZSBob3cgdGhlIGNob2ljZSBvZiBjaGFydCBjaGFuZ2VzIHRoZSBzdG9yeS4NCg0KPGRpdiBjbGFzcz0ic2FuZGJveC1zZWN0aW9uIj4NCjxkaXYgY2xhc3M9InNhbmRib3gtaGVhZGVyIj4NCjxzcGFuIGNsYXNzPSJzYW5kYm94LWljb24iPvCfp6o8L3NwYW4+IENoYXJ0IFR5cGUgRXhwbG9yZXIg4oCUIFBpY2sgdGhlIFJpZ2h0IFRvb2wgZm9yIHRoZSBKb2INCjwvZGl2Pg0KPGlmcmFtZSBjbGFzcz0ic2FuZGJveC1mcmFtZSIgc3JjPSJodHRwczovL2FuYWx5dGljcy5nb256YWdhLmVkdS93ZWVrMDQtY2hhcnR0eXBlcy8iDQogICAgICAgIGhlaWdodD0iNjAwIiBsb2FkaW5nPSJsYXp5IiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+DQo8ZGl2IGNsYXNzPSJzYW5kYm94LWNvbGQtc3RhcnQiPg0KSWYgdGhlIGFwcCB0YWtlcyBhIGZldyBzZWNvbmRzIHRvIGxvYWQgb24gZmlyc3QgdmlzaXQsIHRoYXQgaXMgbm9ybWFsIOKAlCB0aGUgc2VydmVyIGlzIHdha2luZyB1cC4NCjwvZGl2Pg0KPC9kaXY+DQoNCjo6OiB7LnRyeS1pdC1ib3h9DQoqKkV4cGxvcmF0aW9uIFRhc2tzOioqDQoNCjEuIFN0YXJ0IHdpdGggdGhlICoqYmFyIGNoYXJ0Kiogdmlldy4gV2hhdCBjb21wYXJpc29uIGRvZXMgaXQgZW1waGFzaXplPw0KMi4gU3dpdGNoIHRvIGEgKipsb2xsaXBvcCBjaGFydCoqIOKAlCBob3cgZG9lcyBpdCBjb21wYXJlIHRvIHRoZSBiYXIgY2hhcnQgZm9yIHJlYWRhYmlsaXR5Pw0KMy4gVHJ5IHRoZSAqKmhlYXRtYXAqKiDigJQgd2hhdCByZWxhdGlvbnNoaXBzIGRvZXMgaXQgcmV2ZWFsIHRoYXQgdGhlIG90aGVyIGNoYXJ0cyBkbyBub3Q/DQo0LiBMb29rIGF0IHRoZSAqKnRyZWVtYXAqKiDigJQgd2hlbiBtaWdodCB0aGlzIGJlIG1vcmUgdXNlZnVsIHRoYW4gYSBiYXIgY2hhcnQ/DQo6OjoNCg0KOjo6IHsuY2FsbG91dC1pbmZvfQ0KKipXaGF0IFlvdSBTaG91bGQgSGF2ZSBOb3RpY2VkOioqIE5vIHNpbmdsZSBjaGFydCB0eXBlIGlzICJiZXN0LiIgRWFjaCBvbmUgaGlnaGxpZ2h0cyBkaWZmZXJlbnQgYXNwZWN0cyBvZiB0aGUgZGF0YS4gQmFyIGNoYXJ0cyBleGNlbCBhdCBwcmVjaXNlIGNvbXBhcmlzb25zLCBsb2xsaXBvcCBjaGFydHMgcmVkdWNlIHZpc3VhbCBjbHV0dGVyLCBoZWF0bWFwcyByZXZlYWwgcGF0dGVybnMgYWNyb3NzIHR3byBkaW1lbnNpb25zLCBhbmQgdHJlZW1hcHMgc2hvdyBwYXJ0LXRvLXdob2xlIHJlbGF0aW9uc2hpcHMgd2l0aCBoaWVyYXJjaHkuIFRoZSByaWdodCBjaG9pY2UgZGVwZW5kcyBvbiB3aGF0IHF1ZXN0aW9uIHlvdSBhcmUgdHJ5aW5nIHRvIGFuc3dlci4NCjo6Og0KDQo6Ojogey5jYWxsb3V0LWFpfQ0KKipBSSAmIFRoaXMgQ29uY2VwdCoqDQpXaGVuIGFza2luZyBBSSB0byBjcmVhdGUgYSB2aXN1YWxpemF0aW9uLCBhbHdheXMgdGVsbCBpdCAqd2hhdCBjb21wYXJpc29uIHlvdSB3YW50IHRvIG1ha2UqLCBub3QganVzdCAiY2hhcnQgdGhpcyBkYXRhLiIgRm9yIGV4YW1wbGUsICJTaG93IGhvdyBjYXRlZ29yaWVzIHJhbmsgZnJvbSBoaWdoZXN0IHRvIGxvd2VzdCIgd2lsbCBnZXQgeW91IGEgc29ydGVkIGJhciBjaGFydCwgd2hpbGUgIlNob3cgY29ycmVsYXRpb25zIGJldHdlZW4gYWxsIG51bWVyaWMgdmFyaWFibGVzIiB3aWxsIGdldCBhIGhlYXRtYXAuIFRoZSBtb3JlIHNwZWNpZmljIHlvdXIgaW50ZW50LCB0aGUgYmV0dGVyIHRoZSBjaGFydC4NCjo6Og0KDQojIyBMb2xsaXBvcCBDaGFydHMgey50YWJzZXR9DQoNCkxvbGxpcG9wIGNoYXJ0cyBhcmUgYW4gZWxlZ2FudCBhbHRlcm5hdGl2ZSB0byBiYXIgY2hhcnRzLiBUaGV5IGNvbnZleSB0aGUgc2FtZSBpbmZvcm1hdGlvbiAtLSBhIGNhdGVnb3JpY2FsIHZhcmlhYmxlIG1hcHBlZCB0byBhIHF1YW50aXRhdGl2ZSB2YWx1ZSAtLSBidXQgd2l0aCBmYXIgbGVzcyBpbmsuIEVkd2FyZCBUdWZ0ZSB3b3VsZCBhcHByb3ZlOiB0aGUgZGF0YS10by1pbmsgcmF0aW8gaXMgbXVjaCBoaWdoZXIuDQoNClVzZSBhIGxvbGxpcG9wIGNoYXJ0IHdoZW4geW91IGhhdmUgYSAqKnJhbmtlZCBjb21wYXJpc29uKiogb2YgdmFsdWVzIGFjcm9zcyBjYXRlZ29yaWVzLCBlc3BlY2lhbGx5IHdoZW4geW91IGhhdmUgbWFueSBjYXRlZ29yaWVzIHdoZXJlIHRoaWNrIGJhcnMgd291bGQgZmVlbCBoZWF2eS4NCg0KIyMjIFRoZSBDb2RlDQoNCmBgYHtyIGxvbGxpcG9wLWNoYXJ0LCBmaWcud2lkdGg9OCwgZmlnLmhlaWdodD01LCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KbXBnICU+JQ0KICBncm91cF9ieShtYW51ZmFjdHVyZXIpICU+JQ0KICBzdW1tYXJpc2UoYXZnX2h3eSA9IG1lYW4oaHd5KSkgJT4lDQogIG11dGF0ZShtYW51ZmFjdHVyZXIgPSBmY3RfcmVvcmRlcihtYW51ZmFjdHVyZXIsIGF2Z19od3kpKSAlPiUNCiAgZ2dwbG90KGFlcyh4ID0gYXZnX2h3eSwgeSA9IG1hbnVmYWN0dXJlcikpICsNCiAgZ2VvbV9zZWdtZW50KGFlcyh4ID0gMCwgeGVuZCA9IGF2Z19od3ksIHllbmQgPSBtYW51ZmFjdHVyZXIpLA0KICAgICAgICAgICAgICAgY29sb3IgPSAiIzk0YTNiOCIsIGxpbmV3aWR0aCA9IDAuOCkgKw0KICBnZW9tX3BvaW50KGNvbG9yID0gIiMwMDI5NjciLCBzaXplID0gMykgKw0KICBsYWJzKHRpdGxlID0gIkF2ZXJhZ2UgSGlnaHdheSBNUEcgYnkgTWFudWZhY3R1cmVyIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJMb2xsaXBvcCBjaGFydCDigJQgbGVzcyBpbmsgdGhhbiBhIGJhciBjaGFydCIsDQogICAgICAgeCA9ICJBdmVyYWdlIEhpZ2h3YXkgTVBHIiwgeSA9IE5VTEwpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykNCmBgYA0KDQojIyMgSG93IEl0IFdvcmtzDQoNClRoZSBsb2xsaXBvcCBjaGFydCBpcyBidWlsdCBmcm9tIHR3byBnZW9tcyBsYXllcmVkIHRvZ2V0aGVyOg0KDQoxLiBgZ2VvbV9zZWdtZW50KClgIGRyYXdzIHRoZSB0aGluIGxpbmUgKHRoZSAic3RpY2siKSBmcm9tIHplcm8gdG8gdGhlIGRhdGEgdmFsdWUNCjIuIGBnZW9tX3BvaW50KClgIGRyYXdzIHRoZSBkb3QgKHRoZSAiY2FuZHkiKSBhdCB0aGUgZW5kDQoNCk5vdGljZSB0aGF0IHdlIHVzZSBgZmN0X3Jlb3JkZXIoKWAgdG8gc29ydCB0aGUgbWFudWZhY3R1cmVycyBieSB0aGVpciBhdmVyYWdlIE1QRy4gVGhpcyBpcyBjcml0aWNhbCAtLSBhbiB1bnNvcnRlZCBsb2xsaXBvcCBjaGFydCBpcyBtdWNoIGhhcmRlciB0byByZWFkLiBBbHdheXMgc29ydCBieSB0aGUgcXVhbnRpdGF0aXZlIHZhcmlhYmxlIHVubGVzcyB0aGVyZSBpcyBhIG5hdHVyYWwgb3JkZXJpbmcgKGxpa2UgbW9udGhzIG9yIHJhbmtpbmdzKSB0aGF0IHRha2VzIHByaW9yaXR5Lg0KDQo6Ojogey5jYWxsb3V0LXRpcH0NCioqV2hlbiB0byBjaG9vc2UgYSBsb2xsaXBvcCBvdmVyIGEgYmFyIGNoYXJ0OioqIExvbGxpcG9wIGNoYXJ0cyBzaGluZSB3aGVuIHlvdSBoYXZlIDggb3IgbW9yZSBjYXRlZ29yaWVzLiBXaXRoIGZld2VyIGNhdGVnb3JpZXMsIGEgc3RhbmRhcmQgYmFyIGNoYXJ0IGlzIGZpbmUuIFdpdGggbWFueSBjYXRlZ29yaWVzLCB0aGUgdGhpbiBzdGVtcyBvZiBhIGxvbGxpcG9wIGNoYXJ0IHJlZHVjZSB2aXN1YWwgY2x1dHRlciBzaWduaWZpY2FudGx5Lg0KOjo6DQoNCiMjIER1bWJiZWxsIENoYXJ0cw0KDQpEdW1iYmVsbCBjaGFydHMgKGFsc28gY2FsbGVkIEROQSBjaGFydHMgb3IgY29ubmVjdGVkIGRvdCBwbG90cykgc2hvdyB0aGUgKipkaWZmZXJlbmNlIGJldHdlZW4gdHdvIHZhbHVlcyoqIGZvciBlYWNoIGNhdGVnb3J5LiBUaGV5IGFyZSBpZGVhbCBmb3IgYmVmb3JlL2FmdGVyIGNvbXBhcmlzb25zLCBwYWlyZWQgbWVhc3VyZW1lbnRzLCBvciBzaG93aW5nIHRoZSBnYXAgYmV0d2VlbiB0d28gZ3JvdXBzLg0KDQpUaGUgImR1bWJiZWxsIiBzaGFwZSAtLSB0d28gZG90cyBjb25uZWN0ZWQgYnkgYSBsaW5lIC0tIG5hdHVyYWxseSBkcmF3cyB0aGUgZXllIHRvIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gdmFsdWVzLCBtYWtpbmcgaXQgZWFzeSB0byBjb21wYXJlIGdhcHMgYWNyb3NzIGNhdGVnb3JpZXMuDQoNCmBgYHtyIGR1bWJiZWxsLWNoYXJ0LCBmaWcud2lkdGg9OCwgZmlnLmhlaWdodD02LCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KZHVtYmJlbGxfZGF0YSA8LSBtcGcgJT4lDQogIGdyb3VwX2J5KG1hbnVmYWN0dXJlcikgJT4lDQogIHN1bW1hcmlzZShjaXR5ID0gbWVhbihjdHkpLCBoaWdod2F5ID0gbWVhbihod3kpKSAlPiUNCiAgbXV0YXRlKG1hbnVmYWN0dXJlciA9IGZjdF9yZW9yZGVyKG1hbnVmYWN0dXJlciwgaGlnaHdheSkpDQoNCmdncGxvdChkdW1iYmVsbF9kYXRhKSArDQogIGdlb21fc2VnbWVudChhZXMoeCA9IGNpdHksIHhlbmQgPSBoaWdod2F5LCB5ID0gbWFudWZhY3R1cmVyLCB5ZW5kID0gbWFudWZhY3R1cmVyKSwNCiAgICAgICAgICAgICAgIGNvbG9yID0gIiM5NGEzYjgiLCBsaW5ld2lkdGggPSAxLjIpICsNCiAgZ2VvbV9wb2ludChhZXMoeCA9IGNpdHksIHkgPSBtYW51ZmFjdHVyZXIpLCBjb2xvciA9ICIjQzQxRTNBIiwgc2l6ZSA9IDMpICsNCiAgZ2VvbV9wb2ludChhZXMoeCA9IGhpZ2h3YXksIHkgPSBtYW51ZmFjdHVyZXIpLCBjb2xvciA9ICIjMDAyOTY3Iiwgc2l6ZSA9IDMpICsNCiAgbGFicyh0aXRsZSA9ICJDaXR5IHZzLiBIaWdod2F5IE1QRyBieSBNYW51ZmFjdHVyZXIiLA0KICAgICAgIHN1YnRpdGxlID0gIlJlZCA9IENpdHkgfCBOYXZ5ID0gSGlnaHdheSIsDQogICAgICAgeCA9ICJNaWxlcyBQZXIgR2FsbG9uIiwgeSA9IE5VTEwpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMykNCmBgYA0KDQpUaGUgc2VnbWVudCBjb25uZWN0cyB0aGUgdHdvIHZhbHVlcywgYW5kIHRoZSBjb2xvcmVkIGRvdHMgbWFyayBlYWNoIGVuZHBvaW50LiBUaGUgY29sb3IgbGVnZW5kIGlzIGVtYmVkZGVkIGluIHRoZSBzdWJ0aXRsZSB0byBrZWVwIHRoZSBjaGFydCBjbGVhbi4gTm90aWNlIGhvdyBlYXN5IGl0IGlzIHRvIHNlZSB3aGljaCBtYW51ZmFjdHVyZXJzIGhhdmUgdGhlIGxhcmdlc3QgZ2FwIGJldHdlZW4gY2l0eSBhbmQgaGlnaHdheSBmdWVsIGVjb25vbXkuDQoNCjo6OiB7LmNhbGxvdXQtdGlwfQ0KKipEdW1iYmVsbCBjaGFydHMgYXJlIHVuZGVydXNlZC4qKiBNYW55IGFuYWx5c3RzIGRlZmF1bHQgdG8gZ3JvdXBlZCBiYXIgY2hhcnRzIGZvciBwYWlyZWQgY29tcGFyaXNvbnMsIGJ1dCBkdW1iYmVsbCBjaGFydHMgYXJlIGFsbW9zdCBhbHdheXMgbW9yZSByZWFkYWJsZS4gVGhlIGNvbm5lY3RpbmcgbGluZSBtYWtlcyB0aGUgY29tcGFyaXNvbiBleHBsaWNpdCwgd2hpbGUgZ3JvdXBlZCBiYXJzIGZvcmNlIHRoZSB2aWV3ZXIgdG8gbWVudGFsbHkgYnJpZGdlIHRoZSBnYXAuDQo6OjoNCg0KIyMgUmlkZ2VsaW5lIFBsb3RzIChKb3kgUGxvdHMpDQoNClJpZGdlbGluZSBwbG90cyBkaXNwbGF5IHRoZSAqKmRpc3RyaWJ1dGlvbioqIG9mIGEgdmFyaWFibGUgYWNyb3NzIG11bHRpcGxlIGdyb3Vwcywgc3RhY2tlZCB2ZXJ0aWNhbGx5IHdpdGggc2xpZ2h0IG92ZXJsYXAuIFRoZXkgYXJlIG9uZSBvZiB0aGUgbW9zdCB2aXN1YWxseSBzdHJpa2luZyBjaGFydCB0eXBlcyBpbiB0aGUgZ2dwbG90MiBlY29zeXN0ZW0sIGFuZCB0aGV5IGFyZSByZW1hcmthYmx5IGVmZmVjdGl2ZSBhdCByZXZlYWxpbmcgZGlzdHJpYnV0aW9uYWwgZGlmZmVyZW5jZXMuDQoNClRoZSBuYW1lICJqb3kgcGxvdCIgY29tZXMgZnJvbSB0aGUgaWNvbmljIGNvdmVyIG9mIEpveSBEaXZpc2lvbidzICpVbmtub3duIFBsZWFzdXJlcyogYWxidW0sIHdoaWNoIGZlYXR1cmVkIGEgc2ltaWxhciBzdGFja2VkLXJpZGdlIHZpc3VhbGl6YXRpb24gb2YgcmFkaW8gcHVsc2FyIGRhdGEuDQoNCmBgYHtyIHJpZGdlbGluZS1wbG90LCBmaWcud2lkdGg9OCwgZmlnLmhlaWdodD02LCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KZ2dwbG90KG1wZywgYWVzKHggPSBod3ksIHkgPSBmY3RfcmVvcmRlcihjbGFzcywgaHd5LCAuZnVuID0gbWVkaWFuKSwgZmlsbCA9IGFmdGVyX3N0YXQoeCkpKSArDQogIGdlb21fZGVuc2l0eV9yaWRnZXNfZ3JhZGllbnQoc2NhbGUgPSAyLCByZWxfbWluX2hlaWdodCA9IDAuMDEpICsNCiAgc2NhbGVfZmlsbF92aXJpZGlzX2Mob3B0aW9uID0gInBsYXNtYSIpICsNCiAgbGFicyh0aXRsZSA9ICJEaXN0cmlidXRpb24gb2YgSGlnaHdheSBNUEcgYnkgVmVoaWNsZSBDbGFzcyIsDQogICAgICAgc3VidGl0bGUgPSAiUmlkZ2VsaW5lIHBsb3Qg4oCUIGNvbXBhY3QgZGlzcGxheSBvZiBtYW55IGRpc3RyaWJ1dGlvbnMiLA0KICAgICAgIHggPSAiSGlnaHdheSBNUEciLCB5ID0gTlVMTCkgKw0KICB0aGVtZV9taW5pbWFsKGJhc2Vfc2l6ZSA9IDEzKSArDQogIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbiA9ICJub25lIikNCmBgYA0KDQpUaGUgYHNjYWxlYCBwYXJhbWV0ZXIgY29udHJvbHMgaG93IG11Y2ggdGhlIHJpZGdlcyBvdmVybGFwLiBBIHZhbHVlIG9mIDIgbWVhbnMgZWFjaCByaWRnZSBjYW4gZXh0ZW5kIHVwIHRvIHR3aWNlIHRoZSBhbGxvY2F0ZWQgcm93IGhlaWdodC4gVGhlIGByZWxfbWluX2hlaWdodGAgcGFyYW1ldGVyIHRyaW1zIHRoZSB0YWlscyB0byBhdm9pZCBkaXN0cmFjdGluZyB3aXNwcyBhdCB0aGUgZWRnZXMuDQoNClRoZSBncmFkaWVudCBmaWxsIHVzaW5nIGBhZnRlcl9zdGF0KHgpYCBtYXBzIHRoZSB4LWF4aXMgdmFsdWUgdG8gYSBjb2xvciwgcmVpbmZvcmNpbmcgdGhlIHBvc2l0aW9uYWwgZW5jb2Rpbmcgd2l0aCBhIGNvbG9yIGVuY29kaW5nLiBUaGlzIGlzIGEgZm9ybSBvZiAqKnJlZHVuZGFudCBlbmNvZGluZyoqIC0tIHVzaW5nIHR3byB2aXN1YWwgY2hhbm5lbHMgZm9yIHRoZSBzYW1lIHZhcmlhYmxlIC0tIHdoaWNoIGNhbiBpbXByb3ZlIHJlYWRhYmlsaXR5Lg0KDQo6Ojogey5jYWxsb3V0LWluZm99DQoqKldoZW4gdG8gdXNlIHJpZGdlbGluZSBwbG90czoqKiBUaGV5IHdvcmsgYmVzdCB3aGVuIHlvdSBoYXZlIDUtLTE1IGdyb3VwcyBhbmQgd2FudCB0byBjb21wYXJlIHRoZSBmdWxsIHNoYXBlIG9mIGVhY2ggZGlzdHJpYnV0aW9uLiBXaXRoIGZld2VyIGdyb3VwcywgY29uc2lkZXIgb3ZlcmxhcHBpbmcgZGVuc2l0eSBwbG90cyBvciBmYWNldGVkIGhpc3RvZ3JhbXMuIFdpdGggbW9yZSBncm91cHMsIHRoZSBvdmVybGFwIGJlY29tZXMgdG9vIGRlbnNlIHRvIHJlYWQuDQo6OjoNCg0KIyMgVHJlZW1hcHMNCg0KVHJlZW1hcHMgZGlzcGxheSAqKmhpZXJhcmNoaWNhbCBvciBwYXJ0LXRvLXdob2xlKiogcmVsYXRpb25zaGlwcyB1c2luZyBuZXN0ZWQgcmVjdGFuZ2xlcy4gVGhlIGFyZWEgb2YgZWFjaCByZWN0YW5nbGUgaXMgcHJvcG9ydGlvbmFsIHRvIGEgcXVhbnRpdGF0aXZlIHZhcmlhYmxlLCBtYWtpbmcgdHJlZW1hcHMgYW4gZWZmZWN0aXZlIHdheSB0byBzaG93IGNvbXBvc2l0aW9uIGFuZCByZWxhdGl2ZSBzaXplIHNpbXVsdGFuZW91c2x5Lg0KDQpUcmVlbWFwcyBhcmUgcGFydGljdWxhcmx5IHVzZWZ1bCB3aGVuIHlvdSBoYXZlIHR3byBsZXZlbHMgb2YgaGllcmFyY2h5IChlLmcuLCBtYW51ZmFjdHVyZXIgYW5kIGNsYXNzLCBvciBkZXBhcnRtZW50IGFuZCB0ZWFtKSBhbmQgd2FudCB0byBzaG93IGhvdyBzdWJjYXRlZ29yaWVzIGNvbnRyaWJ1dGUgdG8gbGFyZ2VyIGdyb3Vwcy4NCg0KYGBge3IgdHJlZW1hcC1jaGFydCwgZmlnLndpZHRoPTgsIGZpZy5oZWlnaHQ9NiwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0NCm1wZyAlPiUNCiAgY291bnQobWFudWZhY3R1cmVyLCBjbGFzcykgJT4lDQogIGdncGxvdChhZXMoYXJlYSA9IG4sIGZpbGwgPSBtYW51ZmFjdHVyZXIsIHN1Ymdyb3VwID0gbWFudWZhY3R1cmVyLCBsYWJlbCA9IGNsYXNzKSkgKw0KICBnZW9tX3RyZWVtYXAoKSArDQogIGdlb21fdHJlZW1hcF90ZXh0KGNvbG9yID0gIndoaXRlIiwgcGxhY2UgPSAiY2VudHJlIiwgc2l6ZSA9IDEwKSArDQogIGdlb21fdHJlZW1hcF9zdWJncm91cF9ib3JkZXIoY29sb3IgPSAid2hpdGUiLCBzaXplID0gMykgKw0KICBsYWJzKHRpdGxlID0gIlZlaGljbGUgTW9kZWxzOiBNYW51ZmFjdHVyZXIgeCBDbGFzcyIsDQogICAgICAgc3VidGl0bGUgPSAiQXJlYSByZXByZXNlbnRzIG51bWJlciBvZiBtb2RlbHMgaW4gdGhlIG1wZyBkYXRhc2V0IikgKw0KICB0aGVtZShsZWdlbmQucG9zaXRpb24gPSAibm9uZSIpDQpgYGANCg0KVGhlIGB0cmVlbWFwaWZ5YCBwYWNrYWdlIHByb3ZpZGVzIGdncGxvdDItY29tcGF0aWJsZSBnZW9tcyBmb3IgdHJlZW1hcHMuIGBnZW9tX3RyZWVtYXAoKWAgZHJhd3MgdGhlIGZpbGxlZCByZWN0YW5nbGVzLCBgZ2VvbV90cmVlbWFwX3RleHQoKWAgYWRkcyBsYWJlbHMgaW5zaWRlIGVhY2ggcmVjdGFuZ2xlLCBhbmQgYGdlb21fdHJlZW1hcF9zdWJncm91cF9ib3JkZXIoKWAgZHJhd3MgdGhpY2tlciBib3JkZXJzIGFyb3VuZCB0aGUgdG9wLWxldmVsIGdyb3VwaW5nIChtYW51ZmFjdHVyZXIpIHRvIG1ha2UgdGhlIGhpZXJhcmNoeSB2aXNpYmxlLg0KDQo6Ojogey5jYWxsb3V0LXRpcH0NCioqVHJlZW1hcHMgdnMuIHBpZSBjaGFydHM6KiogQm90aCBzaG93IGNvbXBvc2l0aW9uLCBidXQgdHJlZW1hcHMgYXJlIGZhciBtb3JlIGVmZmVjdGl2ZSBiZWNhdXNlIHdlIGNhbiBqdWRnZSByZWN0YW5ndWxhciBhcmVhcyBtb3JlIGFjY3VyYXRlbHkgdGhhbiBjaXJjdWxhciBhcmMgbGVuZ3Rocy4gVHJlZW1hcHMgYWxzbyBzY2FsZSB0byBtYW55IG1vcmUgY2F0ZWdvcmllcyBhbmQgc3VwcG9ydCBuZXN0ZWQgaGllcmFyY2hpZXMuDQo6OjoNCg0KIyMgQnViYmxlIENoYXJ0cw0KDQpBIGJ1YmJsZSBjaGFydCBpcyBhIHNjYXR0ZXJwbG90IHdoZXJlIGEgKip0aGlyZCB2YXJpYWJsZSoqIGNvbnRyb2xzIHRoZSBzaXplIG9mIGVhY2ggcG9pbnQuIFdoZW4gZG9uZSB3ZWxsLCBidWJibGUgY2hhcnRzIGNhbiBwYWNrIGFuIGltcHJlc3NpdmUgYW1vdW50IG9mIGluZm9ybWF0aW9uIGludG8gYSBzaW5nbGUgZ3JhcGhpYy4gVGhlIG1vc3QgZmFtb3VzIGV4YW1wbGUgaXMgSGFucyBSb3NsaW5nJ3MgR2FwbWluZGVyIHZpc3VhbGl6YXRpb24gb2YgZ2xvYmFsIGhlYWx0aCBhbmQgd2VhbHRoLg0KDQpgYGB7ciBidWJibGUtY2hhcnQtZ2FwbWluZGVyLCBmaWcud2lkdGg9OCwgZmlnLmhlaWdodD02LCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KZ2FwbWluZGVyICU+JQ0KICBmaWx0ZXIoeWVhciA9PSAyMDA3KSAlPiUNCiAgZ2dwbG90KGFlcyh4ID0gZ2RwUGVyY2FwLCB5ID0gbGlmZUV4cCwgc2l6ZSA9IHBvcCwgY29sb3IgPSBjb250aW5lbnQpKSArDQogIGdlb21fcG9pbnQoYWxwaGEgPSAwLjYpICsNCiAgc2NhbGVfeF9sb2cxMChsYWJlbHMgPSBzY2FsZXM6OmRvbGxhcl9mb3JtYXQoKSkgKw0KICBzY2FsZV9zaXplX2FyZWEobWF4X3NpemUgPSAxNSwgZ3VpZGUgPSAibm9uZSIpICsNCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGMoIkFmcmljYSIgPSAiI0M0MUUzQSIsICJBbWVyaWNhcyIgPSAiIzAwMjk2NyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBc2lhIiA9ICIjQjQ5NzVBIiwgIkV1cm9wZSIgPSAiIzI1NjNlYiIsICJPY2VhbmlhIiA9ICIjMTBiOTgxIikpICsNCiAgbGFicyh0aXRsZSA9ICJXZWFsdGgsIEhlYWx0aCwgYW5kIFBvcHVsYXRpb24gKDIwMDcpIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJCdWJibGUgc2l6ZSA9IHBvcHVsYXRpb24iLA0KICAgICAgIHggPSAiR0RQIHBlciBDYXBpdGEgKGxvZyBzY2FsZSkiLCB5ID0gIkxpZmUgRXhwZWN0YW5jeSIsDQogICAgICAgY29sb3IgPSAiQ29udGluZW50IiwNCiAgICAgICBjYXB0aW9uID0gIlNvdXJjZTogR2FwbWluZGVyIEZvdW5kYXRpb24iKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpDQpgYGANCg0KU2V2ZXJhbCBkZXNpZ24gZGVjaXNpb25zIG1ha2UgdGhpcyBjaGFydCB3b3JrOg0KDQotICoqTG9nIHNjYWxlIG9uIHgtYXhpcyoqOiBHRFAgcGVyIGNhcGl0YSBoYXMgYW4gZXh0cmVtZWx5IHNrZXdlZCBkaXN0cmlidXRpb24uIEEgbG9nIHNjYWxlIHNwcmVhZHMgdGhlIGRhdGEgb3V0IHNvIHRoYXQgYm90aCBwb29yIGFuZCByaWNoIGNvdW50cmllcyBhcmUgdmlzaWJsZS4NCi0gKipgc2NhbGVfc2l6ZV9hcmVhKClgKio6IFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBhcmVhIChub3QgdGhlIHJhZGl1cykgb2YgZWFjaCBidWJibGUgaXMgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3B1bGF0aW9uLCB3aGljaCBpcyB0aGUgcGVyY2VwdHVhbGx5IGNvcnJlY3QgbWFwcGluZy4NCi0gKipBbHBoYSB0cmFuc3BhcmVuY3kqKjogV2l0aCBtYW55IG92ZXJsYXBwaW5nIGJ1YmJsZXMsIHRyYW5zcGFyZW5jeSBwcmV2ZW50cyBsYXJnZSBjb3VudHJpZXMgZnJvbSBjb21wbGV0ZWx5IG9ic2N1cmluZyBzbWFsbCBvbmVzLg0KLSAqKkNvbG9yIGJ5IGNvbnRpbmVudCoqOiBUaGlzIGFkZHMgYSBmb3VydGggdmFyaWFibGUsIGNyZWF0aW5nIGEgY2hhcnQgdGhhdCBlbmNvZGVzIEdEUCwgbGlmZSBleHBlY3RhbmN5LCBwb3B1bGF0aW9uLCBhbmQgY29udGluZW50IGluIGEgc2luZ2xlIHZpZXcuDQoNCjo6OiB7LmNhbGxvdXQtaW5mb30NCioqQ2F1dGlvbiB3aXRoIGJ1YmJsZSBjaGFydHM6KiogRG8gbm90IHVzZSBtb3JlIHRoYW4gb25lIHNpemUgdmFyaWFibGUuIEh1bWFuIHBlcmNlcHRpb24gb2YgYXJlYSBpcyBpbXByZWNpc2UsIHNvIGJ1YmJsZSBjaGFydHMgd29yayBiZXN0IHdoZW4gdGhlIHNpemUgdmFyaWFibGUgaXMgdXNlZCBmb3Igcm91Z2ggY29tcGFyaXNvbnMgKCJDaGluYSBpcyBtdWNoIGJpZ2dlciB0aGFuIE5vcndheSIpIHJhdGhlciB0aGFuIHByZWNpc2UgcmVhZGluZ3MuIElmIHlvdSBuZWVkIHByZWNpc2lvbiwgdXNlIGEgZGlmZmVyZW50IGVuY29kaW5nLg0KOjo6DQoNCiMjIEhlYXRtYXBzDQoNCkhlYXRtYXBzIHVzZSAqKmNvbG9yIGludGVuc2l0eSoqIHRvIHJlcHJlc2VudCB2YWx1ZXMgaW4gYSBtYXRyaXguIFRoZXkgYXJlIGV4Y2VsbGVudCBmb3Igc3BvdHRpbmcgcGF0dGVybnMsIGNsdXN0ZXJzLCBhbmQgb3V0bGllcnMgaW4gZGF0YSB0aGF0IGhhcyB0d28gY2F0ZWdvcmljYWwgZGltZW5zaW9ucyBhbmQgb25lIHF1YW50aXRhdGl2ZSBkaW1lbnNpb24uDQoNCmBgYHtyIGhlYXRtYXAtY2hhcnQsIGZpZy53aWR0aD04LCBmaWcuaGVpZ2h0PTYsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9DQptcGcgJT4lDQogIGdyb3VwX2J5KG1hbnVmYWN0dXJlciwgY2xhc3MpICU+JQ0KICBzdW1tYXJpc2UoYXZnX2h3eSA9IG1lYW4oaHd5KSwgLmdyb3VwcyA9ICJkcm9wIikgJT4lDQogIGdncGxvdChhZXMoeCA9IGNsYXNzLCB5ID0gbWFudWZhY3R1cmVyLCBmaWxsID0gYXZnX2h3eSkpICsNCiAgZ2VvbV90aWxlKGNvbG9yID0gIndoaXRlIiwgbGluZXdpZHRoID0gMC41KSArDQogIGdlb21fdGV4dChhZXMobGFiZWwgPSByb3VuZChhdmdfaHd5LCAwKSksIHNpemUgPSAzLCBjb2xvciA9ICJ3aGl0ZSIpICsNCiAgc2NhbGVfZmlsbF92aXJpZGlzX2Mob3B0aW9uID0gIm1ha28iLCBkaXJlY3Rpb24gPSAtMSwgbmEudmFsdWUgPSAiI2YxZjVmOSIpICsNCiAgbGFicyh0aXRsZSA9ICJBdmVyYWdlIEhpZ2h3YXkgTVBHOiBNYW51ZmFjdHVyZXIgeCBDbGFzcyIsDQogICAgICAgZmlsbCA9ICJBdmcgTVBHIiwgeCA9IE5VTEwsIHkgPSBOVUxMKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTIpICsNCiAgdGhlbWUoYXhpcy50ZXh0LnggPSBlbGVtZW50X3RleHQoYW5nbGUgPSA0NSwgaGp1c3QgPSAxKSwNCiAgICAgICAgcGFuZWwuZ3JpZCA9IGVsZW1lbnRfYmxhbmsoKSkNCmBgYA0KDQpLZXkgZWxlbWVudHMgb2YgYSBnb29kIGhlYXRtYXA6DQoNCi0gKipXaGl0ZSBib3JkZXJzKiogYmV0d2VlbiB0aWxlcyBjcmVhdGUgdmlzdWFsIHNlcGFyYXRpb24gYW5kIHByZXZlbnQgY29sb3JzIGZyb20gYmxlbmRpbmcgdG9nZXRoZXIuDQotICoqVGV4dCBsYWJlbHMqKiBpbnNpZGUgdGlsZXMgbGV0IHJlYWRlcnMgZXh0cmFjdCBleGFjdCB2YWx1ZXMsIGNvbXBlbnNhdGluZyBmb3IgdGhlIGltcHJlY2lzaW9uIG9mIGNvbG9yIHBlcmNlcHRpb24uDQotICoqQSBzZXF1ZW50aWFsIGNvbG9yIHNjYWxlKiogKGxpa2UgdmlyaWRpcyAibWFrbyIpIG1hcHMgbG93IHZhbHVlcyB0byBsaWdodCBjb2xvcnMgYW5kIGhpZ2ggdmFsdWVzIHRvIGRhcmsgKG9yIHZpY2UgdmVyc2EpLiBBdm9pZCByYWluYm93IGNvbG9yIHNjYWxlcywgd2hpY2ggY3JlYXRlIGZhbHNlIHBlcmNlcHR1YWwgYm91bmRhcmllcy4NCi0gKipNaXNzaW5nIGRhdGEgaGFuZGxpbmcqKiB3aXRoIGBuYS52YWx1ZWAgZW5zdXJlcyB0aGF0IGVtcHR5IGNlbGxzIGFyZSB2aXN1YWxseSBkaXN0aW5jdCBmcm9tIGxvdy12YWx1ZSBjZWxscy4NCg0KVGhlIHBhdHRlcm4gb2YgbWlzc2luZyB0aWxlcyAod2hlcmUgbm8gbWFudWZhY3R1cmVyIG1ha2VzIGEgdmVoaWNsZSBpbiB0aGF0IGNsYXNzKSBpcyBpdHNlbGYgaW5mb3JtYXRpdmUgLS0gaXQgcmV2ZWFscyB0aGUgbWFya2V0IHNlZ21lbnRhdGlvbiBzdHJhdGVneSBvZiBlYWNoIGJyYW5kLg0KDQojIyBDb3JyZWxhdGlvbiBNYXRyaWNlcw0KDQpBIGNvcnJlbGF0aW9uIG1hdHJpeCB2aXN1YWxpemVzIHRoZSAqKnBhaXJ3aXNlIHJlbGF0aW9uc2hpcHMqKiBiZXR3ZWVuIGFsbCBudW1lcmljIHZhcmlhYmxlcyBpbiBhIGRhdGFzZXQuIFRoZSBgR0dhbGx5YCBwYWNrYWdlIHByb3ZpZGVzIGBnZ3BhaXJzKClgLCB3aGljaCBjcmVhdGVzIGEgbWF0cml4IG9mIHNjYXR0ZXJwbG90cywgY29ycmVsYXRpb24gY29lZmZpY2llbnRzLCBhbmQgZGVuc2l0eSBjdXJ2ZXMgaW4gYSBzaW5nbGUgY2FsbC4NCg0KYGBge3IgY29ycmVsYXRpb24tbWF0cml4LWdnYWxseSwgZmlnLndpZHRoPTcsIGZpZy5oZWlnaHQ9NywgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0NCm10Y2FycyAlPiUNCiAgc2VsZWN0KG1wZywgZGlzcCwgaHAsIHd0LCBxc2VjKSAlPiUNCiAgZ2dwYWlycygNCiAgICB1cHBlciA9IGxpc3QoY29udGludW91cyA9IHdyYXAoImNvciIsIGNvbG9yID0gIiMwMDI5NjciKSksDQogICAgbG93ZXIgPSBsaXN0KGNvbnRpbnVvdXMgPSB3cmFwKCJzbW9vdGgiLCBhbHBoYSA9IDAuMywgY29sb3IgPSAiIzAwMjk2NyIpKSwNCiAgICBkaWFnID0gbGlzdChjb250aW51b3VzID0gd3JhcCgiZGVuc2l0eURpYWciLCBmaWxsID0gIiNlZmY2ZmYiLCBjb2xvciA9ICIjMDAyOTY3IikpDQogICkgKw0KICBsYWJzKHRpdGxlID0gIkNvcnJlbGF0aW9uIE1hdHJpeCDigJQgbXRjYXJzIikgKw0KICB0aGVtZV9taW5pbWFsKGJhc2Vfc2l6ZSA9IDExKQ0KYGBgDQoNClRoZSBtYXRyaXggaGFzIHRocmVlIHJlZ2lvbnM6DQoNCi0gKipVcHBlciB0cmlhbmdsZSoqOiBDb3JyZWxhdGlvbiBjb2VmZmljaWVudHMgKG51bWVyaWMgc3VtbWFyaWVzKQ0KLSAqKkxvd2VyIHRyaWFuZ2xlKio6IFNjYXR0ZXJwbG90cyB3aXRoIHNtb290aGVkIHRyZW5kIGxpbmVzICh2aXN1YWwgcmVsYXRpb25zaGlwcykNCi0gKipEaWFnb25hbCoqOiBEZW5zaXR5IHBsb3RzIChpbmRpdmlkdWFsIGRpc3RyaWJ1dGlvbnMpDQoNClRoaXMgbGF5b3V0IGlzIGVmZmljaWVudCBiZWNhdXNlIHRoZSB1cHBlciBhbmQgbG93ZXIgdHJpYW5nbGVzIGFyZSBtaXJyb3IgaW1hZ2VzIC0tIHRoZXkgc2hvdyB0aGUgc2FtZSBwYWlycywganVzdCBpbiBkaWZmZXJlbnQgZm9ybXMuIFRvZ2V0aGVyLCB0aGV5IGdpdmUgeW91IGJvdGggdGhlIG51bWJlciBhbmQgdGhlIHNoYXBlIG9mIGVhY2ggcmVsYXRpb25zaGlwLg0KDQo6Ojogey5jYWxsb3V0LXRpcH0NCioqUmVhZGluZyBjb3JyZWxhdGlvbnM6KiogTG9vayBmb3IgdGhlIHN0cm9uZ2VzdCByZWxhdGlvbnNoaXBzIGZpcnN0LiBJbiB0aGUgbXRjYXJzIGRhdGEsIGB3dGAgYW5kIGBtcGdgIGhhdmUgYSBzdHJvbmcgbmVnYXRpdmUgY29ycmVsYXRpb24gKGhlYXZpZXIgY2FycyBnZXQgd29yc2UgbWlsZWFnZSksIHdoaWxlIGBkaXNwYCBhbmQgYGhwYCBoYXZlIGEgc3Ryb25nIHBvc2l0aXZlIGNvcnJlbGF0aW9uIChiaWdnZXIgZW5naW5lcyB0ZW5kIHRvIGJlIG1vcmUgcG93ZXJmdWwpLiBUaGVzZSBhcmUgZXhhY3RseSB0aGUgcGF0dGVybnMgeW91IHdvdWxkIGV4cGVjdCBmcm9tIGRvbWFpbiBrbm93bGVkZ2UsIHdoaWNoIGlzIHJlYXNzdXJpbmcuDQo6OjoNCg0KIyMgVmlvbGluIFBsb3RzDQoNClZpb2xpbiBwbG90cyBjb21iaW5lIHRoZSBzdW1tYXJ5IHN0YXRpc3RpY3Mgb2YgYSBib3hwbG90IHdpdGggdGhlIGRpc3RyaWJ1dGlvbmFsIHNoYXBlIG9mIGEgZGVuc2l0eSBwbG90LiBUaGUgInZpb2xpbiIgc2hhcGUgc2hvd3Mgd2hlcmUgdGhlIGRhdGEgaXMgY29uY2VudHJhdGVkLCB3aGlsZSB0aGUgZW1iZWRkZWQgYm94cGxvdCBtYXJrcyB0aGUgbWVkaWFuIGFuZCBpbnRlcnF1YXJ0aWxlIHJhbmdlLg0KDQpgYGB7ciB2aW9saW4tcGxvdC1jbGFzcywgZmlnLndpZHRoPTgsIGZpZy5oZWlnaHQ9NSwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0NCmdncGxvdChtcGcsIGFlcyh4ID0gZmN0X3Jlb3JkZXIoY2xhc3MsIGh3eSwgLmZ1biA9IG1lZGlhbiksIHkgPSBod3ksIGZpbGwgPSBjbGFzcykpICsNCiAgZ2VvbV92aW9saW4oYWxwaGEgPSAwLjYsIGNvbG9yID0gTkEpICsNCiAgZ2VvbV9ib3hwbG90KHdpZHRoID0gMC4xNSwgZmlsbCA9ICJ3aGl0ZSIsIG91dGxpZXIuc2l6ZSA9IDEpICsNCiAgc2NhbGVfZmlsbF9icmV3ZXIocGFsZXR0ZSA9ICJTZXQzIikgKw0KICBsYWJzKHRpdGxlID0gIkhpZ2h3YXkgTVBHIGJ5IFZlaGljbGUgQ2xhc3MiLA0KICAgICAgIHN1YnRpdGxlID0gIlZpb2xpbiArIGJveHBsb3Qgb3ZlcmxheSIsDQogICAgICAgeCA9IE5VTEwsIHkgPSAiSGlnaHdheSBNUEciKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpICsNCiAgdGhlbWUobGVnZW5kLnBvc2l0aW9uID0gIm5vbmUiKQ0KYGBgDQoNClRoZSBjb21iaW5hdGlvbiBvZiB2aW9saW4gYW5kIGJveHBsb3QgaXMgbW9yZSBpbmZvcm1hdGl2ZSB0aGFuIGVpdGhlciBhbG9uZToNCg0KLSBUaGUgKip2aW9saW4qKiBzaG93cyB3aGV0aGVyIHRoZSBkaXN0cmlidXRpb24gaXMgdW5pbW9kYWwsIGJpbW9kYWwsIG9yIHNrZXdlZCAtLSBpbmZvcm1hdGlvbiB0aGF0IGEgYm94cGxvdCBoaWRlcyBlbnRpcmVseS4NCi0gVGhlICoqYm94cGxvdCoqIGFkZHMgcHJlY2lzZSByZWZlcmVuY2UgcG9pbnRzIChtZWRpYW4sIHF1YXJ0aWxlcykgdGhhdCBhcmUgZGlmZmljdWx0IHRvIHJlYWQgZnJvbSBhIGRlbnNpdHkgc2hhcGUgYWxvbmUuDQoNCk5vdGljZSB0aGF0IHdlIHNldCBgY29sb3IgPSBOQWAgb24gdGhlIHZpb2xpbiB0byByZW1vdmUgdGhlIG91dGxpbmUgYW5kIGBmaWxsID0gIndoaXRlImAgb24gdGhlIGJveHBsb3Qgc28gaXQgc2l0cyBjbGVhbmx5IGluc2lkZSB0aGUgdmlvbGluIHNoYXBlLg0KDQojIyBBIERlY2lzaW9uIEZyYW1ld29yaw0KDQpXaGVuIHlvdSBhcmUgZmFjZWQgd2l0aCBhIG5ldyBkYXRhc2V0IGFuZCBuZWVkIHRvIGNob29zZSBhIGNoYXJ0IHR5cGUsIHdvcmsgdGhyb3VnaCB0aGVzZSBxdWVzdGlvbnM6DQoNCioqIldoYXQgaXMgbXkgcHJpbWFyeSBxdWVzdGlvbj8iKioNCg0KfCBJIHdhbnQgdG8uLi4gICAgICAgICAgICAgICAgICAgIHwgQ29uc2lkZXIgdGhlc2UgY2hhcnQgdHlwZXMgICAgICAgICAgICAgICAgICAgIHwNCnw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18DQp8IENvbXBhcmUgdmFsdWVzIGFjcm9zcyBncm91cHMgICAgfCBCYXIgY2hhcnQsIGxvbGxpcG9wIGNoYXJ0LCBkdW1iYmVsbCBjaGFydCAgICAgfA0KfCBTaG93IGEgZGlzdHJpYnV0aW9uICAgICAgICAgICAgIHwgSGlzdG9ncmFtLCBkZW5zaXR5IHBsb3QsIHZpb2xpbiwgcmlkZ2VsaW5lICAgIHwNCnwgU2hvdyBhIHJlbGF0aW9uc2hpcCAgICAgICAgICAgICB8IFNjYXR0ZXJwbG90LCBidWJibGUgY2hhcnQsIGhlYXRtYXAgICAgICAgICAgICB8DQp8IFNob3cgY29tcG9zaXRpb24gLyBwYXJ0cy13aG9sZSAgfCBTdGFja2VkIGJhciBjaGFydCwgdHJlZW1hcCwgd2FmZmxlIGNoYXJ0ICAgICAgfA0KfCBTaG93IGNoYW5nZSBvdmVyIHRpbWUgICAgICAgICAgIHwgTGluZSBjaGFydCwgYXJlYSBjaGFydCwgc3BhcmtsaW5lICAgICAgICAgICAgIHwNCg0KKioiSG93IG1hbnkgY2F0ZWdvcmllcyBkbyBJIGhhdmU/IioqDQoNCi0gMi0tNSBjYXRlZ29yaWVzOiBBbG1vc3QgYW55IGNoYXJ0IHR5cGUgd29ya3MNCi0gNi0tMTUgY2F0ZWdvcmllczogTG9sbGlwb3AsIHJpZGdlbGluZSwgYW5kIGhlYXRtYXBzIGhhbmRsZSB0aGlzIHJhbmdlIHdlbGwNCi0gMTUrIGNhdGVnb3JpZXM6IENvbnNpZGVyIGZpbHRlcmluZywgZ3JvdXBpbmcsIG9yIHVzaW5nIHNtYWxsIG11bHRpcGxlcw0KDQoqKiJXaG8gaXMgbXkgYXVkaWVuY2U/IioqDQoNCi0gR2VuZXJhbCBwdWJsaWM6IFN0aWNrIHRvIGZhbWlsaWFyIHR5cGVzIChiYXIsIGxpbmUsIHNjYXR0ZXIpDQotIFRlY2huaWNhbCBhdWRpZW5jZTogWW91IGNhbiB1c2UgbW9yZSBzcGVjaWFsaXplZCB0eXBlcyAocmlkZ2VsaW5lLCBjb3JyZWxvZ3JhbSwgdHJlZW1hcCkNCi0gRGVjaXNpb24gbWFrZXJzOiBQcmlvcml0aXplIGNsYXJpdHkgYW5kIGFubm90YXRlIGtleSB0YWtlYXdheXMgZGlyZWN0bHkgb24gdGhlIGNoYXJ0DQoNCjo6OiB7LmNhbGxvdXQtaW5mb30NCioqVGhlICJvbmUgbW9yZSBjaGFydCIgcnVsZToqKiBJZiB5b3UgaGF2ZSB0aW1lLCBhbHdheXMgdHJ5IGF0IGxlYXN0IG9uZSBhbHRlcm5hdGl2ZSBjaGFydCB0eXBlIGZvciB5b3VyIGRhdGEuIFlvdSBtYXkgZGlzY292ZXIgdGhhdCBhIGRpZmZlcmVudCBlbmNvZGluZyByZXZlYWxzIGEgcGF0dGVybiB5b3UgbWlzc2VkLiBWaXN1YWxpemF0aW9uIGlzIGFuIGl0ZXJhdGl2ZSBwcm9jZXNzLg0KOjo6DQoNCiMjIElnbmF0aWFuIFJlZmxlY3Rpb24NCg0KOjo6IHsuY2FsbG91dC1pZ25hdGlhbn0NCioqIk1lbiBhbmQgV29tZW4gZm9yIE90aGVycyIgLS0gQ2hhcnQgQ2hvaWNlIGFzIGFuIEFjdCBvZiBTZXJ2aWNlKioNCg0KQ2hvb3NpbmcgdGhlIHJpZ2h0IGNoYXJ0IHR5cGUgaXMgbm90IG1lcmVseSBhIHRlY2huaWNhbCBza2lsbCAtLSBpdCBpcyBhbiBhY3Qgb2Ygc2VydmljZSB0byB5b3VyIGF1ZGllbmNlLiBXaGVuIHlvdSBzZWxlY3QgYSB2aXN1YWxpemF0aW9uIHRoYXQgY2xlYXJseSBjb21tdW5pY2F0ZXMgYSBwYXR0ZXJuLCB5b3UgZW1wb3dlciBvdGhlcnMgdG8gdW5kZXJzdGFuZCBhbmQgYWN0LiBXaGVuIHlvdSBjaG9vc2UgYSBjaGFydCB0aGF0IG9ic2N1cmVzIG9yIG1pc2xlYWRzLCB5b3UgZmFpbCBpbiB0aGF0IHJlc3BvbnNpYmlsaXR5Lg0KDQpTdC4gSWduYXRpdXMgc3Bva2Ugb2YgKkN1cmEgUGVyc29uYWxpcyogLS0gY2FyZSBmb3IgdGhlIHdob2xlIHBlcnNvbi4gSW4gdGhlIGNvbnRleHQgb2YgZGF0YSB2aXN1YWxpemF0aW9uLCB0aGlzIG1lYW5zIGNvbnNpZGVyaW5nIHlvdXIgYXVkaWVuY2UncyBiYWNrZ3JvdW5kLCBsaXRlcmFjeSwgYW5kIG5lZWRzLiBBIHJpZGdlbGluZSBwbG90IG1heSBiZSBiZWF1dGlmdWwgYW5kIGluZm9ybWF0aW9uLXJpY2gsIGJ1dCBpZiB5b3VyIGF1ZGllbmNlIGhhcyBuZXZlciBzZWVuIG9uZSBiZWZvcmUsIGEgc2ltcGxlciBjaGFydCB3aXRoIGNhcmVmdWwgYW5ub3RhdGlvbiBtYXkgc2VydmUgdGhlbSBiZXR0ZXIuIFRoZSBnb2FsIGlzIG5vdCB0byBzaG93Y2FzZSB5b3VyIHRlY2huaWNhbCBza2lsbHMgYnV0IHRvIGlsbHVtaW5hdGUgdHJ1dGguDQoNClRoZSB3cm9uZyBjaGFydCBjYW4gbWlzbGVhZDsgdGhlIHJpZ2h0IG9uZSBpbGx1bWluYXRlcy4gQXMgeW91IHByYWN0aWNlIGJ1aWxkaW5nIGRpZmZlcmVudCBjaGFydCB0eXBlcyB0aGlzIHdlZWssIGFzayB5b3Vyc2VsZjogKkFtIEkgY2hvb3NpbmcgdGhpcyBjaGFydCBiZWNhdXNlIGl0IHNlcnZlcyBteSBhdWRpZW5jZSwgb3IgYmVjYXVzZSBpdCBsb29rcyBpbXByZXNzaXZlPyogVGhlIGFuc3dlciB0byB0aGF0IHF1ZXN0aW9uIGlzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gZGVjb3JhdGlvbiBhbmQgY29tbXVuaWNhdGlvbi4NCjo6Og0KDQotLS0NCg0KIyMgQ2hhbGxlbmdlOiBDaGFydCBNYXRjaG1ha2VyDQoNCjxkaXYgY2xhc3M9InNhbmRib3gtc2VjdGlvbiI+DQo8ZGl2IGNsYXNzPSJzYW5kYm94LWhlYWRlciI+DQo8c3BhbiBjbGFzcz0ic2FuZGJveC1pY29uIj7wn46uPC9zcGFuPiBDaGFydCBNYXRjaG1ha2VyIOKAlCBUaGUgcmlnaHQgY2hhcnQgZm9yIHRoZSByaWdodCBxdWVzdGlvbg0KPC9kaXY+DQo8aWZyYW1lIGNsYXNzPSJzYW5kYm94LWZyYW1lIiBzcmM9Imh0dHBzOi8vYW5hbHl0aWNzLmdvbnphZ2EuZWR1L3dlZWswNC1nYW1lLyINCiAgICAgICAgaGVpZ2h0PSI3MDAiIGxvYWRpbmc9ImxhenkiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4NCjxkaXYgY2xhc3M9InNhbmRib3gtY29sZC1zdGFydCI+DQpJZiB0aGUgYXBwIHRha2VzIGEgZmV3IHNlY29uZHMgdG8gbG9hZCBvbiBmaXJzdCB2aXNpdCwgdGhhdCBpcyBub3JtYWwg4oCUIHRoZSBzZXJ2ZXIgaXMgd2FraW5nIHVwLg0KPC9kaXY+DQo8L2Rpdj4NCg0KOjo6IHsudHJ5LWl0LWJveH0NCioqSG93IHRvIFBsYXk6KioNCg0KMS4gRW50ZXIgeW91ciBuYW1lIGFuZCBjbGljayAqKlN0YXJ0IEdhbWUqKg0KMi4gRWFjaCByb3VuZCBwcmVzZW50cyBhIGJ1c2luZXNzIHF1ZXN0aW9uIGFuZCBkYXRhIGRlc2NyaXB0aW9uDQozLiBTZWxlY3QgdGhlIGJlc3QgY2hhcnQgdHlwZSBmcm9tIHRoZSBncmlkIG9mIDcgb3B0aW9ucw0KNC4gQ29tcGxldGUgYWxsIDEwIHJvdW5kcywgdGhlbiBjb3B5IHlvdXIgY29tcGxldGlvbiByZXBvcnQgaW50byB0aGUgQ2FudmFzIGFzc2lnbm1lbnQNCjo6Og0KDQotLS0NCg0KIyMgRXhlcmNpc2VzDQoNCjo6OiB7LmV4ZXJjaXNlLWJsb2NrfQ0KOjo6IHsuZXhlcmNpc2UtaGVhZGVyfQ0KV2VlayA0IEV4ZXJjaXNlcw0KOjo6DQo6Ojogey5leGVyY2lzZS1ib2R5fQ0KDQoqKkV4ZXJjaXNlIDE6IExvbGxpcG9wIENoYXJ0IHdpdGggR2FwbWluZGVyKioNCg0KVXNpbmcgdGhlIGBnYXBtaW5kZXJgIHBhY2thZ2UsIGZpbHRlciB0aGUgZGF0YSB0byB0aGUgeWVhciAyMDA3IGFuZCBhIHNpbmdsZSBjb250aW5lbnQgb2YgeW91ciBjaG9pY2UuIENyZWF0ZSBhIGxvbGxpcG9wIGNoYXJ0IHNob3dpbmcgbGlmZSBleHBlY3RhbmN5IGJ5IGNvdW50cnksIHNvcnRlZCBmcm9tIGhpZ2hlc3QgdG8gbG93ZXN0LiBVc2UgR29uemFnYSBuYXZ5IChgIzAwMjk2N2ApIGZvciB0aGUgZG90cyBhbmQgYSBsaWdodCBncmF5IGZvciB0aGUgc3RlbXMuIEFkZCBhIG1lYW5pbmdmdWwgdGl0bGUgYW5kIHN1YnRpdGxlLg0KDQpGaWxsIGluIHRoZSBibGFua3MgaW4gdGhlIHN0YXJ0ZXIgY29kZSBiZWxvdzoNCg0KYGBge3IgZXhlcmNpc2UtbG9sbGlwb3AtZ2FwbWluZGVyLCBldmFsPUZBTFNFfQ0KbGlicmFyeShnYXBtaW5kZXIpDQoNCmdhcG1pbmRlciAlPiUNCiAgZmlsdGVyKHllYXIgPT0gMjAwNywgY29udGluZW50ID09ICJfX18iKSAlPiUNCiAgbXV0YXRlKGNvdW50cnkgPSBmY3RfcmVvcmRlcihjb3VudHJ5LCBsaWZlRXhwKSkgJT4lDQogIGdncGxvdChhZXMoeCA9IGxpZmVFeHAsIHkgPSBjb3VudHJ5KSkgKw0KICBnZW9tX3NlZ21lbnQoYWVzKHggPSAwLCB4ZW5kID0gX19fLCB5ZW5kID0gX19fKSwNCiAgICAgICAgICAgICAgIGNvbG9yID0gIiM5NGEzYjgiLCBsaW5ld2lkdGggPSAwLjgpICsNCiAgZ2VvbV9wb2ludChjb2xvciA9ICJfX18iLCBzaXplID0gMykgKw0KICBsYWJzKHRpdGxlID0gIl9fXyIsDQogICAgICAgc3VidGl0bGUgPSAiX19fIiwNCiAgICAgICB4ID0gIkxpZmUgRXhwZWN0YW5jeSAoeWVhcnMpIiwgeSA9IE5VTEwpICsNCiAgdGhlbWVfbWluaW1hbChiYXNlX3NpemUgPSAxMikNCmBgYA0KDQoqKkhpbnRzOioqDQoNCi0gVGhlIGB4ZW5kYCBpbiBgZ2VvbV9zZWdtZW50KClgIHNob3VsZCBiZSB0aGUgc2FtZSB2YXJpYWJsZSBtYXBwZWQgdG8gdGhlIHgtYXhpcy4NCi0gVGhlIGB5ZW5kYCBzaG91bGQgYmUgdGhlIHNhbWUgdmFyaWFibGUgbWFwcGVkIHRvIHRoZSB5LWF4aXMuDQotIEdvbnphZ2EgbmF2eSBpcyBgIzAwMjk2N2AuDQoNCi0tLQ0KDQoqKkV4ZXJjaXNlIDI6IFJpZGdlbGluZSBQbG90IG9mIERpYW1vbmQgUHJpY2VzKioNCg0KVXNpbmcgdGhlIGJ1aWx0LWluIGBkaWFtb25kc2AgZGF0YXNldCwgY3JlYXRlIGEgcmlkZ2VsaW5lIHBsb3Qgc2hvd2luZyB0aGUgZGlzdHJpYnV0aW9uIG9mIGBwcmljZWAgYnkgYGN1dGAgcXVhbGl0eS4gVXNlIGBmY3RfcmVvcmRlcigpYCB0byBzb3J0IHRoZSBjdXRzIGJ5IG1lZGlhbiBwcmljZS4gRXhwZXJpbWVudCB3aXRoIHRoZSBgc2NhbGVgIHBhcmFtZXRlciBhbmQgY2hvb3NlIGEgY29sb3IgcGFsZXR0ZSB0aGF0IHdvcmtzIHdlbGwuDQoNCkZpbGwgaW4gdGhlIGJsYW5rczoNCg0KYGBge3IgZXhlcmNpc2UtcmlkZ2VsaW5lLWRpYW1vbmRzLCBldmFsPUZBTFNFfQ0KbGlicmFyeShnZ3JpZGdlcykNCg0KZ2dwbG90KGRpYW1vbmRzLCBhZXMoeCA9IF9fXywgeSA9IGZjdF9yZW9yZGVyKF9fXywgX19fLCAuZnVuID0gbWVkaWFuKSwNCiAgICAgICAgICAgICAgICAgICAgIGZpbGwgPSBhZnRlcl9zdGF0KHgpKSkgKw0KICBnZW9tX2RlbnNpdHlfcmlkZ2VzX2dyYWRpZW50KHNjYWxlID0gX19fLCByZWxfbWluX2hlaWdodCA9IDAuMDEpICsNCiAgc2NhbGVfZmlsbF92aXJpZGlzX2Mob3B0aW9uID0gIl9fXyIpICsNCiAgbGFicyh0aXRsZSA9ICJfX18iLA0KICAgICAgIHN1YnRpdGxlID0gIl9fXyIsDQogICAgICAgeCA9ICJQcmljZSAoVVNEKSIsIHkgPSBOVUxMKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9zaXplID0gMTMpICsNCiAgdGhlbWUobGVnZW5kLnBvc2l0aW9uID0gIm5vbmUiKQ0KYGBgDQoNCioqSGludHM6KioNCg0KLSBUaGUgeCBhZXN0aGV0aWMgc2hvdWxkIGJlIHRoZSB2YXJpYWJsZSB3aG9zZSBkaXN0cmlidXRpb24geW91IHdhbnQgdG8gc2hvdyAoYHByaWNlYCkuDQotIFRoZSBmaXJzdCBhcmd1bWVudCB0byBgZmN0X3Jlb3JkZXIoKWAgaXMgdGhlIGZhY3RvciB2YXJpYWJsZSAoYGN1dGApLCBhbmQgdGhlIHNlY29uZCBpcyB0aGUgbnVtZXJpYyB2YXJpYWJsZSB0byBzb3J0IGJ5IChgcHJpY2VgKS4NCi0gVHJ5IGBzY2FsZWAgdmFsdWVzIGJldHdlZW4gMS41IGFuZCAzIHRvIHNlZSBob3cgdGhlIG92ZXJsYXAgY2hhbmdlcy4NCi0gVmlyaWRpcyBvcHRpb25zIGluY2x1ZGUgYCJtYWdtYSJgLCBgInBsYXNtYSJgLCBgImluZmVybm8iYCwgYCJ2aXJpZGlzImAsIGFuZCBgIm1ha28iYC4NCg0KLS0tDQoNCioqRXhlcmNpc2UgMzogRHVtYmJlbGwgQ2hhcnQgLS0gQmVmb3JlIGFuZCBBZnRlcioqDQoNClVzaW5nIHRoZSBgZ2FwbWluZGVyYCBkYXRhc2V0LCBjb21wYXJlIGxpZmUgZXhwZWN0YW5jeSBpbiAxOTUyIHZzLiAyMDA3IGZvciBjb3VudHJpZXMgaW4gdGhlIEFtZXJpY2FzLiBDcmVhdGUgYSBkdW1iYmVsbCBjaGFydCB0aGF0IHNob3dzIGJvdGggdmFsdWVzIGZvciBlYWNoIGNvdW50cnksIGNvbm5lY3RlZCBieSBhIGxpbmUuIFVzZSBHb256YWdhIHJlZCAoYCNDNDFFM0FgKSBmb3IgMTk1MiBhbmQgR29uemFnYSBuYXZ5IChgIzAwMjk2N2ApIGZvciAyMDA3Lg0KDQpGaWxsIGluIHRoZSBibGFua3M6DQoNCmBgYHtyIGV4ZXJjaXNlLWR1bWJiZWxsLWdhcG1pbmRlciwgZXZhbD1GQUxTRX0NCmxpYnJhcnkoZ2FwbWluZGVyKQ0KDQpkdW1iYmVsbF9hbWVyaWNhcyA8LSBnYXBtaW5kZXIgJT4lDQogIGZpbHRlcihjb250aW5lbnQgPT0gIkFtZXJpY2FzIiwgeWVhciAlaW4lIGMoX19fLCBfX18pKSAlPiUNCiAgc2VsZWN0KGNvdW50cnksIHllYXIsIGxpZmVFeHApICU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0geWVhciwgdmFsdWVzX2Zyb20gPSBsaWZlRXhwLA0KICAgICAgICAgICAgICBuYW1lc19wcmVmaXggPSAieWVhcl8iKSAlPiUNCiAgbXV0YXRlKGNvdW50cnkgPSBmY3RfcmVvcmRlcihjb3VudHJ5LCBfX18pKQ0KDQpnZ3Bsb3QoZHVtYmJlbGxfYW1lcmljYXMpICsNCiAgZ2VvbV9zZWdtZW50KGFlcyh4ID0geWVhcl8xOTUyLCB4ZW5kID0gX19fLCB5ID0gY291bnRyeSwgeWVuZCA9IF9fXyksDQogICAgICAgICAgICAgICBjb2xvciA9ICIjOTRhM2I4IiwgbGluZXdpZHRoID0gMS4yKSArDQogIGdlb21fcG9pbnQoYWVzKHggPSBfX18sIHkgPSBjb3VudHJ5KSwgY29sb3IgPSAiI0M0MUUzQSIsIHNpemUgPSAzKSArDQogIGdlb21fcG9pbnQoYWVzKHggPSBfX18sIHkgPSBjb3VudHJ5KSwgY29sb3IgPSAiIzAwMjk2NyIsIHNpemUgPSAzKSArDQogIGxhYnModGl0bGUgPSAiX19fIiwNCiAgICAgICBzdWJ0aXRsZSA9ICJSZWQgPSAxOTUyIHwgTmF2eSA9IDIwMDciLA0KICAgICAgIHggPSAiTGlmZSBFeHBlY3RhbmN5ICh5ZWFycykiLCB5ID0gTlVMTCkgKw0KICB0aGVtZV9taW5pbWFsKGJhc2Vfc2l6ZSA9IDEyKQ0KYGBgDQoNCioqSGludHM6KioNCg0KLSBTb3J0IGNvdW50cmllcyBieSB0aGVpciAyMDA3IGxpZmUgZXhwZWN0YW5jeSAoYHllYXJfMjAwN2ApIGZvciBhIGNsZWFuIHZpc3VhbCBvcmRlcmluZy4NCi0gVGhlIGB4ZW5kYCBpbiBgZ2VvbV9zZWdtZW50KClgIHNob3VsZCBiZSBgeWVhcl8yMDA3YC4NCi0gVGhlIGZpcnN0IGBnZW9tX3BvaW50KClgIG1hcHMgeCB0byB0aGUgMTk1MiBjb2x1bW47IHRoZSBzZWNvbmQgbWFwcyB4IHRvIHRoZSAyMDA3IGNvbHVtbi4NCg0KLS0tDQoNCioqRXhlcmNpc2UgNDogSGVhdG1hcCBvZiBtdGNhcnMgQ29ycmVsYXRpb25zKioNCg0KQ29tcHV0ZSB0aGUgY29ycmVsYXRpb24gbWF0cml4IGZvciB0aGUgbnVtZXJpYyBjb2x1bW5zIGluIGBtdGNhcnNgLCB0aGVuIHJlc2hhcGUgaXQgaW50byBhIGxvbmcgZm9ybWF0IHN1aXRhYmxlIGZvciBgZ2VvbV90aWxlKClgLiBDcmVhdGUgYSBoZWF0bWFwIG9mIHRoZSBjb3JyZWxhdGlvbnMgd2l0aCB0ZXh0IGxhYmVscyBpbnNpZGUgZWFjaCB0aWxlLiBVc2UgYSAqKmRpdmVyZ2luZyoqIGNvbG9yIHNjYWxlIChlLmcuLCBibHVlIGZvciBuZWdhdGl2ZSwgd2hpdGUgZm9yIHplcm8sIHJlZCBmb3IgcG9zaXRpdmUpLg0KDQpGaWxsIGluIHRoZSBibGFua3M6DQoNCmBgYHtyIGV4ZXJjaXNlLWhlYXRtYXAtY29ycmVsYXRpb25zLCBldmFsPUZBTFNFfQ0KY29yX21hdHJpeCA8LSBtdGNhcnMgJT4lDQogIHNlbGVjdChtcGcsIGN5bCwgZGlzcCwgaHAsIGRyYXQsIHd0LCBxc2VjKSAlPiUNCiAgY29yKCkNCg0KY29yX2xvbmcgPC0gY29yX21hdHJpeCAlPiUNCiAgYXMuZGF0YS5mcmFtZSgpICU+JQ0KICByb3duYW1lc190b19jb2x1bW4oInZhcjEiKSAlPiUNCiAgcGl2b3RfbG9uZ2VyKC12YXIxLCBuYW1lc190byA9ICJ2YXIyIiwgdmFsdWVzX3RvID0gImNvcnJlbGF0aW9uIikNCg0KZ2dwbG90KGNvcl9sb25nLCBhZXMoeCA9IHZhcjEsIHkgPSB2YXIyLCBmaWxsID0gX19fKSkgKw0KICBnZW9tX3RpbGUoY29sb3IgPSAid2hpdGUiKSArDQogIGdlb21fdGV4dChhZXMobGFiZWwgPSByb3VuZChfX18sIDIpKSwgc2l6ZSA9IDMpICsNCiAgc2NhbGVfZmlsbF9ncmFkaWVudDIobG93ID0gIl9fXyIsIG1pZCA9ICJfX18iLCBoaWdoID0gIl9fXyIsIG1pZHBvaW50ID0gMCkgKw0KICBsYWJzKHRpdGxlID0gIl9fXyIsIGZpbGwgPSAiQ29ycmVsYXRpb24iKSArDQogIHRoZW1lX21pbmltYWwoKSArDQogIHRoZW1lKGF4aXMudGV4dC54ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gNDUsIGhqdXN0ID0gMSkpDQpgYGANCg0KKipIaW50czoqKg0KDQotIFRoZSBgZmlsbGAgYWVzdGhldGljIGFuZCB0aGUgYGxhYmVsYCB2YWx1ZSBib3RoIHVzZSB0aGUgYGNvcnJlbGF0aW9uYCBjb2x1bW4uDQotIEZvciBgc2NhbGVfZmlsbF9ncmFkaWVudDIoKWAsIGEgbmF0dXJhbCBjaG9pY2UgaXMgYGxvdyA9ICIjMDAyOTY3ImAgKG5hdnkgZm9yIG5lZ2F0aXZlKSwgYG1pZCA9ICJ3aGl0ZSJgLCBhbmQgYGhpZ2ggPSAiI0M0MUUzQSJgIChyZWQgZm9yIHBvc2l0aXZlKS4NCi0gQ29uc2lkZXIgYWRkaW5nIGBwYW5lbC5ncmlkID0gZWxlbWVudF9ibGFuaygpYCB0byByZW1vdmUgZ3JpZCBsaW5lcyBiZWhpbmQgdGhlIHRpbGVzLg0KDQotLS0NCg0KKipFeGVyY2lzZSA1OiBUaHJlZSBDaGFydHMsIE9uZSBEYXRhc2V0KioNCg0KQ2hvb3NlIGEgZGF0YXNldCBhbmQgYSBxdWVzdGlvbi4gVGhlbiBjcmVhdGUgKip0aHJlZSBkaWZmZXJlbnQgY2hhcnQgdHlwZXMqKiB0aGF0IGF0dGVtcHQgdG8gYW5zd2VyIHRoZSBzYW1lIHF1ZXN0aW9uLiBGb3IgZXhhbXBsZSwgaWYgeW91ciBxdWVzdGlvbiBpcyAiSG93IGRvZXMgaGlnaHdheSBNUEcgdmFyeSBieSB2ZWhpY2xlIGNsYXNzPyIsIHlvdSBtaWdodCBjcmVhdGUgYSBib3hwbG90LCBhIHZpb2xpbiBwbG90LCBhbmQgYSByaWRnZWxpbmUgcGxvdC4NCg0KRm9yIGVhY2ggY2hhcnQsIHdyaXRlIDItLTMgc2VudGVuY2VzIGV4cGxhaW5pbmcgd2hhdCB0aGUgY2hhcnQgcmV2ZWFscyBhbmQgd2hhdCBpdCBoaWRlcy4gVGhlbiB3cml0ZSBhIGJyaWVmIHBhcmFncmFwaCAoNC0tNSBzZW50ZW5jZXMpIGFyZ3Vpbmcgd2hpY2ggb2YgdGhlIHRocmVlIGlzIHRoZSBtb3N0IGVmZmVjdGl2ZSBmb3IgeW91ciBzcGVjaWZpYyBxdWVzdGlvbiBhbmQgYXVkaWVuY2UuIFRoZXJlIGlzIG5vIHNpbmdsZSByaWdodCBhbnN3ZXIgLS0gdGhlIHBvaW50IGlzIHRvIHByYWN0aWNlIGV2YWx1YXRpbmcgdHJhZGUtb2Zmcy4NCg0KSGVyZSBpcyBhIHN0YXJ0ZXIgdGVtcGxhdGUgdG8gZ2V0IHlvdSBnb2luZzoNCg0KYGBge3IgZXhlcmNpc2UtdGhyZWUtY2hhcnRzLXNldHVwLCBldmFsPUZBTFNFfQ0KbGlicmFyeSh0aWR5dmVyc2UpDQoNCiMgQ2hvb3NlIHlvdXIgZGF0YXNldCBhbmQgcXVlc3Rpb246DQojIERhdGFzZXQ6IF9fXw0KIyBRdWVzdGlvbjogIkhvdyBkb2VzIF9fXyB2YXJ5IGJ5IF9fXz8iDQoNCiMgQ2hhcnQgMTogX19fDQojICh5b3VyIGNvZGUgaGVyZSkNCg0KIyBDaGFydCAyOiBfX18NCiMgKHlvdXIgY29kZSBoZXJlKQ0KDQojIENoYXJ0IDM6IF9fXw0KIyAoeW91ciBjb2RlIGhlcmUpDQpgYGANCg0KV3JpdGUgeW91ciBjb21wYXJpc29uIHBhcmFncmFwaCBiZWxvdyBlYWNoIGNoYXJ0IGluIHlvdXIgUiBNYXJrZG93biBkb2N1bWVudC4NCg0KOjo6DQo6OjoNCg0KIyMgQXR0cmlidXRpb25zDQoNClRoaXMgY291cnNlIG1hdGVyaWFsIGRyYXdzIG9uIGFuZCBpcyBpbnNwaXJlZCBieSB0aGUgd29yayBvZiBtYW55IHNjaG9sYXJzIGFuZCBwcmFjdGl0aW9uZXJzOg0KDQotICoqVml2ZWsgSC4gUGF0aWwqKiAtLSBmb3VuZGF0aW9uYWwgY291cnNlIGRlc2lnbiBhbmQgbWF0ZXJpYWxzIGZvciBkYXRhIHZpc3VhbGl6YXRpb24gYXQgR29uemFnYSBVbml2ZXJzaXR5DQotICoqV2lsa2UsIEMuTy4qKiAtLSAqRnVuZGFtZW50YWxzIG9mIERhdGEgVmlzdWFsaXphdGlvbiogKE8nUmVpbGx5LCAyMDE5KSwgQ2hhcHRlcnMgNi0tMTINCi0gKipIZWFseSwgSy4qKiAtLSAqRGF0YSBWaXN1YWxpemF0aW9uOiBBIFByYWN0aWNhbCBJbnRyb2R1Y3Rpb24qIChQcmluY2V0b24gVW5pdmVyc2l0eSBQcmVzcywgMjAxOCkNCi0gKipXaWNraGFtLCBILioqIC0tICpnZ3Bsb3QyOiBFbGVnYW50IEdyYXBoaWNzIGZvciBEYXRhIEFuYWx5c2lzKiAoU3ByaW5nZXIsIDNyZCBlZGl0aW9uKQ0KLSAqKlNjaHdhYmlzaCwgSi4qKiAoMjAxNCkuICJBbiBFY29ub21pc3QncyBHdWlkZSB0byBWaXN1YWxpemluZyBEYXRhLiIgKkpvdXJuYWwgb2YgRWNvbm9taWMgUGVyc3BlY3RpdmVzKiwgMjgoMSksIDIwOS0tMjM0Lg0KDQo8ZGl2IGNsYXNzPSJwYWdlLW5hdiI+DQo8YSBocmVmPSJ3ZWVrMDMuaHRtbCI+JmxhcnI7IFdlZWsgMzwvYT4NCjxhIGhyZWY9IndlZWswNS5odG1sIj5XZWVrIDUgJnJhcnI7PC9hPg0KPC9kaXY+DQo=</div>
<footer style="background:#002967; color:rgba(255,255,255,.75); padding:2.5rem 0 1.5rem; margin-top:3rem;">
<div class="container-fluid" style="max-width:1100px; margin:0 auto; padding:0 2rem;">
  <div class="row">
    <div class="col-md-5">
      <h5 style="color:#fff; font-size:.95rem;">Data Visualization &mdash; Gonzaga University</h5>
      <p style="font-size:.85rem;">School of Business Administration. A course in the Jesuit tradition of intellectual rigor, ethical inquiry, and service to the common good.</p>
    </div>
    <div class="col-md-2">
      <h5 style="color:#fff; font-size:.95rem;">References</h5>
      <ul style="list-style:none; padding:0; font-size:.85rem;">
        <li><a href="https://clauswilke.com/dataviz/" target="_blank" style="color:rgba(255,255,255,.7);">Wilke Textbook</a></li>
        <li><a href="https://socviz.co/" target="_blank" style="color:rgba(255,255,255,.7);">Healy Textbook</a></li>
        <li><a href="https://ggplot2-book.org/" target="_blank" style="color:rgba(255,255,255,.7);">ggplot2 Book</a></li>
      </ul>
    </div>
    <div class="col-md-2">
      <h5 style="color:#fff; font-size:.95rem;">Tools</h5>
      <ul style="list-style:none; padding:0; font-size:.85rem;">
        <li><a href="https://www.r-project.org/" target="_blank" style="color:rgba(255,255,255,.7);">Download R</a></li>
        <li><a href="https://posit.co/downloads/" target="_blank" style="color:rgba(255,255,255,.7);">RStudio</a></li>
        <li><a href="https://www.tidyverse.org/" target="_blank" style="color:rgba(255,255,255,.7);">Tidyverse</a></li>
      </ul>
    </div>
    <div class="col-md-3">
      <h5 style="color:#fff; font-size:.95rem;">Instructor</h5>
      <p style="font-size:.85rem;">Dr. Vivek H. Patil<br>
      <a href="mailto:patil@gonzaga.edu" style="color:rgba(255,255,255,.7);">patil@gonzaga.edu</a><br>
      <a href="http://patilv.com" target="_blank" style="color:rgba(255,255,255,.7);">patilv.com</a></p>
    </div>
  </div>
  <hr style="border-color:rgba(255,255,255,.15); margin:1.5rem 0 1rem;">
  <p style="font-size:.78rem; text-align:center; margin:0;">&copy; Gonzaga University School of Business. Course materials by Dr. Vivek H. Patil. <em>Ad Majorem Dei Gloriam.</em></p>
</div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("week04.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
